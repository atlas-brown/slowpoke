SLOWPOKE_DELAY_MICROS_SERVICE1=300
SLOWPOKE_DELAY_MICROS_SERVICE0=0
SLOWPOKE_POKER_BATCH_THRESHOLD=40000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0005
bash run.sh synthetic two-services 8 512 40000
[run.sh] Running benchmark synthetic with request two-services, thread 8, conn 512, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   296.23ms   64.68ms 580.23ms   78.52%
    Req/Sec   203.56     66.50   383.00     68.75%
  Latency Distribution
     50%  302.02ms
     75%  325.16ms
     90%  378.98ms
     99%  460.90ms
  4870 requests in 3.02s, 1.95MB read
Requests/sec:   1611.33
Transfer/sec:    659.32KB
[run.sh] Speed is 1611.33, duration is 37
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d37s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-698fc84f47-58ns5        260m         45Mi            
service1-56848f5f6b-mzb7v        1000m        15Mi            
ubuntu-client-76886f6bbd-w2rgx   51m          11Mi            
Running 37s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   305.36ms   54.38ms 699.90ms   73.83%
    Req/Sec   209.27     62.24   575.00     68.38%
  Latency Distribution
     50%  306.05ms
     75%  324.44ms
     90%  377.33ms
     99%  472.97ms
  40000 requests in 37.00s, 15.98MB read
Requests/sec:   1081.08
Transfer/sec:    442.35KB
------------------------------
stop time: 23.699122
stop time: 23.834869
stop time: 24.066834
stop time: 24.057980
stop time: 24.057953
stop time: 24.053956
stop time: 24.121414
stop time: 24.219218
[run.sh] Test finished with status 0

40000 / ( (23.699122 + 23.834869 + 24.066834 + 24.057980 + 24.057953 + 24.053956 + 24.121414 + 24.219218) / 8 ) = 1,665.7006817286
2,000,000 / 1,665.7006817286 = 1,200.6959125
