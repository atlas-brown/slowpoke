benchmark                        : social
num_threads                      : 8
num_conns                        : 1024
target_service                   : hometimeline
request_type                     : mix
repetitions                      : 2
target_num_exp                   : 1
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
poker_batch_req                  : 100
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'composepost': 0.09979209979, 'hometimeline': 0.7005428505, 'poststorage': 0.9497747748, 'socialgraph': 0.09979209979, 'usertimeline': 0.4022002772}
baseline_service_processing_time : {'composepost': 0, 'hometimeline': 1000, 'poststorage': 0, 'socialgraph': 0, 'usertimeline': 0}
cpu_quota                        : {'composepost': 2, 'hometimeline': 2, 'poststorage': 2, 'socialgraph': 2, 'usertimeline': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-6vx6s:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:33:23.346912Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   519.25ms  607.56ms   2.73s    83.96%
        Req/Sec   162.87    105.94   550.00     66.95%
        Latency Distribution
        50%  238.74ms
        75%  922.82ms
        90%    1.35s
        99%    2.29s
        3894 requests in 3.03s, 296.61KB read
        Requests/sec:   1283.14
        Transfer/sec:     97.74KB
        [run.sh] Speed is 1283.14, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   660.00ms  614.09ms   2.83s    51.49%
        Req/Sec   186.75     98.97     1.16k    76.61%
        Latency Distribution
        50%  969.78ms
        75%    1.18s
        90%    1.33s
        99%    2.16s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 12.713409
        stop time: 13.793498
        stop time: 13.468908
        stop time: 13.553770
        stop time: 13.591389
        stop time: 13.238989
        stop time: 13.643076
        stop time: 13.634303
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-gf82n     57m          15Mi
        hometimeline-5b75f5789f-vq4z5    1890m        82Mi
        poststorage-6f7cf87dc5-5ng5k     441m         27Mi
        socialgraph-7885949c4-rt4dc      24m          11Mi
        ubuntu-client-76886f6bbd-6vx6s   670m         116Mi
        usertimeline-647cdc4d75-vm52t    84m          15Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [12.713409, 13.793498, 13.468908, 13.55377, 13.591389, 13.238989, 13.643076, 13.634303]
    [exp] Throughput: 1486.4729751502039
[test.py] Baseline throughput: 1486.4729751502039
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '0', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-c57fb:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:35:00.212029Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   227.52ms  233.21ms 876.90ms   74.81%
        Req/Sec   347.10    160.16     0.95k    67.08%
        Latency Distribution
        50%  159.57ms
        75%  463.81ms
        90%  581.43ms
        99%  705.60ms
        8298 requests in 3.03s, 632.07KB read
        Requests/sec:   2735.95
        Transfer/sec:    208.40KB
        [run.sh] Speed is 2735.95, duration is 10
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d10s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 10s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   322.17ms  295.69ms 966.19ms   42.20%
        Req/Sec   369.32    122.58     1.27k    71.06%
        Latency Distribution
        50%  378.74ms
        75%  610.95ms
        90%  664.36ms
        99%  790.51ms
        20000 requests in 10.00s, 1.49MB read
        Requests/sec:   1999.97
        Transfer/sec:    152.34KB
        ------------------------------
        stop time: 6.508425
        stop time: 6.444143
        stop time: 6.941445
        stop time: 6.916001
        stop time: 6.922039
        stop time: 6.900896
        stop time: 7.076122
        stop time: 6.796912
        [run.sh] Checking the resource usage
        NAME                            CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-lcc5x    87m          9Mi
        hometimeline-6665bb4554-rcdtt   54m          13Mi
        poststorage-6f7cf87dc5-m6k9k    35m          13Mi
        socialgraph-7885949c4-dsffw     54m          9Mi
        usertimeline-647cdc4d75-rzq7d   15m          7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [6.508425, 6.444143, 6.941445, 6.916001, 6.922039, 6.900896, 7.076122, 6.796912]
    [exp] Throughput: 2935.4575625211637
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-rcdlf:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:36:40.794065Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   446.28ms  431.45ms   1.79s    60.50%
        Req/Sec   166.57    105.19   610.00     70.42%
        Latency Distribution
        50%  332.84ms
        75%  798.89ms
        90%    1.08s
        99%    1.46s
        3985 requests in 3.02s, 303.54KB read
        Requests/sec:   1317.60
        Transfer/sec:    100.36KB
        [run.sh] Speed is 1317.60, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   645.80ms  568.71ms   2.01s    48.94%
        Req/Sec   185.00    113.55   646.00     67.35%
        Latency Distribution
        50%  861.43ms
        75%    1.17s
        90%    1.31s
        99%    1.58s
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.08
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 13.195813
        stop time: 13.318879
        stop time: 13.157849
        stop time: 13.791084
        stop time: 13.528892
        stop time: 13.527063
        stop time: 14.355212
        stop time: 14.199801
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-676c8b7677-tcwp7     46m          15Mi
        hometimeline-5b75f5789f-qktt7    455m         92Mi
        poststorage-87668cf95-twm74      47m          28Mi
        socialgraph-57b986797c-k9nqz     5m           11Mi
        ubuntu-client-76886f6bbd-rcdlf   191m         108Mi
        usertimeline-747d4cdf7f-6fph5    129m         17Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [13.195813, 13.318879, 13.157849, 13.791084, 13.528892, 13.527063, 14.355212, 14.199801]
    [exp] Throughput: 1466.886060257864
[test.py] Finished running 0th optmization experiment: groundtruth->2935.4575625211637, slowdown->1466.886060257864, predicted->3017.093818713651, err->2.7810402451321057
[test.py] Baseline throughput:  1486.4729751502039
[test.py] Groundtruth:  [2935.4575625211637]
[test.py] Slowdown:  [1466.886060257864]
[test.py] Predicted:  [3017.093818713651]
[test.py] Error percentage:  [2.7810402451321057]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-22tjb:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:38:14.830013Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   551.88ms  636.09ms   2.65s    84.83%
        Req/Sec   170.87    107.39   500.00     62.34%
        Latency Distribution
        50%  292.74ms
        75%  942.77ms
        90%    1.46s
        99%    2.42s
        3992 requests in 3.04s, 304.08KB read
        Requests/sec:   1315.07
        Transfer/sec:    100.17KB
        [run.sh] Speed is 1315.07, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   650.25ms  601.97ms   2.65s    50.15%
        Req/Sec   186.38     97.33     0.94k    73.83%
        Latency Distribution
        50%  773.64ms
        75%    1.18s
        90%    1.33s
        99%    1.91s
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 13.020847
        stop time: 12.765309
        stop time: 13.465889
        stop time: 13.445373
        stop time: 13.734191
        stop time: 13.740999
        stop time: 13.896860
        stop time: 13.714425
        [run.sh] Checking the resource usage
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > error: metrics not available yet
    [exp] Times: [13.020847, 12.765309, 13.465889, 13.445373, 13.734191, 13.740999, 13.89686, 13.714425]
    [exp] Throughput: 1484.451855900213
[test.py] Baseline throughput: 1484.451855900213
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '0', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-5vzzc:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:39:48.532908Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   291.15ms  270.77ms 984.50ms   44.66%
        Req/Sec   352.74    114.85   760.00     73.22%
        Latency Distribution
        50%  302.52ms
        75%  554.29ms
        90%  642.83ms
        99%  844.23ms
        8427 requests in 3.03s, 641.90KB read
        Requests/sec:   2777.40
        Transfer/sec:    211.56KB
        [run.sh] Speed is 2777.40, duration is 10
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d10s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 10s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   313.65ms  291.90ms 973.84ms   38.56%
        Req/Sec   364.35    133.53     1.05k    68.93%
        Latency Distribution
        50%  267.27ms
        75%  612.56ms
        90%  667.72ms
        99%  768.77ms
        20000 requests in 10.00s, 1.49MB read
        Requests/sec:   1999.97
        Transfer/sec:    152.34KB
        ------------------------------
        stop time: 6.213225
        stop time: 6.390423
        stop time: 6.765896
        stop time: 7.008405
        stop time: 7.033206
        stop time: 7.213018
        stop time: 7.197767
        stop time: 7.296894
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-jtlcz     89m          13Mi
        hometimeline-6665bb4554-zj6lm    622m         96Mi
        poststorage-6f7cf87dc5-mcn9t     334m         30Mi
        socialgraph-7885949c4-dfhds      17m          10Mi
        ubuntu-client-76886f6bbd-5vzzc   484m         77Mi
        usertimeline-647cdc4d75-fwbgl    77m          16Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [6.213225, 6.390423, 6.765896, 7.008405, 7.033206, 7.213018, 7.197767, 7.296894]
    [exp] Throughput: 2902.8190255258305
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 1024 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-fcwzl:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:41:29.019085Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   401.85ms  377.93ms   1.96s    61.72%
        Req/Sec   174.06    123.73   570.00     67.80%
        Latency Distribution
        50%  345.73ms
        75%  649.78ms
        90%  943.55ms
        99%    1.34s
        4116 requests in 3.04s, 313.52KB read
        Requests/sec:   1352.06
        Transfer/sec:    102.99KB
        [run.sh] Speed is 1352.06, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   673.10ms  574.55ms   1.94s    49.98%
        Req/Sec   184.82     99.74     0.87k    67.66%
        Latency Distribution
        50%    1.01s
        75%    1.20s
        90%    1.31s
        99%    1.55s
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.08
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 13.210876
        stop time: 13.952272
        stop time: 13.762291
        stop time: 13.693800
        stop time: 13.688316
        stop time: 13.744142
        stop time: 13.644872
        stop time: 13.711134
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-676c8b7677-tdr5j     90m          16Mi
        hometimeline-5b75f5789f-4ng2d    1906m        96Mi
        poststorage-87668cf95-772l8      513m         36Mi
        socialgraph-57b986797c-5tkv4     25m          13Mi
        ubuntu-client-76886f6bbd-fcwzl   714m         116Mi
        usertimeline-747d4cdf7f-vm2v9    232m         18Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [13.210876, 13.952272, 13.762291, 13.6938, 13.688316, 13.744142, 13.644872, 13.711134]
    [exp] Throughput: 1462.419880984066
[test.py] Finished running 0th optmization experiment: groundtruth->2902.8190255258305, slowdown->1462.419880984066, predicted->2998.260542655746, err->3.287890712119984
[test.py] Baseline throughput:  1484.451855900213
[test.py] Groundtruth:  [2902.8190255258305]
[test.py] Slowdown:  [1462.419880984066]
[test.py] Predicted:  [2998.260542655746]
[test.py] Error percentage:  [3.287890712119984]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1486.4729751502039
    Groundtruth: [2935.4575625211637]
    Slowdown:    [1466.886060257864]
    Predicted:   [3017.093818713651]
    Error Perc:  [2.7810402451321057]
[test.py] Result for the experiment 1: 
    Baseline throughput: 1484.451855900213
    Groundtruth: [2902.8190255258305]
    Slowdown:    [1462.419880984066]
    Predicted:   [2998.260542655746]
    Error Perc:  [3.287890712119984]
