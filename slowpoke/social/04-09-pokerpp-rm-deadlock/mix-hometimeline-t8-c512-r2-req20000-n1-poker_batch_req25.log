benchmark                        : social
num_threads                      : 8
num_conns                        : 512
target_service                   : hometimeline
request_type                     : mix
repetitions                      : 2
target_num_exp                   : 1
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
poker_batch_req                  : 25
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'composepost': 0.09979209979, 'hometimeline': 0.7005428505, 'poststorage': 0.9497747748, 'socialgraph': 0.09979209979, 'usertimeline': 0.4022002772}
baseline_service_processing_time : {'composepost': 0, 'hometimeline': 1000, 'poststorage': 0, 'socialgraph': 0, 'usertimeline': 0}
cpu_quota                        : {'composepost': 2, 'hometimeline': 2, 'poststorage': 2, 'socialgraph': 2, 'usertimeline': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-w9kcp:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:23:21.222215Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   302.07ms  276.46ms   1.36s    49.33%
        Req/Sec   176.48     91.35   560.00     69.58%
        Latency Distribution
        50%  293.13ms
        75%  526.41ms
        90%  656.94ms
        99%  935.83ms
        4223 requests in 3.02s, 321.67KB read
        Requests/sec:   1398.70
        Transfer/sec:    106.54KB
        [run.sh] Speed is 1398.70, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   342.61ms  310.44ms   1.52s    50.19%
        Req/Sec   186.00     89.16   717.00     68.66%
        Latency Distribution
        50%  415.09ms
        75%  567.70ms
        90%  730.79ms
        99%    1.07s
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 13.245161
        stop time: 13.329156
        stop time: 13.294118
        stop time: 13.711581
        stop time: 13.759520
        stop time: 13.403421
        stop time: 13.610773
        stop time: 13.717626
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-75bd95f8d4-7s4wb     80m          13Mi
        hometimeline-6bc985765-5sffv     358m         54Mi
        poststorage-fbdbc6b5-qx2k7       0m           28Mi
        socialgraph-8486d8f7d4-svswp     1m           10Mi
        ubuntu-client-76886f6bbd-w9kcp   4m           42Mi
        usertimeline-575677cb5-5zhwt     130m         15Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [13.245161, 13.329156, 13.294118, 13.711581, 13.75952, 13.403421, 13.610773, 13.717626]
    [exp] Throughput: 1480.5033074628955
[test.py] Baseline throughput: 1480.5033074628955
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '0', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-lz98q:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:24:54.956888Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   167.29ms  145.55ms 603.77ms   49.32%
        Req/Sec   342.03    100.41   656.00     67.50%
        Latency Distribution
        50%  182.24ms
        75%  285.67ms
        90%  352.39ms
        99%  501.38ms
        8181 requests in 3.03s, 623.16KB read
        Requests/sec:   2697.20
        Transfer/sec:    205.45KB
        [run.sh] Speed is 2697.20, duration is 11
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d11s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 11s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   173.34ms  152.02ms 727.69ms   49.16%
        Req/Sec   364.33    103.16     1.37k    75.50%
        Latency Distribution
        50%  211.89ms
        75%  296.57ms
        90%  362.75ms
        99%  495.52ms
        20000 requests in 11.00s, 1.49MB read
        Requests/sec:   1818.16
        Transfer/sec:    138.49KB
        ------------------------------
        stop time: 6.798496
        stop time: 7.025979
        stop time: 6.853352
        stop time: 7.119579
        stop time: 6.870113
        stop time: 6.823843
        stop time: 6.760080
        stop time: 6.860441
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-75bd95f8d4-lh444     88m          11Mi
        hometimeline-585f9f445d-vtlw2    362m         49Mi
        poststorage-fbdbc6b5-whcsw       333m         26Mi
        socialgraph-8486d8f7d4-6z2pw     17m          10Mi
        ubuntu-client-76886f6bbd-lz98q   443m         47Mi
        usertimeline-575677cb5-wz5sx     6m           15Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [6.798496, 7.025979, 6.853352, 7.119579, 6.870113, 6.823843, 6.76008, 6.860441]
    [exp] Throughput: 2903.185144300005
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-x8sh6:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:26:35.822957Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   317.57ms  260.29ms   1.10s    54.72%
        Req/Sec   178.16     69.85   340.00     68.94%
        Latency Distribution
        50%  332.43ms
        75%  526.65ms
        90%  646.12ms
        99%  902.70ms
        4198 requests in 3.03s, 319.77KB read
        Requests/sec:   1384.83
        Transfer/sec:    105.49KB
        [run.sh] Speed is 1384.83, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   336.53ms  283.61ms   1.52s    54.47%
        Req/Sec   188.29     74.64   480.00     67.77%
        Latency Distribution
        50%  412.34ms
        75%  558.57ms
        90%  678.35ms
        99%  987.93ms
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 12.833792
        stop time: 13.281829
        stop time: 13.628602
        stop time: 13.332865
        stop time: 13.459110
        stop time: 13.189892
        stop time: 13.458277
        stop time: 13.537279
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-56b577dc7f-mlf7l     68m          14Mi
        hometimeline-6bc985765-jrrcd     1660m        61Mi
        poststorage-7694b9545-n5shh      46m          30Mi
        socialgraph-7ccd5c54d9-h9q4p     34m          10Mi
        ubuntu-client-76886f6bbd-x8sh6   738m         66Mi
        usertimeline-5945ddc897-nctsh    173m         17Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [12.833792, 13.281829, 13.628602, 13.332865, 13.45911, 13.189892, 13.458277, 13.537279]
    [exp] Throughput: 1499.2272514237648
[test.py] Finished running 0th optmization experiment: groundtruth->2903.185144300005, slowdown->1499.2272514237648, predicted->3157.1749449889307, err->8.74866011172587
[test.py] Baseline throughput:  1480.5033074628955
[test.py] Groundtruth:  [2903.185144300005]
[test.py] Slowdown:  [1499.2272514237648]
[test.py] Predicted:  [3157.1749449889307]
[test.py] Error percentage:  [8.74866011172587]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-qq76l:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:28:09.837919Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   313.87ms  299.65ms   1.60s    57.00%
        Req/Sec   175.18     89.93   480.00     66.39%
        Latency Distribution
        50%  311.14ms
        75%  513.99ms
        90%  682.77ms
        99%    1.22s
        4165 requests in 3.03s, 317.26KB read
        Requests/sec:   1375.47
        Transfer/sec:    104.77KB
        [run.sh] Speed is 1375.47, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   344.71ms  324.72ms   2.03s    52.05%
        Req/Sec   186.81     87.18   818.00     70.18%
        Latency Distribution
        50%  361.86ms
        75%  557.82ms
        90%  790.21ms
        99%    1.17s
        20001 requests in 21.00s, 1.49MB read
        Requests/sec:    952.42
        Transfer/sec:     72.55KB
        ------------------------------
        stop time: 13.506982
        stop time: 13.658817
        stop time: 13.504940
        stop time: 13.214832
        stop time: 13.420913
        stop time: 13.128304
        stop time: 13.274589
        stop time: 13.634643
        [run.sh] Checking the resource usage
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > error: metrics not available yet
    [exp] Times: [13.506982, 13.658817, 13.50494, 13.214832, 13.420913, 13.128304, 13.274589, 13.634643]
    [exp] Throughput: 1490.534824389845
[test.py] Baseline throughput: 1490.534824389845
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '0', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-9gml6:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:29:42.461016Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   171.22ms  148.48ms 808.88ms   50.68%
        Req/Sec   338.30     84.97   590.00     68.75%
        Latency Distribution
        50%  182.90ms
        75%  290.12ms
        90%  355.63ms
        99%  519.96ms
        8090 requests in 3.03s, 616.23KB read
        Requests/sec:   2665.96
        Transfer/sec:    203.07KB
        [run.sh] Speed is 2665.96, duration is 11
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d11s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 11s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   179.15ms  155.36ms 681.88ms   49.65%
        Req/Sec   352.71     85.56   780.00     71.50%
        Latency Distribution
        50%  222.07ms
        75%  305.51ms
        90%  370.08ms
        99%  507.48ms
        20000 requests in 11.00s, 1.49MB read
        Requests/sec:   1818.16
        Transfer/sec:    138.49KB
        ------------------------------
        stop time: 7.060838
        stop time: 7.280181
        stop time: 6.819845
        stop time: 7.133502
        stop time: 7.246276
        stop time: 7.153148
        stop time: 7.151672
        stop time: 7.192635
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-75bd95f8d4-jjzxk     21m          13Mi
        hometimeline-585f9f445d-dmmqw    605m         61Mi
        poststorage-fbdbc6b5-8hl9f       330m         26Mi
        socialgraph-8486d8f7d4-9c7zc     18m          10Mi
        ubuntu-client-76886f6bbd-9gml6   437m         62Mi
        usertimeline-575677cb5-xkvxk     29m          16Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [7.060838, 7.280181, 6.819845, 7.133502, 7.246276, 7.153148, 7.151672, 7.192635]
    [exp] Throughput: 2805.1426750790793
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '25', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '25', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '25', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 512 20000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-s95ql:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-09T22:31:23.247031Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   309.90ms  273.43ms   1.40s    59.85%
        Req/Sec   175.89     79.54   383.00     71.49%
        Latency Distribution
        50%  294.61ms
        75%  520.59ms
        90%  647.69ms
        99%    1.03s
        4153 requests in 3.02s, 316.34KB read
        Requests/sec:   1373.55
        Transfer/sec:    104.63KB
        [run.sh] Speed is 1373.55, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   339.97ms  282.42ms   1.44s    54.14%
        Req/Sec   185.52     65.04   444.00     68.22%
        Latency Distribution
        50%  421.95ms
        75%  555.90ms
        90%  684.40ms
        99%  980.04ms
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 13.454654
        stop time: 13.631659
        stop time: 13.677488
        stop time: 13.779270
        stop time: 13.487489
        stop time: 13.286764
        stop time: 13.388898
        stop time: 13.764370
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-56b577dc7f-dckwb     69m          15Mi
        hometimeline-6bc985765-dx5ps     1906m        55Mi
        poststorage-7694b9545-kckc2      430m         29Mi
        socialgraph-7ccd5c54d9-q7hl6     32m          13Mi
        ubuntu-client-76886f6bbd-s95ql   695m         49Mi
        usertimeline-5945ddc897-5lmdb    93m          16Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [13.454654, 13.631659, 13.677488, 13.77927, 13.487489, 13.286764, 13.388898, 13.76437]
    [exp] Throughput: 1475.0541787399852
[test.py] Finished running 0th optmization experiment: groundtruth->2805.1426750790793, slowdown->1475.0541787399852, predicted->3051.8530455333066, err->8.794931275546347
[test.py] Baseline throughput:  1490.534824389845
[test.py] Groundtruth:  [2805.1426750790793]
[test.py] Slowdown:  [1475.0541787399852]
[test.py] Predicted:  [3051.8530455333066]
[test.py] Error percentage:  [8.794931275546347]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1480.5033074628955
    Groundtruth: [2903.185144300005]
    Slowdown:    [1499.2272514237648]
    Predicted:   [3157.1749449889307]
    Error Perc:  [8.74866011172587]
[test.py] Result for the experiment 1: 
    Baseline throughput: 1490.534824389845
    Groundtruth: [2805.1426750790793]
    Slowdown:    [1475.0541787399852]
    Predicted:   [3051.8530455333066]
    Error Perc:  [8.794931275546347]
