benchmark                        : social
num_threads                      : 8
num_conns                        : 256
target_service                   : hometimeline
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 10
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
poker_batch_req                  : 100
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'composepost': 0.09979209979, 'hometimeline': 0.7005428505, 'poststorage': 0.9497747748, 'socialgraph': 0.09979209979, 'usertimeline': 0.4022002772}
baseline_service_processing_time : {'composepost': 0, 'hometimeline': 1000, 'poststorage': 0, 'socialgraph': 0, 'usertimeline': 0}
cpu_quota                        : {'composepost': 2, 'hometimeline': 2, 'poststorage': 2, 'socialgraph': 2, 'usertimeline': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 100, 200, 300, 400, 500, 600, 700, 800, 900]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-mx64p:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:23:52.416389Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   188.03ms  160.99ms 838.64ms   55.36%
        Req/Sec   175.24     72.89   383.00     66.25%
        Latency Distribution
        50%  193.12ms
        75%  294.18ms
        90%  411.94ms
        99%  603.40ms
        4192 requests in 3.01s, 319.31KB read
        Requests/sec:   1390.79
        Transfer/sec:    105.94KB
        [run.sh] Speed is 1390.79, duration is 53
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d53s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                           CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-brgn2   30m          10Mi
        poststorage-6f7cf87dc5-6w6xx   27m          13Mi
        socialgraph-7885949c4-46cth    45m          10Mi
        Running 1m test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   180.74ms  175.88ms   1.22s    62.52%
        Req/Sec   184.96     79.87   650.00     66.69%
        Latency Distribution
        50%  161.34ms
        75%  288.71ms
        90%  424.93ms
        99%  695.16ms
        50001 requests in 0.88m, 3.72MB read
        Requests/sec:    943.41
        Transfer/sec:     71.86KB
        ------------------------------
        stop time: 33.709317
        stop time: 33.946283
        stop time: 34.146091
        stop time: 33.840155
        stop time: 34.085860
        stop time: 33.780248
        stop time: 34.127733
        stop time: 33.510414
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [33.709317, 33.946283, 34.146091, 33.840155, 34.08586, 33.780248, 34.127733, 33.510414]
    [exp] Throughput: 1475.2194426723474
[test.py] Baseline throughput: 1475.2194426723474
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '0', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-kfx5w:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:25:49.952131Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency    90.72ms   72.94ms 402.46ms   55.16%
        Req/Sec   365.02     68.23   580.00     70.12%
        Latency Distribution
        50%   97.85ms
        75%  138.48ms
        90%  186.31ms
        99%  277.49ms
        8761 requests in 3.10s, 667.34KB read
        Requests/sec:   2826.13
        Transfer/sec:    215.27KB
        [run.sh] Speed is 2826.13, duration is 26
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d26s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 26s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   475.75ms    1.06s    5.84s    88.85%
        Req/Sec   367.82     86.06   828.00     75.43%
        Latency Distribution
        50%  110.55ms
        75%  176.81ms
        90%    1.88s
        99%    4.70s
        50000 requests in 26.00s, 3.72MB read
        Requests/sec:   1923.07
        Transfer/sec:    146.48KB
        ------------------------------
        stop time: 21.303431
        stop time: 21.355310
        stop time: 21.639922
        stop time: 21.690849
        stop time: 21.574087
        stop time: 21.613863
        stop time: 21.543936
        stop time: 21.607561
        [run.sh] Checking the resource usage
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > error: metrics not available yet
    [exp] Times: [21.303431, 21.35531, 21.639922, 21.690849, 21.574087, 21.613863, 21.543936, 21.607561]
    [exp] Throughput: 2321.1420896472773
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-r64lc:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:27:31.223560Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   192.53ms  146.99ms 857.13ms   55.46%
        Req/Sec   163.57     56.93   310.00     69.29%
        Latency Distribution
        50%  207.86ms
        75%  294.40ms
        90%  373.88ms
        99%  580.08ms
        3929 requests in 3.09s, 299.28KB read
        Requests/sec:   1270.31
        Transfer/sec:     96.76KB
        [run.sh] Speed is 1270.31, duration is 59
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d59s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-676c8b7677-p2gvz     45m          14Mi
        hometimeline-5b75f5789f-w4ncb    597m         36Mi
        poststorage-87668cf95-7bftt      169m         22Mi
        socialgraph-57b986797c-28jf5     24m          11Mi
        ubuntu-client-76886f6bbd-r64lc   214m         28Mi
        usertimeline-747d4cdf7f-79xdk    150m         11Mi
        Running 1m test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   941.25ms    1.40s    7.07s    83.14%
        Req/Sec   160.73     64.63   370.00     70.10%
        Latency Distribution
        50%  274.65ms
        75%    1.11s
        90%    3.48s
        99%    5.16s
        47883 requests in 0.98m, 3.56MB read
        Requests/sec:    810.86
        Transfer/sec:     61.76KB
        ------------------------------
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh social mix 8 256 50000
[test.py] Found 0 throughput, rerun experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-nlhwv:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:29:42.313450Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   185.52ms  137.45ms 658.35ms   53.33%
        Req/Sec   167.50     58.16   340.00     70.00%
        Latency Distribution
        50%  214.89ms
        75%  285.60ms
        90%  353.44ms
        99%  517.06ms
        4006 requests in 3.02s, 305.14KB read
        Requests/sec:   1326.98
        Transfer/sec:    101.08KB
        [run.sh] Speed is 1326.98, duration is 56
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d56s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-676c8b7677-xms2j     208m         9Mi
        hometimeline-5b75f5789f-w5lrh    215m         15Mi
        poststorage-87668cf95-g8f74      74m          13Mi
        socialgraph-57b986797c-dvvrt     2m           11Mi
        ubuntu-client-76886f6bbd-nlhwv   2m           1Mi
        usertimeline-747d4cdf7f-p7fv4    54m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   880.60ms    1.38s    7.34s    83.91%
        Req/Sec   165.89     60.93   370.00     69.64%
        Latency Distribution
        50%  267.33ms
        75%  636.12ms
        90%    3.41s
        99%    5.13s
        49262 requests in 0.93m, 3.66MB read
        Requests/sec:    878.90
        Transfer/sec:     66.95KB
        ------------------------------
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh social mix 8 256 50000
[test.py] Found 0 throughput, rerun experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '368.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '870.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-6hdkg:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:31:50.043287Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   187.98ms  139.68ms 676.96ms   53.75%
        Req/Sec   163.28     55.89   320.00     70.00%
        Latency Distribution
        50%  213.91ms
        75%  298.48ms
        90%  360.61ms
        99%  513.63ms
        3905 requests in 3.03s, 297.45KB read
        Requests/sec:   1289.32
        Transfer/sec:     98.21KB
        [run.sh] Speed is 1289.32, duration is 58
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d58s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        hometimeline-5b75f5789f-qcsfr    185m         15Mi
        ubuntu-client-76886f6bbd-6hdkg   1m           0Mi
        Running 1m test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   732.99ms    1.20s    7.58s    85.72%
        Req/Sec   162.98     64.95   800.00     70.61%
        Latency Distribution
        50%  250.84ms
        75%  495.79ms
        90%    2.75s
        99%    4.88s
        50000 requests in 0.97m, 3.72MB read
        Requests/sec:    862.07
        Transfer/sec:     65.67KB
        ------------------------------
        stop time: 52.648123
        stop time: 53.106183
        stop time: 52.978771
        stop time: 52.979186
        stop time: 52.712821
        stop time: 52.530444
        stop time: 52.571149
        stop time: 52.781954
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [52.648123, 53.106183, 52.978771, 52.979186, 52.712821, 52.530444, 52.571149, 52.781954]
    [exp] Throughput: 947.1745795316223
[test.py] Finished running 0th optmization experiment: groundtruth->2321.1420896472773, slowdown->947.1745795316223, predicted->1417.434137768466, err->-38.93376264682442
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '100', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-w78cx:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:33:52.556494Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   103.22ms   83.73ms 518.52ms   54.66%
        Req/Sec   317.03     62.77   505.00     66.67%
        Latency Distribution
        50%  115.12ms
        75%  160.90ms
        90%  208.82ms
        99%  313.03ms
        7580 requests in 3.02s, 577.38KB read
        Requests/sec:   2510.64
        Transfer/sec:    191.24KB
        [run.sh] Speed is 2510.64, duration is 29
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d29s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 29s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   732.02ms    1.31s    5.49s    84.61%
        Req/Sec   312.90     88.17   848.00     74.21%
        Latency Distribution
        50%  142.36ms
        75%  334.36ms
        90%    3.11s
        99%    4.91s
        49298 requests in 29.03s, 3.67MB read
        Requests/sec:   1697.99
        Transfer/sec:    129.34KB
        ------------------------------
        stop time: 29.007277
        [run.sh] Checking the resource usage
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
        > error: metrics not available yet
    [exp] Error running bash run.sh social mix 8 256 50000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '100', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-2lpgm:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:35:26.585822Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   104.26ms   87.36ms 542.15ms   56.30%
        Req/Sec   321.76     74.83   565.00     69.17%
        Latency Distribution
        50%  110.43ms
        75%  157.06ms
        90%  214.20ms
        99%  344.87ms
        7694 requests in 3.03s, 586.07KB read
        Requests/sec:   2536.95
        Transfer/sec:    193.24KB
        [run.sh] Speed is 2536.95, duration is 29
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d29s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 29s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   739.61ms    1.32s    6.14s    84.58%
        Req/Sec   307.26     88.80   560.00     77.74%
        Latency Distribution
        50%  141.16ms
        75%  369.87ms
        90%    3.12s
        99%    4.96s
        47277 requests in 29.03s, 3.52MB read
        Requests/sec:   1628.34
        Transfer/sec:    124.03KB
        ------------------------------
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-k4hdr     165m         11Mi
        hometimeline-5d7bbcf5dc-fxqgb    52m          38Mi
        poststorage-6f7cf87dc5-qf5n4     328m         25Mi
        socialgraph-7885949c4-57675      14m          10Mi
        ubuntu-client-76886f6bbd-2lpgm   196m         34Mi
        usertimeline-647cdc4d75-hzfx6    195m         12Mi
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh social mix 8 256 50000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '100', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-9ds76:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:37:00.523312Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   109.56ms   92.91ms 725.54ms   57.97%
        Req/Sec   304.97     75.51   550.00     70.42%
        Latency Distribution
        50%  115.28ms
        75%  166.94ms
        90%  221.55ms
        99%  374.41ms
        7294 requests in 3.02s, 555.60KB read
        Requests/sec:   2418.82
        Transfer/sec:    184.25KB
        [run.sh] Speed is 2418.82, duration is 31
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d31s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-7l6fq     264m         12Mi
        hometimeline-5d7bbcf5dc-bt6zr    354m         43Mi
        poststorage-6f7cf87dc5-2qwrv     404m         30Mi
        socialgraph-7885949c4-x24z9      25m          11Mi
        ubuntu-client-76886f6bbd-9ds76   333m         41Mi
        usertimeline-647cdc4d75-ncrzz    232m         12Mi
        Running 31s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   696.56ms    1.28s   11.34s    85.07%
        Req/Sec   316.78     91.97   797.00     77.47%
        Latency Distribution
        50%  134.27ms
        75%  293.35ms
        90%    2.99s
        99%    4.86s
        48966 requests in 31.03s, 3.64MB read
        Requests/sec:   1577.84
        Transfer/sec:    120.19KB
        ------------------------------
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh social mix 8 256 50000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '100', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-rwrdj:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:38:36.116465Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   108.18ms   93.34ms 671.12ms   57.97%
        Req/Sec   312.84     70.82   505.00     68.18%
        Latency Distribution
        50%  115.45ms
        75%  161.69ms
        90%  219.46ms
        99%  391.46ms
        7544 requests in 3.10s, 574.64KB read
        Requests/sec:   2433.98
        Transfer/sec:    185.40KB
        [run.sh] Speed is 2433.98, duration is 30
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d30s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-7b4b6d79dd-nfzgq     23m          10Mi
        hometimeline-5d7bbcf5dc-5fp9k    592m         36Mi
        poststorage-6f7cf87dc5-gm49r     150m         24Mi
        socialgraph-7885949c4-mvpwx      18m          10Mi
        ubuntu-client-76886f6bbd-rwrdj   7m           27Mi
        usertimeline-647cdc4d75-4w8xt    131m         11Mi
        Running 30s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   676.83ms    1.26s    6.37s    85.48%
        Req/Sec   306.74     85.70   680.00     76.94%
        Latency Distribution
        50%  141.07ms
        75%  278.92ms
        90%    2.91s
        99%    4.89s
        50000 requests in 30.00s, 3.72MB read
        Requests/sec:   1666.66
        Transfer/sec:    126.95KB
        ------------------------------
        stop time: 29.330005
        stop time: 29.625238
        stop time: 29.589826
        stop time: 29.569562
        stop time: 29.495564
        stop time: 29.430984
        stop time: 29.463997
        stop time: 29.530874
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: no objects passed to apply
    [exp] Times: [29.330005, 29.625238, 29.589826, 29.569562, 29.495564, 29.430984, 29.463997, 29.530874]
    [exp] Throughput: 1694.6563882932287
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload social/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST': '0', 'SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE': '1000', 'SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH': '0', 'SLOWPOKE_PROCESSING_MICROS_USERTIMELINE': '0', 'SLOWPOKE_DELAY_MICROS_COMPOSEPOST': '3159.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST': 'false', 'SLOWPOKE_DELAY_MICROS_HOMETIMELINE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE': 'true', 'SLOWPOKE_DELAY_MICROS_POSTSTORAGE': '331.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_SOCIALGRAPH': '3159.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH': '100', 'SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH': 'false', 'SLOWPOKE_DELAY_MICROS_USERTIMELINE': '783.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE': 'false'}
    [exp] Executing cmd `bash run.sh social mix 8 256 50000`:
        [run.sh] Running benchmark social with request mix, thread 8, conn 256, duration 60
        [run.sh] Deleting all services
        service "composepost" deleted
        deployment.apps "composepost" deleted
        service "hometimeline" deleted
        deployment.apps "hometimeline" deleted
        service "poststorage" deleted
        deployment.apps "poststorage" deleted
        service "socialgraph" deleted
        deployment.apps "socialgraph" deleted
        service "usertimeline" deleted
        deployment.apps "usertimeline" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/composepost created
        deployment.apps/composepost created
        service/hometimeline created
        deployment.apps/hometimeline created
        service/poststorage created
        deployment.apps/poststorage created
        service/socialgraph created
        deployment.apps/socialgraph created
        service/usertimeline created
        deployment.apps/usertimeline created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Populating social benchmark
        Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
        Analyzing social graph in: ./data/analysis.txt... DONE!
        Populating social graph...
        DONE!
        [run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-zlpnk:/analysis.txt
        [run.sh] Finished populating social
        [run.sh] Starting the rust proxy first for social
        [2m2025-04-08T20:40:17.259371Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c256 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 256 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   193.42ms  143.26ms 646.42ms   55.91%
        Req/Sec   159.26     59.56   323.00     65.42%
        Latency Distribution
        50%  223.22ms
        75%  301.57ms
        90%  360.35ms
        99%  538.55ms
        3810 requests in 3.01s, 290.21KB read
        Requests/sec:   1264.66
        Transfer/sec:     96.33KB
        [run.sh] Speed is 1264.66, duration is 59
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c256 -d59s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composepost-8f6fb9d66-l96q9      252m         13Mi
        hometimeline-5b75f5789f-dqffj    395m         44Mi
        poststorage-76d56f8dbf-9fcfc     844m         24Mi
        socialgraph-65644bd798-wx6zd     36m          12Mi
        ubuntu-client-76886f6bbd-zlpnk   139m         39Mi
        usertimeline-55c89b89d8-2rssx    578m         12Mi
