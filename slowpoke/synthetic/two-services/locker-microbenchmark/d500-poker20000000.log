SLOWPOKE_DELAY_MICROS_SERVICE1=500
SLOWPOKE_DELAY_MICROS_SERVICE0=0.0
SLOWPOKE_POKER_BATCH_THRESHOLD=20000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0005
bash run.sh synthetic two-services 8 512 40000
[run.sh] Running benchmark synthetic with request two-services, thread 8, conn 512, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   368.40ms   65.87ms 613.10ms   86.36%
    Req/Sec   163.31     65.29   350.00     70.00%
  Latency Distribution
     50%  377.37ms
     75%  400.74ms
     90%  424.85ms
     99%  462.73ms
  3907 requests in 3.02s, 1.56MB read
Requests/sec:   1292.91
Transfer/sec:    529.03KB
[run.sh] Speed is 1292.91, duration is 46
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d46s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-565959b5f9-nqm4t        250m         45Mi            
service1-76df84467d-vr5nn        633m         14Mi            
ubuntu-client-76886f6bbd-vxxnq   45m          11Mi            
Running 46s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   379.43ms   44.29ms 890.11ms   80.41%
    Req/Sec   168.40     49.77   373.00     69.42%
  Latency Distribution
     50%  377.44ms
     75%  400.87ms
     90%  428.42ms
     99%  495.05ms
  40000 requests in 46.00s, 15.98MB read
Requests/sec:    869.56
Transfer/sec:    355.81KB
------------------------------
stop time: 29.617487
stop time: 29.769503
stop time: 29.827543
stop time: 29.834846
stop time: 29.886151
stop time: 29.876616
stop time: 29.974748
stop time: 30.011442
[run.sh] Test finished with status 0

40000 / ( (29.617487 + 29.769503 + 29.827543 + 29.834846 + 29.886151 + 29.876616 + 29.974748 + 30.011442) / 8 ) = 1,340.04283848946

2000000 / 1,340.04283848946 = 1,492.4896