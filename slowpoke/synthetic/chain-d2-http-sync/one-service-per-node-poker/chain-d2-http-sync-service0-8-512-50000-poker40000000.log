[config.py] Random numbers for execution time: [247.2573382140748, 476.70040537096673, 676.5993667502922]
benchmark                        : synthetic
num_threads                      : 8
num_conns                        : 512
target_service                   : service0
request_type                     : chain-d2-http-sync
repetitions                      : 1
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 2
random_seed                      : 4446
request_ratio                    : {'service0': 1, 'service1': 1, 'service2': 1}
baseline_service_processing_time : {'service0': 676.6, 'service1': 476.7, 'service2': 247.26}
cpu_quota                        : {'service0': 2, 'service1': 2, 'service2': 2}
target_processing_time_range     : [0, 676.6]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 338]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0006766', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 50000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   354.65ms  203.83ms   1.31s    67.83%
        Req/Sec   167.05     96.12   424.00     62.08%
        Latency Distribution
        50%  332.50ms
        75%  481.47ms
        90%  623.13ms
        99%  978.35ms
        3994 requests in 3.03s, 2.81MB read
        Requests/sec:   1318.71
        Transfer/sec:      0.93MB
        [run.sh] Speed is 1318.71, duration is 75
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d75s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-74c66db75c-dmql9        299m         78Mi
        service1-6bcd7fbfb7-r69kl        558m         33Mi
        service2-6dc44f9545-wznwp        16m          18Mi
        ubuntu-client-76886f6bbd-hwvfb   20m          13Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.22s     1.65s   14.32s    89.42%
        Req/Sec   102.50     82.07   464.00     65.92%
        Latency Distribution
        50%  603.00ms
        75%    1.39s
        90%    2.97s
        99%    8.41s
        49391 requests in 1.25m, 34.71MB read
        Requests/sec:    657.90
        Transfer/sec:    473.50KB
        ------------------------------
        stop time: 74.687093
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh synthetic chain-d2-http-sync 8 512 50000
[test.py] Found 0 throughput, rerun experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0006766', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 50000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   380.74ms  325.21ms   1.95s    77.07%
        Req/Sec   166.25     83.26   360.00     64.47%
        Latency Distribution
        50%  272.00ms
        75%  532.09ms
        90%  859.79ms
        99%    1.46s
        3812 requests in 3.03s, 2.68MB read
        Requests/sec:   1258.91
        Transfer/sec:      0.88MB
        [run.sh] Speed is 1258.91, duration is 79
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d79s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                        CPU(cores)   MEMORY(bytes)
        service0-74c66db75c-dzbt5   581m         51Mi
        service2-6dc44f9545-cnfb6   238m         9Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.01s     1.08s    8.82s    85.24%
        Req/Sec   107.74     88.31   510.00     68.61%
        Latency Distribution
        50%  568.21ms
        75%    1.36s
        90%    2.58s
        99%    4.65s
        50000 requests in 1.32m, 35.13MB read
        Requests/sec:    632.91
        Transfer/sec:    455.40KB
        ------------------------------
        stop time: 73.420326
        stop time: 74.751361
        stop time: 74.263934
        stop time: 74.912879
        stop time: 73.938658
        stop time: 74.650661
        stop time: 73.806767
        stop time: 73.981896
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [73.420326, 74.751361, 74.263934, 74.912879, 73.938658, 74.650661, 73.806767, 73.981896]
    [exp] Throughput: 673.7108957184764
[test.py] Baseline throughput: 673.7108957184764
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 50000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   303.19ms  205.83ms   1.12s    65.47%
        Req/Sec   194.32     95.63   434.00     64.29%
        Latency Distribution
        50%  273.05ms
        75%  445.68ms
        90%  581.08ms
        99%  848.42ms
        4621 requests in 3.03s, 3.21MB read
        Requests/sec:   1523.88
        Transfer/sec:      1.06MB
        [run.sh] Speed is 1523.88, duration is 65
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d65s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     2.52s     3.83s   19.89s    85.14%
        Req/Sec   134.25    106.64   550.00     62.56%
        Latency Distribution
        50%  542.47ms
        75%    3.24s
        90%    8.55s
        99%   16.24s
        37177 requests in 1.08m, 25.85MB read
        Socket errors: connect 0, read 0, write 0, timeout 6
        Requests/sec:    571.39
        Transfer/sec:    406.78KB
        ------------------------------
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh synthetic chain-d2-http-sync 8 512 50000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 50000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
