SLOWPOKE_DELAY_MICROS_SERVICE1=0.0
SLOWPOKE_DELAY_MICROS_SERVICE0=0.0
SLOWPOKE_DELAY_MICROS_SERVICE2=0.0
SLOWPOKE_POKER_BATCH_THRESHOLD=40000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0
PROCESSING_TIME_SERVICE2=0.001000
bash run.sh synthetic chain-d2-http-sync 8 32 40000
[run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 32, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
configmap "config-service2" deleted
deployment.apps "service2" deleted
service "service2" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
configmap/config-service2 created
deployment.apps/service2 created
service/service2 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c32 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 32 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    19.50ms   11.29ms  80.02ms   66.56%
    Req/Sec   208.68     82.40     1.39k    97.93%
  Latency Distribution
     50%   19.17ms
     75%   26.86ms
     90%   33.80ms
     99%   50.72ms
  5012 requests in 3.10s, 3.42MB read
Requests/sec:   1616.60
Transfer/sec:      1.10MB
[run.sh] Speed is 1616.60, duration is 98
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c32 -d98s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-74c66db75c-pfljn        144m         12Mi            
service1-6bcd7fbfb7-zlvcn        494m         12Mi            
service2-6dc44f9545-45r2f        43m          10Mi            
ubuntu-client-76886f6bbd-2vg45   9m           3Mi             
Running 2m test @ http://service0:80/endpoint1
  8 threads and 32 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    19.49ms   10.78ms 111.47ms   67.15%
    Req/Sec   205.69     28.72   393.00     73.74%
  Latency Distribution
     50%   18.85ms
     75%   26.49ms
     90%   33.18ms
     99%   48.79ms
  40000 requests in 1.63m, 27.31MB read
Requests/sec:    408.16
Transfer/sec:    285.40KB
------------------------------
stop time: 24.228468
stop time: 24.461320
stop time: 24.383062
stop time: 24.449987
stop time: 24.350686
stop time: 24.415999
stop time: 24.351778
stop time: 24.336360
[run.sh] Test finished with status 0

(24.228468 + 24.461320 + 24.383062 + 24.449987 + 24.350686 + 24.415999 + 24.351778 + 24.336360) / 8 = 24.3722075
40000/24.3722075 = 1,641.2136651963
2000000/1,641.2136651963 = 1,218.610375