[config.py] Random numbers for execution time: [247.2573382140748, 476.70040537096673, 676.5993667502922]
benchmark                        : synthetic
num_threads                      : 8
num_conns                        : 800
target_service                   : service0
request_type                     : chain-d2-http-sync
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 2
random_seed                      : 4446
request_ratio                    : {'service0': 1, 'service1': 1, 'service2': 1}
baseline_service_processing_time : {'service0': 676.6, 'service1': 476.7, 'service2': 247.26}
cpu_quota                        : {'service0': 2, 'service1': 2, 'service2': 2}
target_processing_time_range     : [0, 676.6]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 338]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0006766', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 800 20000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   444.32ms  395.93ms   1.99s    84.31%
        Req/Sec   169.26     88.41   410.00     62.50%
        Latency Distribution
        50%  300.36ms
        75%  521.01ms
        90%    1.14s
        99%    1.75s
        3930 requests in 3.03s, 2.76MB read
        Socket errors: connect 0, read 0, write 0, timeout 52
        Requests/sec:   1295.02
        Transfer/sec:      0.91MB
        [run.sh] Speed is 1295.02, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d23s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        Running 23s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   958.76ms  908.64ms   7.03s    87.95%
        Req/Sec   131.90     94.47   500.00     65.47%
        Latency Distribution
        50%  659.71ms
        75%    1.27s
        90%    2.01s
        99%    4.56s
        20000 requests in 23.00s, 14.06MB read
        Requests/sec:    869.56
        Transfer/sec:    625.84KB
        ------------------------------
        stop time: 22.094759
        stop time: 21.252601
        stop time: 21.354666
        stop time: 22.158527
        stop time: 21.286727
        stop time: 22.375517
        stop time: 22.305616
        stop time: 21.218863
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-7c97847747-zxwpd        1673m        124Mi
        service1-8d85bfbc7-8krsh         381m         44Mi
        service2-597d9b447f-dwbjb        307m         9Mi
        ubuntu-client-76886f6bbd-vf8gs   20m          23Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [22.094759, 21.252601, 21.354666, 22.158527, 21.286727, 22.375517, 22.305616, 21.218863]
    [exp] Throughput: 919.2904576110691
[test.py] Baseline throughput: 919.2904576110691
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 800 20000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   485.75ms  361.95ms   1.95s    62.70%
        Req/Sec   194.40    109.51   490.00     68.53%
        Latency Distribution
        50%  388.33ms
        75%  762.62ms
        90%  978.11ms
        99%    1.44s
        4526 requests in 3.03s, 3.15MB read
        Socket errors: connect 0, read 0, write 0, timeout 4
        Requests/sec:   1492.83
        Transfer/sec:      1.04MB
        [run.sh] Speed is 1492.83, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d20s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        Running 20s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   887.53ms  702.07ms   4.62s    76.44%
        Req/Sec   145.79    110.43   515.00     63.80%
        Latency Distribution
        50%  663.96ms
        75%    1.22s
        90%    1.91s
        99%    3.12s
        19625 requests in 20.03s, 13.64MB read
        Requests/sec:    979.85
        Transfer/sec:    697.57KB
        ------------------------------
        stop time: 19.870130
        [run.sh] Checking the resource usage
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
        > error: metrics not available yet
    [exp] Error running bash run.sh synthetic chain-d2-http-sync 8 800 20000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 800 20000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   487.20ms  252.53ms   1.64s    67.73%
        Req/Sec   187.59    111.81   535.00     66.95%
        Latency Distribution
        50%  431.09ms
        75%  646.41ms
        90%  860.92ms
        99%    1.15s
        4471 requests in 3.03s, 3.11MB read
        Requests/sec:   1476.51
        Transfer/sec:      1.03MB
        [run.sh] Speed is 1476.51, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d20s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        Running 20s test @ http://service0:80/endpoint1
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.02s     1.11s    9.20s    85.56%
        Req/Sec   136.41     97.67   484.00     66.79%
        Latency Distribution
        50%  587.78ms
        75%    1.33s
        90%    2.61s
        99%    4.88s
        19568 requests in 20.03s, 13.60MB read
        Requests/sec:    976.97
        Transfer/sec:    695.52KB
        ------------------------------
        stop time: 19.412122
        stop time: 19.338618
        stop time: 19.380183
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-7c97847747-t9zs9        698m         110Mi
        service1-8d85bfbc7-dxwn9         1147m        108Mi
        service2-597d9b447f-6jr4z        652m         32Mi
        ubuntu-client-76886f6bbd-tsp8z   40m          24Mi
        [run.sh] Test finished with status 1
        > STDERR
        > No resources found in default namespace.
        > PANIC: unprotected error in call to Lua API (/wrk/fix_req_n.lua:32: bad argument #1 to 'format' (number expected, got nil))
        > command terminated with exit code 1
    [exp] Error running bash run.sh synthetic chain-d2-http-sync 8 800 20000
[test.py] Found 0 throughtput, rerun experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0004767', 'PROCESSING_TIME_SERVICE2': '0.00024726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 800 20000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://service0:80/endpoint1
