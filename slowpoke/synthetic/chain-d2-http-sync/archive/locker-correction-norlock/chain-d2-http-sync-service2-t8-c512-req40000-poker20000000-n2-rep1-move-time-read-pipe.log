[config.py] Random numbers for execution time: [738.7567487313221, 908.1430120173984, 1414.8986942771999]
benchmark                        : synthetic
num_threads                      : 8
num_conns                        : 512
target_service                   : service2
request_type                     : chain-d2-http-sync
repetitions                      : 1
target_num_exp                   : 2
pre_run                          : False
num_req                          : 40000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 2
random_seed                      : 22717
request_ratio                    : {'service0': 1, 'service1': 1, 'service2': 1}
baseline_service_processing_time : {'service0': 1414.9, 'service1': 908.14, 'service2': 1477.51}
cpu_quota                        : {'service0': 2, 'service1': 2, 'service2': 2}
target_processing_time_range     : [0, 1477.51]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 738]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   468.55ms  126.69ms 974.25ms   86.70%
        Req/Sec   145.34     62.41   260.00     63.94%
        Latency Distribution
        50%  423.82ms
        75%  462.82ms
        90%  676.36ms
        99%  910.63ms
        3031 requests in 3.03s, 1.75MB read
        Requests/sec:    998.70
        Transfer/sec:    592.00KB
        [run.sh] Speed is 998.70, duration is 60
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d60s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   425.52ms   62.57ms   1.37s    90.16%
        Req/Sec   151.34     38.58   330.00     67.28%
        Latency Distribution
        50%  418.22ms
        75%  442.83ms
        90%  472.04ms
        99%  660.80ms
        40000 requests in 1.00m, 23.16MB read
        Requests/sec:    666.67
        Transfer/sec:    395.18KB
        ------------------------------
        stop time: 33.217406
        stop time: 33.071157
        stop time: 33.255987
        stop time: 33.448440
        stop time: 33.552342
        stop time: 33.572964
        stop time: 33.656131
        stop time: 33.661991
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [33.217406, 33.071157, 33.255987, 33.44844, 33.552342, 33.572964, 33.656131, 33.661991]
    [exp] Throughput: 1196.5460889473923
[test.py] Baseline throughput: 1196.5460889473923
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   458.78ms   95.98ms 860.97ms   82.66%
        Req/Sec   144.91     60.36   333.00     68.27%
        Latency Distribution
        50%  430.82ms
        75%  479.73ms
        90%  583.66ms
        99%  802.34ms
        3096 requests in 3.02s, 1.79MB read
        Requests/sec:   1026.00
        Transfer/sec:    608.18KB
        [run.sh] Speed is 1026.00, duration is 58
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d58s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   421.64ms   77.62ms   1.67s    88.61%
        Req/Sec   152.18     42.66   430.00     73.75%
        Latency Distribution
        50%  412.28ms
        75%  444.50ms
        90%  483.94ms
        99%  681.27ms
        40000 requests in 0.97m, 23.16MB read
        Requests/sec:    689.65
        Transfer/sec:    408.81KB
        ------------------------------
        stop time: 32.751284
        stop time: 32.914706
        stop time: 33.058550
        stop time: 32.972318
        stop time: 33.206522
        stop time: 33.257084
        stop time: 33.319197
        stop time: 33.327514
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [32.751284, 32.914706, 33.05855, 32.972318, 33.206522, 33.257084, 33.319197, 33.327514]
    [exp] Throughput: 1208.4264710727723
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.000738', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   446.79ms  115.28ms   1.21s    91.23%
        Req/Sec   145.97     42.40   242.00     68.98%
        Latency Distribution
        50%  418.50ms
        75%  452.14ms
        90%  531.91ms
        99%    1.01s
        3207 requests in 3.03s, 1.86MB read
        Requests/sec:   1059.04
        Transfer/sec:    627.77KB
        [run.sh] Speed is 1059.04, duration is 56
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d56s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-565959b5f9-dhlnx        607m         38Mi
        service1-745ff764dc-vqmdt        435m         15Mi
        service2-55c99d4dbc-t77lw        327m         8Mi
        ubuntu-client-76886f6bbd-b5t7w   19m          0Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   421.39ms   75.85ms   1.23s    89.09%
        Req/Sec   152.38     43.09   460.00     72.77%
        Latency Distribution
        50%  412.52ms
        75%  441.90ms
        90%  480.37ms
        99%  682.11ms
        40000 requests in 0.93m, 23.16MB read
        Requests/sec:    714.28
        Transfer/sec:    423.41KB
        ------------------------------
        stop time: 32.878090
        stop time: 33.084692
        stop time: 32.993461
        stop time: 32.677683
        stop time: 33.214315
        stop time: 33.282196
        stop time: 33.288671
        stop time: 33.260712
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [32.87809, 33.084692, 32.993461, 32.677683, 33.214315, 33.282196, 33.288671, 33.260712]
    [exp] Throughput: 1209.0079251225122
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '738.5', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '738.5', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   832.07ms  253.54ms   1.66s    70.22%
        Req/Sec    74.76     44.48   250.00     61.50%
        Latency Distribution
        50%  829.51ms
        75%  986.60ms
        90%    1.15s
        99%    1.46s
        1625 requests in 3.03s, 0.94MB read
        Requests/sec:    536.82
        Transfer/sec:    318.21KB
        [run.sh] Speed is 536.82, duration is 111
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d111s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-96649df86-fjtxg         650m         46Mi
        service1-5f7b8d456b-kvltr        468m         15Mi
        service2-55c99d4dbc-xsgjj        500m         9Mi
        ubuntu-client-76886f6bbd-stjnv   19m          15Mi
        Running 2m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   801.06ms  230.11ms   2.47s    76.60%
        Req/Sec    80.94     39.50   280.00     63.60%
        Latency Distribution
        50%  773.96ms
        75%  903.47ms
        90%    1.07s
        99%    1.58s
        40000 requests in 1.85m, 23.16MB read
        Requests/sec:    360.36
        Transfer/sec:    213.61KB
        ------------------------------
        stop time: 62.734569
        stop time: 62.997657
        stop time: 62.793637
        stop time: 62.987563
        stop time: 63.187547
        stop time: 63.035322
        stop time: 63.405963
        stop time: 62.693670
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [62.734569, 62.997657, 62.793637, 62.987563, 63.187547, 63.035322, 63.405963, 62.69367]
    [exp] Throughput: 635.1273940908795
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '369.5', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '369.5', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   552.30ms  427.93ms   1.98s    58.55%
        Req/Sec   103.17     59.26   252.00     66.51%
        Latency Distribution
        50%  404.14ms
        75%  930.05ms
        90%    1.15s
        99%    1.44s
        2286 requests in 3.03s, 1.32MB read
        Socket errors: connect 0, read 0, write 0, timeout 1
        Requests/sec:    755.25
        Transfer/sec:    447.69KB
        [run.sh] Speed is 755.25, duration is 79
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d79s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-747fbdd744-5vfqt        1391m        48Mi
        service1-556b86bf9b-jbr2r        959m         16Mi
        service2-55c99d4dbc-krk48        1291m        10Mi
        ubuntu-client-76886f6bbd-gmwpc   29m          21Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   613.82ms  399.06ms   2.79s    65.51%
        Req/Sec   104.74     48.79   400.00     68.34%
        Latency Distribution
        50%  583.56ms
        75%  868.08ms
        90%    1.16s
        99%    1.66s
        40000 requests in 1.32m, 23.16MB read
        Requests/sec:    506.33
        Transfer/sec:    300.14KB
        ------------------------------
        stop time: 47.311756
        stop time: 47.612749
        stop time: 48.202072
        stop time: 48.742066
        stop time: 48.038268
        stop time: 48.821095
        stop time: 48.814214
        stop time: 49.001645
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [47.311756, 47.612749, 48.202072, 48.742066, 48.038268, 48.821095, 48.814214, 49.001645]
    [exp] Throughput: 827.8491239280179
[test.py] Baseline throughput:  1196.5460889473923
[test.py] Groundtruth:  [1208.4264710727723, 1209.0079251225122]
[test.py] Slowdown:  [635.1273940908795, 827.8491239280179]
[test.py] Predicted:  [1196.5554399583289, 1193.0404062466625]
[test.py] Error percentage:  [-0.9823544417977714, -1.3207125068457808]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1196.5460889473923
    Groundtruth: [1208.4264710727723, 1209.0079251225122]
    Slowdown:    [635.1273940908795, 827.8491239280179]
    Predicted:   [1196.5554399583289, 1193.0404062466625]
    Error Perc:  [-0.9823544417977714, -1.3207125068457808]
