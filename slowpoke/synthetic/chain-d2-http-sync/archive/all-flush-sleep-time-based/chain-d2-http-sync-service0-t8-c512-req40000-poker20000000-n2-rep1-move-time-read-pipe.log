[config.py] Random numbers for execution time: [447.2573382140748, 676.7004053709668, 876.5993667502922]
benchmark                        : synthetic
num_threads                      : 8
num_conns                        : 512
target_service                   : service0
request_type                     : chain-d2-http-sync
repetitions                      : 1
target_num_exp                   : 2
pre_run                          : False
num_req                          : 40000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 2
random_seed                      : 4446
request_ratio                    : {'service0': 1, 'service1': 1, 'service2': 1}
baseline_service_processing_time : {'service0': 876.6, 'service1': 676.7, 'service2': 447.26}
cpu_quota                        : {'service0': 2, 'service1': 2, 'service2': 2}
target_processing_time_range     : [0, 876.6]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 438]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0008766', 'PROCESSING_TIME_SERVICE1': '0.0006767', 'PROCESSING_TIME_SERVICE2': '0.00044726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-5f7bfff576-zq5s8 cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   307.77ms   73.55ms 819.46ms   83.68%
        Req/Sec   209.61     59.48   390.00     70.98%
        Latency Distribution
        50%  288.80ms
        75%  328.15ms
        90%  391.30ms
        99%  611.35ms
        4743 requests in 3.04s, 2.32MB read
        Requests/sec:   1562.15
        Transfer/sec:    782.60KB
        [run.sh] Speed is 1562.15, duration is 51
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d51s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-5f7bfff576-zq5s8        616m         47Mi
        service1-96558989f-c9wf9         521m         16Mi
        service2-b9b68cb9d-dt9mg         328m         9Mi
        ubuntu-client-76886f6bbd-hlzkk   28m          12Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   295.43ms   82.56ms   1.39s    87.17%
        Req/Sec   216.63     53.44   670.00     73.88%
        Latency Distribution
        50%  281.88ms
        75%  315.46ms
        90%  365.15ms
        99%  616.05ms
        40000 requests in 0.85m, 19.57MB read
        Requests/sec:    784.31
        Transfer/sec:    392.94KB
        ------------------------------
        stop time: 22.679643
        stop time: 22.638310
        stop time: 23.174116
        stop time: 23.420457
        stop time: 23.417054
        stop time: 23.364146
        stop time: 23.493638
        stop time: 23.419058
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
    [exp] Times: [22.679643, 22.63831, 23.174116, 23.420457, 23.417054, 23.364146, 23.493638, 23.419058]
    [exp] Throughput: 1724.078275696732
[test.py] Baseline throughput: 1724.078275696732
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0', 'PROCESSING_TIME_SERVICE1': '0.0006767', 'PROCESSING_TIME_SERVICE2': '0.00044726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-5f7bfff576-bsvr8 cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   249.33ms   49.44ms 594.15ms   78.31%
        Req/Sec   248.13     64.42   424.00     76.47%
        Latency Distribution
        50%  239.26ms
        75%  274.67ms
        90%  312.92ms
        99%  400.51ms
        5898 requests in 3.03s, 2.89MB read
        Requests/sec:   1949.23
        Transfer/sec:      0.95MB
        [run.sh] Speed is 1949.23, duration is 41
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d41s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-5f7bfff576-bsvr8        1005m        46Mi
        service1-96558989f-zvddl         1658m        19Mi
        service2-b9b68cb9d-snp6v         943m         12Mi
        ubuntu-client-76886f6bbd-r2bt4   72m          11Mi
        Running 41s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   251.58ms   46.36ms 640.13ms   80.57%
        Req/Sec   253.87     50.21   610.00     73.25%
        Latency Distribution
        50%  242.03ms
        75%  270.99ms
        90%  308.91ms
        99%  404.20ms
        40001 requests in 41.00s, 19.57MB read
        Requests/sec:    975.63
        Transfer/sec:    488.78KB
        ------------------------------
        stop time: 19.664063
        stop time: 19.682108
        stop time: 19.733784
        stop time: 19.890173
        stop time: 19.814249
        stop time: 19.879801
        stop time: 19.860577
        stop time: 19.889955
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
    [exp] Times: [19.664063, 19.682108, 19.733784, 19.890173, 19.814249, 19.879801, 19.860577, 19.889955]
    [exp] Throughput: 2020.0144292155694
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.000438', 'PROCESSING_TIME_SERVICE1': '0.0006767', 'PROCESSING_TIME_SERVICE2': '0.00044726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   248.69ms   57.65ms 673.56ms   85.31%
        Req/Sec   253.30     54.51   390.00     75.43%
        Latency Distribution
        50%  237.76ms
        75%  265.55ms
        90%  304.07ms
        99%  520.76ms
        5927 requests in 3.02s, 2.90MB read
        Requests/sec:   1960.43
        Transfer/sec:      0.96MB
        [run.sh] Speed is 1960.43, duration is 40
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d40s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 40s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   247.96ms   45.76ms 739.38ms   81.63%
        Req/Sec   258.29     46.42   545.00     73.82%
        Latency Distribution
        50%  239.71ms
        75%  265.49ms
        90%  302.22ms
        99%  399.09ms
        40000 requests in 40.00s, 19.57MB read
        Requests/sec:   1000.00
        Transfer/sec:    500.99KB
        ------------------------------
        stop time: 19.228574
        stop time: 19.205448
        stop time: 19.447370
        stop time: 19.579225
        stop time: 19.525246
        stop time: 19.549538
        stop time: 19.698890
        stop time: 19.678791
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [19.228574, 19.205448, 19.44737, 19.579225, 19.525246, 19.549538, 19.69889, 19.678791]
    [exp] Throughput: 2052.42559440907
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0008766', 'PROCESSING_TIME_SERVICE1': '0.0006767', 'PROCESSING_TIME_SERVICE2': '0.00044726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '438.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '43799990', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '438.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '43799990'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   467.12ms  116.33ms   1.23s    83.44%
        Req/Sec   129.69     45.73   252.00     73.59%
        Latency Distribution
        50%  457.08ms
        75%  497.12ms
        90%  564.76ms
        99%    1.00s
        3000 requests in 3.02s, 1.47MB read
        Requests/sec:    991.84
        Transfer/sec:    496.89KB
        [run.sh] Speed is 991.84, duration is 80
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d80s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-5f7bfff576-x98kq        378m         47Mi
        service1-bd85678b9-b5r7t         314m         19Mi
        service2-5bf68f6b4-z4tfc         215m         12Mi
        ubuntu-client-76886f6bbd-q9v6q   21m          11Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   464.54ms   65.31ms   1.11s    75.37%
        Req/Sec   137.62     40.58   282.00     68.73%
        Latency Distribution
        50%  459.39ms
        75%  496.02ms
        90%  542.47ms
        99%  625.06ms
        40003 requests in 1.33m, 19.57MB read
        Requests/sec:    500.04
        Transfer/sec:    250.52KB
        ------------------------------
        stop time: 36.153630
        stop time: 36.247000
        stop time: 36.328432
        stop time: 36.400700
        stop time: 36.515995
        stop time: 36.839446
        stop time: 36.849140
        stop time: 36.765092
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [36.15363, 36.247, 36.328432, 36.4007, 36.515995, 36.839446, 36.84914, 36.765092]
    [exp] Throughput: 1095.5173535340798
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0008766', 'PROCESSING_TIME_SERVICE1': '0.0006767', 'PROCESSING_TIME_SERVICE2': '0.00044726', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '219.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '21899990', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '219.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '21899990'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   364.09ms   74.63ms   1.00s    86.01%
        Req/Sec   173.93     57.03   320.00     73.57%
        Latency Distribution
        50%  350.83ms
        75%  383.24ms
        90%  430.42ms
        99%  706.20ms
        3971 requests in 3.03s, 1.94MB read
        Requests/sec:   1309.93
        Transfer/sec:    656.24KB
        [run.sh] Speed is 1309.93, duration is 61
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d61s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   355.67ms   62.22ms   1.29s    86.56%
        Req/Sec   179.54     42.88   383.00     71.33%
        Latency Distribution
        50%  351.44ms
        75%  379.12ms
        90%  410.30ms
        99%  489.96ms
        40000 requests in 1.02m, 19.57MB read
        Requests/sec:    655.74
        Transfer/sec:    328.52KB
        ------------------------------
        stop time: 27.709882
        stop time: 27.851283
        stop time: 27.953823
        stop time: 28.112188
        stop time: 28.123075
        stop time: 27.998751
        stop time: 28.014261
        stop time: 28.124066
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [27.709882, 27.851283, 27.953823, 28.112188, 28.123075, 27.998751, 28.014261, 28.124066]
    [exp] Throughput: 1429.2903552393534
[test.py] Baseline throughput:  1724.078275696732
[test.py] Groundtruth:  [2020.0144292155694, 2052.42559440907]
[test.py] Slowdown:  [1095.5173535340798, 1429.2903552393534]
[test.py] Predicted:  [2107.433884118862, 2081.824430780896]
[test.py] Error percentage:  [4.327664874019738, 1.432394745607832]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1724.078275696732
    Groundtruth: [2020.0144292155694, 2052.42559440907]
    Slowdown:    [1095.5173535340798, 1429.2903552393534]
    Predicted:   [2107.433884118862, 2081.824430780896]
    Error Perc:  [4.327664874019738, 1.432394745607832]
