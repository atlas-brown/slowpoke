[config.py] Random numbers for execution time: [738.7567487313221, 908.1430120173984, 1414.8986942771999]
benchmark                        : synthetic
num_threads                      : 8
num_conns                        : 512
target_service                   : service2
request_type                     : chain-d2-http-sync
repetitions                      : 1
target_num_exp                   : 2
pre_run                          : False
num_req                          : 40000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 2
random_seed                      : 22717
request_ratio                    : {'service0': 1, 'service1': 1, 'service2': 1}
baseline_service_processing_time : {'service0': 1414.9, 'service1': 908.14, 'service2': 1477.51}
cpu_quota                        : {'service0': 2, 'service1': 2, 'service2': 2}
target_processing_time_range     : [0, 1477.51]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 738]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   479.02ms  216.64ms   1.54s    79.05%
        Req/Sec   126.15     48.91   232.00     68.64%
        Latency Distribution
        50%  427.99ms
        75%  494.16ms
        90%  770.68ms
        99%    1.27s
        2988 requests in 3.02s, 1.46MB read
        Requests/sec:    989.37
        Transfer/sec:    495.65KB
        [run.sh] Speed is 989.37, duration is 80
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d80s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service2-b9b68cb9d-22jv2         579m         14Mi
        ubuntu-client-76886f6bbd-ds6hg   22m          0Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   443.69ms  115.59ms   2.38s    91.42%
        Req/Sec   144.40     38.01   363.00     72.71%
        Latency Distribution
        50%  430.62ms
        75%  467.00ms
        90%  515.94ms
        99%  740.36ms
        40000 requests in 1.33m, 19.57MB read
        Requests/sec:    500.00
        Transfer/sec:    250.49KB
        ------------------------------
        stop time: 34.233061
        stop time: 34.467125
        stop time: 34.602397
        stop time: 34.714439
        stop time: 35.025734
        stop time: 35.099730
        stop time: 35.129650
        stop time: 35.234707
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [34.233061, 34.467125, 34.602397, 34.714439, 35.025734, 35.09973, 35.12965, 35.234707]
    [exp] Throughput: 1148.984335727794
[test.py] Baseline throughput: 1148.984335727794
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.0', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-5f7bfff576-gs2jf cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   464.54ms  146.23ms   1.19s    82.28%
        Req/Sec   140.06     46.54   242.00     71.36%
        Latency Distribution
        50%  415.85ms
        75%  490.86ms
        90%  690.48ms
        99%  935.40ms
        3070 requests in 3.02s, 1.50MB read
        Requests/sec:   1016.08
        Transfer/sec:    509.20KB
        [run.sh] Speed is 1016.08, duration is 78
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d78s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   439.67ms  154.70ms   2.76s    88.66%
        Req/Sec   146.16     44.72   424.00     68.93%
        Latency Distribution
        50%  417.70ms
        75%  469.58ms
        90%  545.99ms
        99%  986.21ms
        40000 requests in 1.30m, 19.57MB read
        Requests/sec:    512.82
        Transfer/sec:    256.93KB
        ------------------------------
        stop time: 34.019747
        stop time: 33.707910
        stop time: 34.284982
        stop time: 34.733276
        stop time: 34.775966
        stop time: 34.771766
        stop time: 34.571953
        stop time: 34.561835
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
        > error: metrics not available yet
    [exp] Times: [34.019747, 33.70791, 34.284982, 34.733276, 34.775966, 34.771766, 34.571953, 34.561835]
    [exp] Throughput: 1161.8305198971916
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.000738', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '10', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-5f7bfff576-c4zg5 cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   471.33ms  156.21ms   1.13s    85.33%
        Req/Sec   129.84     54.31   242.00     70.00%
        Latency Distribution
        50%  421.87ms
        75%  489.08ms
        90%  698.76ms
        99%    1.07s
        2986 requests in 3.03s, 1.46MB read
        Requests/sec:    985.90
        Transfer/sec:    494.41KB
        [run.sh] Speed is 985.90, duration is 81
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d81s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-5f7bfff576-c4zg5        1938m        54Mi
        service1-96558989f-62snv         1449m        16Mi
        service2-b9b68cb9d-q9pgc         1068m        10Mi
        ubuntu-client-76886f6bbd-z2p69   57m          13Mi
        Running 1m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   441.91ms   97.52ms   1.56s    82.64%
        Req/Sec   145.10     41.75   460.00     67.44%
        Latency Distribution
        50%  425.47ms
        75%  473.52ms
        90%  541.23ms
        99%  795.28ms
        40001 requests in 1.35m, 19.57MB read
        Requests/sec:    493.84
        Transfer/sec:    247.40KB
        ------------------------------
        stop time: 34.337274
        stop time: 34.650955
        stop time: 34.746632
        stop time: 34.619055
        stop time: 34.822401
        stop time: 34.827646
        stop time: 34.827887
        stop time: 34.868738
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
    [exp] Times: [34.337274, 34.650955, 34.746632, 34.619055, 34.822401, 34.827646, 34.827887, 34.868738]
    [exp] Throughput: 1152.3202104274983
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '738.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '73849990', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '738.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '73849990', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-84bbf59477-bk2xw cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   808.19ms  328.51ms   1.92s    77.10%
        Req/Sec    73.30     47.32   212.00     67.55%
        Latency Distribution
        50%  788.13ms
        75%  871.23ms
        90%    1.13s
        99%    1.90s
        1615 requests in 3.02s, 811.56KB read
        Socket errors: connect 0, read 0, write 0, timeout 8
        Requests/sec:    534.51
        Transfer/sec:    268.60KB
        [run.sh] Speed is 534.51, duration is 149
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d149s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        service0-84bbf59477-bk2xw        68m          46Mi
        service1-5cbfb57c9d-zbhh5        122m         18Mi
        service2-b9b68cb9d-l8gqd         267m         14Mi
        ubuntu-client-76886f6bbd-v7mzs   15m          13Mi
        Running 2m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   811.49ms  137.54ms   3.16s    82.78%
        Req/Sec    80.61     44.79   303.00     63.86%
        Latency Distribution
        50%  802.27ms
        75%  841.12ms
        90%  944.86ms
        99%    1.15s
        40000 requests in 2.48m, 19.57MB read
        Requests/sec:    268.46
        Transfer/sec:    134.51KB
        ------------------------------
        stop time: 62.473484
        stop time: 63.191521
        stop time: 63.808045
        stop time: 63.669632
        stop time: 64.195275
        stop time: 64.325493
        stop time: 64.189170
        stop time: 63.903771
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
    [exp] Times: [62.473484, 63.191521, 63.808045, 63.669632, 64.195275, 64.325493, 64.18917, 63.903771]
    [exp] Throughput: 627.7508348100338
    [exp] Running (pre_run: False) workload synthetic/chain-d2-http-sync request with the following configuration: {'CLIENT_CPU_QUOTA': '2', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'PROCESSING_TIME_SERVICE0': '0.0014149', 'PROCESSING_TIME_SERVICE1': '0.00090814', 'PROCESSING_TIME_SERVICE2': '0.00147751', 'SLOWPOKE_DELAY_MICROS_SERVICE0': '369.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE0': '36949990', 'SLOWPOKE_DELAY_MICROS_SERVICE1': '369.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE1': '36949990', 'SLOWPOKE_DELAY_MICROS_SERVICE2': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SERVICE2': '10'}
    [exp] Executing cmd `bash run.sh synthetic chain-d2-http-sync 8 512 40000`:
        [run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        configmap "config-service0" deleted
        deployment.apps "service0" deleted
        service "service0" deleted
        configmap "config-service1" deleted
        deployment.apps "service1" deleted
        service "service1" deleted
        configmap "config-service2" deleted
        deployment.apps "service2" deleted
        service "service2" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        configmap/config-service0 created
        deployment.apps/service0 created
        service/service0 created
        configmap/config-service1 created
        deployment.apps/service1 created
        service/service1 created
        configmap/config-service2 created
        deployment.apps/service2 created
        service/service2 created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] service0-7685489fbf-8hv45 cannot connect to service1
        [run.sh] All pods can connect to all services
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
        Running 3s test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   647.07ms  327.30ms   1.97s    81.46%
        Req/Sec    93.50     40.58   210.00     66.06%
        Latency Distribution
        50%  548.82ms
        75%  727.92ms
        90%    1.11s
        99%    1.78s
        2120 requests in 3.02s, 1.04MB read
        Socket errors: connect 0, read 0, write 0, timeout 14
        Requests/sec:    702.20
        Transfer/sec:    352.11KB
        [run.sh] Speed is 702.20, duration is 113
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d113s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
        [run.sh] Checking the resource usage
        Running 2m test @ http://service0:80/endpoint1
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   622.22ms  135.95ms   2.31s    88.24%
        Req/Sec   103.37     43.54   343.00     69.36%
        Latency Distribution
        50%  611.09ms
        75%  650.77ms
        90%  736.88ms
        99%    1.13s
        40000 requests in 1.88m, 19.58MB read
        Requests/sec:    353.98
        Transfer/sec:    177.46KB
        ------------------------------
        stop time: 48.165012
        stop time: 48.519154
        stop time: 48.608127
        stop time: 48.632116
        stop time: 49.210213
        stop time: 49.319323
        stop time: 49.211422
        stop time: 49.199154
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
        > error: metrics not available yet
    [exp] Times: [48.165012, 48.519154, 48.608127, 48.632116, 49.210213, 49.319323, 49.211422, 49.199154]
    [exp] Throughput: 818.6979958715671
[test.py] Baseline throughput:  1148.984335727794
[test.py] Groundtruth:  [1161.8305198971916, 1152.3202104274983]
[test.py] Slowdown:  [627.7508348100338, 818.6979958715671]
[test.py] Predicted:  [1170.6398078093316, 1174.1269919096526]
[test.py] Error percentage:  [0.7582248668178837, 1.8924237624942994]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1148.984335727794
    Groundtruth: [1161.8305198971916, 1152.3202104274983]
    Slowdown:    [627.7508348100338, 818.6979958715671]
    Predicted:   [1170.6398078093316, 1174.1269919096526]
    Error Perc:  [0.7582248668178837, 1.8924237624942994]
