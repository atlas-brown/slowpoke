SLOWPOKE_DELAY_MICROS_SERVICE1=0.0
SLOWPOKE_DELAY_MICROS_SERVICE0=0.0
SLOWPOKE_DELAY_MICROS_SERVICE2=0.0
SLOWPOKE_POKER_BATCH_THRESHOLD=40000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0
PROCESSING_TIME_SERVICE2=0.001000
bash run.sh synthetic chain-d2-http-sync 8 512 40000
[run.sh] Running benchmark synthetic with request chain-d2-http-sync, thread 8, conn 512, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
configmap "config-service2" deleted
deployment.apps "service2" deleted
service "service2" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
configmap/config-service2 created
deployment.apps/service2 created
service/service2 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   298.22ms  239.10ms   1.36s    73.57%
    Req/Sec   201.44     56.60   363.00     71.49%
  Latency Distribution
     50%  254.04ms
     75%  411.09ms
     90%  615.64ms
     99%    1.12s 
  4751 requests in 3.03s, 3.24MB read
Requests/sec:   1566.25
Transfer/sec:      1.07MB
[run.sh] Speed is 1566.25, duration is 102
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d102s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-74c66db75c-9q29q        453m         74Mi            
service1-6bcd7fbfb7-zdmk2        991m         63Mi            
service2-6dc44f9545-qk47w        1265m        35Mi            
ubuntu-client-76886f6bbd-mqsp9   57m          19Mi            
Running 2m test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   296.39ms  377.17ms   3.32s    86.43%
    Req/Sec   211.51     59.23   560.00     70.87%
  Latency Distribution
     50%  154.39ms
     75%  354.95ms
     90%  855.79ms
     99%    1.68s 
  40000 requests in 1.70m, 27.31MB read
Requests/sec:    392.16
Transfer/sec:    274.20KB
------------------------------
stop time: 24.005240
stop time: 23.857265
stop time: 23.831106
stop time: 23.797416
stop time: 23.962172
stop time: 23.907323
stop time: 22.846682
stop time: 23.481184
[run.sh] Test finished with status 0

2000000 / (40000 / ( (24.005240 + 23.857265 + 23.831106 + 23.797416 + 23.962172 + 23.907323 + 22.846682 + 23.481184) / 8 ) ) = 1,185.552425