benchmark                        : hotel
num_threads                      : 8
num_conns                        : 512
target_service                   : profile
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'frontend': 1, 'profile': 0.8, 'rate': 0.8, 'reservation': 1, 'search': 0.8, 'user': 0.198478617}
baseline_service_processing_time : {'frontend': 0, 'profile': 1000, 'rate': 0, 'reservation': 0, 'search': 0, 'user': 0}
cpu_quota                        : {'frontend': 2, 'profile': 2, 'rate': 2, 'reservation': 2, 'search': 2, 'user': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-btr29:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:10:40.318839Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   276.87ms  101.30ms 755.52ms   68.60%
        Req/Sec   212.06     59.38   343.00     73.28%
        Latency Distribution
        50%  270.02ms
        75%  341.56ms
        90%  410.70ms
        99%  542.09ms
        4926 requests in 3.03s, 375.22KB read
        Requests/sec:   1627.41
        Transfer/sec:    123.96KB
        [run.sh] Speed is 1627.41, duration is 46
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d46s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-hr4ct        875m         54Mi
        profile-6cbdc45774-rlf5g         1435m        416Mi
        rate-5bdc49d87c-qdxrq            119m         179Mi
        reservation-59ffc489d6-89lw4     10m          183Mi
        search-5b8d7c54c4-6m4bl          531m         80Mi
        ubuntu-client-76886f6bbd-btr29   111m         58Mi
        user-5b5db6d7bb-29rlk            6m           10Mi
        Running 46s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   286.77ms  110.55ms   1.44s    70.36%
        Req/Sec   222.95     53.22   404.00     70.48%
        Latency Distribution
        50%  282.20ms
        75%  352.68ms
        90%  425.97ms
        99%  579.51ms
        50000 requests in 46.00s, 3.72MB read
        Requests/sec:   1086.95
        Transfer/sec:     82.80KB
        ------------------------------
        stop time: 28.052502
        stop time: 28.212688
        stop time: 28.165370
        stop time: 28.278289
        stop time: 28.119122
        stop time: 28.170957
        stop time: 28.163782
        stop time: 28.145281
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [28.052502, 28.212688, 28.16537, 28.278289, 28.119122, 28.170957, 28.163782, 28.145281]
    [exp] Throughput: 1775.3475951947041
[test.py] Baseline throughput: 1775.3475951947041
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '0', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-6c66k:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:12:29.569423Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   271.56ms  101.62ms 708.27ms   69.41%
        Req/Sec   212.55     61.44   343.00     71.12%
        Latency Distribution
        50%  266.01ms
        75%  335.22ms
        90%  404.47ms
        99%  535.72ms
        4956 requests in 3.03s, 377.51KB read
        Requests/sec:   1637.39
        Transfer/sec:    124.72KB
        [run.sh] Speed is 1637.39, duration is 45
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d45s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-slwlv        1868m        50Mi
        profile-74564cf6bf-hvktt         379m         315Mi
        rate-5bdc49d87c-bnc85            304m         77Mi
        reservation-59ffc489d6-btplm     312m         90Mi
        search-5b8d7c54c4-2v84d          606m         77Mi
        ubuntu-client-76886f6bbd-6c66k   870m         59Mi
        user-5b5db6d7bb-r9frj            83m          10Mi
        Running 45s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   724.35ms    1.02s   11.54s    86.18%
        Req/Sec   220.71     67.91   484.00     72.59%
        Latency Distribution
        50%  303.93ms
        75%  478.11ms
        90%    2.43s
        99%    4.29s
        50000 requests in 45.00s, 3.72MB read
        Requests/sec:   1111.11
        Transfer/sec:     84.64KB
        ------------------------------
        stop time: 38.893681
        stop time: 39.132220
        stop time: 39.225977
        stop time: 38.793222
        stop time: 38.974062
        stop time: 39.125396
        stop time: 39.295437
        stop time: 39.305555
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [38.893681, 39.13222, 39.225977, 38.793222, 38.974062, 39.125396, 39.295437, 39.305555]
    [exp] Throughput: 1278.99501687554
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '39999990', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '39999990', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '39999990', 'SLOWPOKE_DELAY_MICROS_SEARCH': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '39999990', 'SLOWPOKE_DELAY_MICROS_USER': '2015.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '39993431'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-2x6sr:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:14:17.875532Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   434.50ms  146.64ms   1.10s    69.02%
        Req/Sec   127.11     44.00   280.00     72.88%
        Latency Distribution
        50%  424.40ms
        75%  527.16ms
        90%  631.85ms
        99%  818.09ms
        2999 requests in 3.03s, 228.44KB read
        Requests/sec:    990.82
        Transfer/sec:     75.47KB
        [run.sh] Speed is 990.82, duration is 75
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d75s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        Running 1m test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.02s     1.57s    9.83s    89.92%
        Req/Sec   134.57     43.01   303.00     68.59%
        Latency Distribution
        50%  490.67ms
        75%  651.12ms
        90%    2.61s
        99%    8.11s
        50000 requests in 1.25m, 3.72MB read
        Requests/sec:    666.67
        Transfer/sec:     50.78KB
        ------------------------------
        stop time: 59.855839
        stop time: 60.023761
        stop time: 60.202858
        stop time: 60.264058
        stop time: 59.991906
        stop time: 60.344083
        stop time: 60.162420
        stop time: 60.245125
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [59.855839, 60.023761, 60.202858, 60.264058, 59.991906, 60.344083, 60.16242, 60.245125]
    [exp] Throughput: 831.4451733100694
[test.py] Finished running 0th optmization experiment: groundtruth->1278.99501687554, slowdown->831.4451733100694, predicted->1245.7564474514234, err->-2.5988036689396306
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '500', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-9rb58:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:16:37.240421Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   272.37ms  100.06ms 737.03ms   69.03%
        Req/Sec   214.32     61.27   363.00     71.98%
        Latency Distribution
        50%  263.84ms
        75%  333.70ms
        90%  405.72ms
        99%  540.77ms
        4996 requests in 3.03s, 380.55KB read
        Requests/sec:   1651.36
        Transfer/sec:    125.79KB
        [run.sh] Speed is 1651.36, duration is 45
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d45s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-7fhb4        1870m        53Mi
        profile-66645dc6d6-2lqkz         358m         315Mi
        rate-5bdc49d87c-b9kgp            268m         166Mi
        reservation-59ffc489d6-52mwz     176m         177Mi
        search-5b8d7c54c4-xchhr          242m         74Mi
        ubuntu-client-76886f6bbd-9rb58   474m         58Mi
        user-5b5db6d7bb-5v5tv            45m          11Mi
        Running 45s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   391.47ms  486.73ms   6.05s    94.18%
        Req/Sec   223.37     54.98   380.00     69.71%
        Latency Distribution
        50%  282.01ms
        75%  364.60ms
        90%  482.65ms
        99%    3.19s
        50000 requests in 45.00s, 3.72MB read
        Requests/sec:   1111.11
        Transfer/sec:     84.64KB
        ------------------------------
        stop time: 31.057401
        stop time: 30.662340
        stop time: 30.987497
        stop time: 31.101344
        stop time: 30.964544
        stop time: 31.039766
        stop time: 30.944082
        stop time: 30.974708
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [31.057401, 30.66234, 30.987497, 31.101344, 30.964544, 31.039766, 30.944082, 30.974708]
    [exp] Throughput: 1614.650160087316
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '19999990', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '19999990', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '19999990', 'SLOWPOKE_DELAY_MICROS_SEARCH': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '19999990', 'SLOWPOKE_DELAY_MICROS_USER': '1007.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '19996710'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-skn6r:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:18:25.663595Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   346.93ms  117.53ms 863.93ms   70.56%
        Req/Sec   158.52     57.31   320.00     69.83%
        Latency Distribution
        50%  337.46ms
        75%  415.12ms
        90%  499.26ms
        99%  656.62ms
        3699 requests in 3.03s, 281.76KB read
        Requests/sec:   1222.75
        Transfer/sec:     93.14KB
        [run.sh] Speed is 1222.75, duration is 61
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d61s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-59748868b9-sgncd        1417m        53Mi
        profile-6cbdc45774-4x454         1339m        306Mi
        rate-5d6687d8d4-66pt2            226m         79Mi
        reservation-58ff7cf878-c2nnm     225m         94Mi
        search-665dc89767-nkqfd          394m         79Mi
        ubuntu-client-76886f6bbd-skn6r   696m         63Mi
        user-5445f99994-v79l6            67m          10Mi
        Running 1m test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.09s     1.90s   11.19s    88.83%
        Req/Sec   168.83     53.75   420.00     70.93%
        Latency Distribution
        50%  403.26ms
        75%  550.91ms
        90%    3.32s
        99%    8.99s
        50000 requests in 1.02m, 3.72MB read
        Requests/sec:    819.67
        Transfer/sec:     62.44KB
        ------------------------------
        stop time: 49.445670
        stop time: 49.646753
        stop time: 49.405680
        stop time: 49.740192
        stop time: 49.688739
        stop time: 49.688940
        stop time: 49.674881
        stop time: 49.440641
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [49.44567, 49.646753, 49.40568, 49.740192, 49.688739, 49.68894, 49.674881, 49.440641]
    [exp] Throughput: 1008.2385795757441
[test.py] Finished running 1th optmization experiment: groundtruth->1614.650160087316, slowdown->1008.2385795757441, predicted->1262.8993486647125, err->-21.784955039646587
[test.py] Baseline throughput:  1775.3475951947041
[test.py] Groundtruth:  [1278.99501687554, 1614.650160087316]
[test.py] Slowdown:  [831.4451733100694, 1008.2385795757441]
[test.py] Predicted:  [1245.7564474514234, 1262.8993486647125]
[test.py] Error percentage:  [-2.5988036689396306, -21.784955039646587]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-4dk4q:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:20:30.055233Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   272.51ms  104.75ms 637.98ms   69.04%
        Req/Sec   211.24     66.41   350.00     73.71%
        Latency Distribution
        50%  275.59ms
        75%  340.14ms
        90%  403.11ms
        99%  515.81ms
        4919 requests in 3.03s, 374.69KB read
        Requests/sec:   1624.00
        Transfer/sec:    123.70KB
        [run.sh] Speed is 1624.00, duration is 46
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d46s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-2dbc6        1842m        54Mi
        profile-6cbdc45774-wvl8d         1758m        327Mi
        rate-5bdc49d87c-2kzpc            276m         185Mi
        reservation-59ffc489d6-2h25w     312m         216Mi
        search-5b8d7c54c4-tqxvd          580m         78Mi
        ubuntu-client-76886f6bbd-4dk4q   865m         60Mi
        user-5b5db6d7bb-925t9            73m          11Mi
        Running 46s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   991.52ms    1.52s   19.86s    85.67%
        Req/Sec   214.68     65.62   410.00     76.42%
        Latency Distribution
        50%  330.94ms
        75%  745.44ms
        90%    3.15s
        99%    7.56s
        50000 requests in 46.00s, 3.72MB read
        Requests/sec:   1086.95
        Transfer/sec:     82.80KB
        ------------------------------
        stop time: 44.707869
        stop time: 44.663954
        stop time: 44.034609
        stop time: 44.613492
        stop time: 44.752797
        stop time: 44.782885
        stop time: 44.880939
        stop time: 44.633222
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [44.707869, 44.663954, 44.034609, 44.613492, 44.752797, 44.782885, 44.880939, 44.633222]
    [exp] Throughput: 1120.2292576061193
[test.py] Baseline throughput: 1120.2292576061193
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '0', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-5bxsm:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:22:20.602365Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   259.07ms  106.88ms 893.74ms   70.29%
        Req/Sec   212.57     70.02   414.00     71.67%
        Latency Distribution
        50%  245.23ms
        75%  322.07ms
        90%  399.65ms
        99%  559.51ms
        4995 requests in 3.03s, 380.48KB read
        Requests/sec:   1650.60
        Transfer/sec:    125.73KB
        [run.sh] Speed is 1650.60, duration is 45
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d45s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        Running 45s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   286.59ms  122.45ms   3.45s    76.71%
        Req/Sec   224.72     56.56   400.00     71.21%
        Latency Distribution
        50%  275.94ms
        75%  346.15ms
        90%  423.57ms
        99%  599.43ms
        50000 requests in 45.00s, 3.72MB read
        Requests/sec:   1111.11
        Transfer/sec:     84.64KB
        ------------------------------
        stop time: 28.094223
        stop time: 27.860531
        stop time: 27.999238
        stop time: 27.935499
        stop time: 28.116566
        stop time: 28.033805
        stop time: 28.117752
        stop time: 27.920375
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [28.094223, 27.860531, 27.999238, 27.935499, 28.116566, 28.033805, 28.117752, 27.920375]
    [exp] Throughput: 1785.0927785682688
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '39999990', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '39999990', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '39999990', 'SLOWPOKE_DELAY_MICROS_SEARCH': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '39999990', 'SLOWPOKE_DELAY_MICROS_USER': '2015.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '39993431'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-tmv25:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T04:24:09.914507Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   418.58ms  139.26ms 836.03ms   65.79%
        Req/Sec   128.62     44.12   250.00     73.71%
        Latency Distribution
        50%  415.11ms
        75%  508.99ms
        90%  605.27ms
        99%  743.93ms
        3005 requests in 3.03s, 228.90KB read
        Requests/sec:    990.95
        Transfer/sec:     75.48KB
        [run.sh] Speed is 990.95, duration is 75
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d75s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
