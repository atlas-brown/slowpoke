benchmark                        : hotel
num_threads                      : 8
num_conns                        : 1024
target_service                   : profile
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'frontend': 1, 'profile': 0.8, 'rate': 0.8, 'reservation': 1, 'search': 0.8, 'user': 0.198478617}
baseline_service_processing_time : {'frontend': 0, 'profile': 1000, 'rate': 0, 'reservation': 0, 'search': 0, 'user': 0}
cpu_quota                        : {'frontend': 2, 'profile': 2, 'rate': 2, 'reservation': 2, 'search': 2, 'user': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-wqnmw:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T05:03:08.898201Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   419.45ms  190.56ms   1.25s    67.68%
        Req/Sec   207.18     88.54   480.00     69.40%
        Latency Distribution
        50%  414.99ms
        75%  551.27ms
        90%  663.12ms
        99%  899.77ms
        4821 requests in 3.03s, 367.22KB read
        Requests/sec:   1591.05
        Transfer/sec:    121.19KB
        [run.sh] Speed is 1591.05, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   554.36ms  184.09ms   1.41s    70.35%
        Req/Sec   226.14     65.40   470.00     70.29%
        Latency Distribution
        50%  588.93ms
        75%  672.63ms
        90%  748.72ms
        99%  929.57ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 11.039493
        stop time: 11.021688
        stop time: 11.185359
        stop time: 11.239495
        stop time: 11.127519
        stop time: 11.300875
        stop time: 11.357638
        stop time: 11.332191
        [run.sh] Checking the resource usage
        NAME                       CPU(cores)   MEMORY(bytes)
        profile-6cbdc45774-q2rkq   3m           310Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.039493, 11.021688, 11.185359, 11.239495, 11.127519, 11.300875, 11.357638, 11.332191]
    [exp] Throughput: 1785.6294284586345
[test.py] Baseline throughput: 1785.6294284586345
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '0', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-gvksh:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T05:04:41.583391Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   463.12ms  147.21ms 970.10ms   69.68%
        Req/Sec   218.97     78.19   400.00     68.10%
        Latency Distribution
        50%  457.42ms
        75%  559.97ms
        90%  650.52ms
        99%  828.56ms
        5089 requests in 3.03s, 387.64KB read
        Requests/sec:   1677.14
        Transfer/sec:    127.75KB
        [run.sh] Speed is 1677.14, duration is 17
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d17s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 17s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   503.02ms  128.00ms   1.08s    69.96%
        Req/Sec   241.80     77.19   585.00     70.60%
        Latency Distribution
        50%  502.85ms
        75%  586.47ms
        90%  662.34ms
        99%  822.67ms
        20000 requests in 17.00s, 1.49MB read
        Requests/sec:   1176.46
        Transfer/sec:     89.61KB
        ------------------------------
        stop time: 9.959812
        stop time: 9.944592
        stop time: 10.233043
        stop time: 10.401701
        stop time: 10.747520
        stop time: 10.717102
        stop time: 10.754689
        stop time: 10.774891
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-9qk6g        98m          80Mi
        profile-74564cf6bf-4mtkb         57m          315Mi
        rate-5bdc49d87c-46s75            55m          176Mi
        reservation-59ffc489d6-d62hh     240m         178Mi
        search-5b8d7c54c4-2dtzp          425m         79Mi
        ubuntu-client-76886f6bbd-gvksh   95m          102Mi
        user-5b5db6d7bb-h4rfz            66m          11Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [9.959812, 9.944592, 10.233043, 10.401701, 10.74752, 10.717102, 10.754689, 10.774891]
    [exp] Throughput: 1915.4026505581305
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '39999990', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '39999990', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '39999990', 'SLOWPOKE_DELAY_MICROS_SEARCH': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '39999990', 'SLOWPOKE_DELAY_MICROS_USER': '2015.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '39993431'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-jnhv5:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T05:06:14.279220Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   622.46ms  299.22ms   1.63s    65.26%
        Req/Sec   122.29     57.37   300.00     66.24%
        Latency Distribution
        50%  582.75ms
        75%  850.55ms
        90%    1.02s
        99%    1.35s
        2899 requests in 3.03s, 220.82KB read
        Requests/sec:    957.88
        Transfer/sec:     72.96KB
        [run.sh] Speed is 957.88, duration is 31
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d31s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        Running 31s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   907.88ms  196.93ms   1.61s    74.53%
        Req/Sec   135.54     53.80   400.00     70.67%
        Latency Distribution
        50%  924.31ms
        75%    1.03s
        90%    1.13s
        99%    1.33s
        20000 requests in 31.00s, 1.49MB read
        Requests/sec:    645.16
        Transfer/sec:     49.14KB
        ------------------------------
        stop time: 17.776514
        stop time: 17.992669
        stop time: 18.228294
        stop time: 18.639493
        stop time: 18.874708
        stop time: 18.875690
        stop time: 19.187278
        stop time: 19.193974
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [17.776514, 17.992669, 18.228294, 18.639493, 18.874708, 18.87569, 19.187278, 19.193974]
    [exp] Throughput: 1075.4956253543255
[test.py] Finished running 0th optmization experiment: groundtruth->1915.4026505581305, slowdown->1075.4956253543255, predicted->1887.4909135007745, err->-1.457225562950058
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '500', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-bprjx:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T05:07:48.619437Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   409.61ms  143.02ms 937.04ms   69.54%
        Req/Sec   207.06     91.69   470.00     67.24%
        Latency Distribution
        50%  405.54ms
        75%  497.03ms
        90%  588.09ms
        99%  821.97ms
        4810 requests in 3.03s, 366.39KB read
        Requests/sec:   1586.57
        Transfer/sec:    120.85KB
        [run.sh] Speed is 1586.57, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   534.62ms  133.72ms   1.21s    72.60%
        Req/Sec   231.42     73.73   606.00     74.36%
        Latency Distribution
        50%  536.05ms
        75%  618.17ms
        90%  696.36ms
        99%  857.51ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 10.489234
        stop time: 10.566228
        stop time: 10.804110
        stop time: 10.900027
        stop time: 11.106619
        stop time: 11.342175
        stop time: 11.404411
        stop time: 11.085717
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-7d699cbfd9-t8l9p        626m         69Mi
        profile-66645dc6d6-75prr         348m         349Mi
        rate-5bdc49d87c-4mb56            94m          144Mi
        reservation-59ffc489d6-2jvhr     98m          155Mi
        search-5b8d7c54c4-vqsfm          49m          197Mi
        ubuntu-client-76886f6bbd-bprjx   305m         89Mi
        user-5b5db6d7bb-58s9p            13m          10Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.489234, 10.566228, 10.80411, 10.900027, 11.106619, 11.342175, 11.404411, 11.085717]
    [exp] Throughput: 1824.4321360904137
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '19999990', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '19999990', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '19999990', 'SLOWPOKE_DELAY_MICROS_SEARCH': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '19999990', 'SLOWPOKE_DELAY_MICROS_USER': '1007.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '19996710'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-vvhcb:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-04-07T05:09:21.269287Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   459.19ms  180.93ms   1.12s    63.42%
        Req/Sec   159.06     78.98   393.00     63.64%
        Latency Distribution
        50%  454.94ms
        75%  600.84ms
        90%  704.37ms
        99%  851.97ms
        3699 requests in 3.03s, 281.76KB read
        Requests/sec:   1221.46
        Transfer/sec:     93.04KB
        [run.sh] Speed is 1221.46, duration is 24
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d24s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 24s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   738.81ms  177.98ms   1.68s    72.60%
        Req/Sec   170.42     60.96   470.00     72.55%
        Latency Distribution
        50%  731.51ms
        75%  842.35ms
        90%  958.13ms
        99%    1.20s
        20000 requests in 24.00s, 1.49MB read
        Requests/sec:    833.33
        Transfer/sec:     63.48KB
        ------------------------------
        stop time: 14.462662
        stop time: 14.694454
        stop time: 14.808651
        stop time: 14.778544
        stop time: 15.070476
        stop time: 14.852313
        stop time: 14.944792
        stop time: 15.119574
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-59748868b9-f842d        447m         75Mi
        profile-6cbdc45774-94qfw         611m         322Mi
        rate-5d6687d8d4-vqn2x            29m          182Mi
        reservation-58ff7cf878-8snzc     120m         178Mi
        search-665dc89767-q2w4b          242m         82Mi
        ubuntu-client-76886f6bbd-vvhcb   210m         69Mi
        user-5445f99994-xjc4x            37m          11Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [14.462662, 14.694454, 14.808651, 14.778544, 15.070476, 14.852313, 14.944792, 15.119574]
    [exp] Throughput: 1347.5787454692088
[test.py] Finished running 1th optmization experiment: groundtruth->1824.4321360904137, slowdown->1347.5787454692088, predicted->1844.774536613967, err->1.1149990246907842
[test.py] Baseline throughput:  1785.6294284586345
[test.py] Groundtruth:  [1915.4026505581305, 1824.4321360904137]
[test.py] Slowdown:  [1075.4956253543255, 1347.5787454692088]
[test.py] Predicted:  [1887.4909135007745, 1844.774536613967]
[test.py] Error percentage:  [-1.457225562950058, 1.1149990246907842]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_PROFILE': '1000', 'SLOWPOKE_PROCESSING_MICROS_RATE': '0', 'SLOWPOKE_PROCESSING_MICROS_RESERVATION': '0', 'SLOWPOKE_PROCESSING_MICROS_SEARCH': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PROFILE': '10', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RATE': '10', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_RESERVATION': '10', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_SEARCH': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10'}
    [exp] Executing cmd `bash run.sh hotel mix 8 1024 20000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
