benchmark                        : hotel
num_threads                      : 8
num_conns                        : 512
target_service                   : profile
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 8
random_seed                      : 1234
request_ratio                    : {'frontend': 1, 'profile': 0.8, 'rate': 0.8, 'reservation': 1, 'search': 0.8, 'user': 0.198478617}
baseline_service_processing_time : {'frontend': 0, 'profile': 1000, 'rate': 0, 'reservation': 0, 'search': 0, 'user': 0}
cpu_quota                        : {'frontend': 2, 'profile': 2, 'rate': 2, 'reservation': 2, 'search': 2, 'user': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '500.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-4jncc:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:01:49.462866Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   261.19ms  116.98ms 642.91ms   66.99%
        Req/Sec   214.29     73.10   434.00     70.46%
        Latency Distribution
        50%  281.08ms
        75%  348.17ms
        90%  391.14ms
        99%  484.29ms
        5068 requests in 3.02s, 386.04KB read
        Requests/sec:   1678.50
        Transfer/sec:    127.85KB
        [run.sh] Speed is 1678.50, duration is 44
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d44s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-5bdf5f9485-kxm22        3m           49Mi
        profile-c788f9d4b-s625z          2m           378Mi
        rate-5c87b596bf-xsf9f            0m           137Mi
        reservation-d894fc7d6-4kwmp      72m          144Mi
        search-86dd46855b-5cl8j          3m           169Mi
        ubuntu-client-76886f6bbd-4jncc   8m           41Mi
        user-7fdf495754-c5ntp            3m           8Mi
        Running 44s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   270.92ms  115.10ms 723.99ms   70.75%
        Req/Sec   234.58     53.63   490.00     68.54%
        Latency Distribution
        50%  297.71ms
        75%  344.52ms
        90%  388.69ms
        99%  478.76ms
        50000 requests in 44.00s, 3.72MB read
        Requests/sec:   1136.36
        Transfer/sec:     86.56KB
        ------------------------------
        stop time: 26.536059
        stop time: 26.819698
        stop time: 26.805580
        stop time: 26.560611
        stop time: 26.628196
        stop time: 27.029790
        stop time: 27.051236
        stop time: 26.624756
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [26.536059, 26.819698, 26.80558, 26.560611, 26.628196, 27.02979, 27.051236, 26.624756]
    [exp] Throughput: 1868.670526785603
[test.py] Baseline throughput: 1868.670526785603
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-6srwv:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:03:36.556829Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   233.80ms  107.42ms 743.53ms   68.16%
        Req/Sec   215.21     76.59   484.00     71.97%
        Latency Distribution
        50%  223.23ms
        75%  299.63ms
        90%  382.28ms
        99%  519.47ms
        5129 requests in 3.03s, 390.69KB read
        Requests/sec:   1693.50
        Transfer/sec:    129.00KB
        [run.sh] Speed is 1693.50, duration is 44
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d44s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-5bdf5f9485-29zw7        598m         50Mi
        profile-5b5b8849c5-6b5xv         154m         292Mi
        rate-5c87b596bf-lzbxh            9m           153Mi
        reservation-d894fc7d6-wnk99      88m          163Mi
        search-86dd46855b-dh7gg          134m         192Mi
        ubuntu-client-76886f6bbd-6srwv   257m         57Mi
        user-7fdf495754-zw6cd            12m          8Mi
        Running 44s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   263.46ms  124.64ms   1.47s    77.98%
        Req/Sec   243.30     52.88   450.00     69.15%
        Latency Distribution
        50%  264.08ms
        75%  315.36ms
        90%  383.72ms
        99%  597.74ms
        50001 requests in 44.00s, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 31
        Requests/sec:   1136.38
        Transfer/sec:     86.56KB
        ------------------------------
        stop time: 25.880706
        stop time: 25.817739
        stop time: 25.827719
        stop time: 25.577862
        stop time: 25.682767
        stop time: 25.787244
        stop time: 25.947767
        stop time: 25.978559
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [25.880706, 25.817739, 25.827719, 25.577862, 25.682767, 25.787244, 25.947767, 25.978559]
    [exp] Throughput: 1937.0425997749944
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '250.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-kjrhz:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:05:24.817746Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   249.20ms   95.46ms 717.75ms   69.64%
        Req/Sec   226.62     68.59   383.00     69.83%
        Latency Distribution
        50%  243.29ms
        75%  309.51ms
        90%  371.80ms
        99%  495.92ms
        5281 requests in 3.02s, 402.26KB read
        Requests/sec:   1747.86
        Transfer/sec:    133.14KB
        [run.sh] Speed is 1747.86, duration is 42
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d42s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-5bdf5f9485-4lp9s        1443m        49Mi
        profile-74d89894c4-n4hlj         360m         309Mi
        rate-5c87b596bf-8zfs4            243m         183Mi
        reservation-d894fc7d6-slgx2      155m         200Mi
        search-86dd46855b-dsvcq          348m         79Mi
        ubuntu-client-76886f6bbd-kjrhz   841m         59Mi
        user-7fdf495754-nn97p            93m          10Mi
        Running 42s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   266.78ms  112.29ms   1.43s    74.16%
        Req/Sec   240.23     53.31   430.00     72.12%
        Latency Distribution
        50%  270.77ms
        75%  325.73ms
        90%  388.44ms
        99%  533.79ms
        50000 requests in 42.00s, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 10
        Requests/sec:   1190.47
        Transfer/sec:     90.68KB
        ------------------------------
        stop time: 26.052232
        stop time: 26.179015
        stop time: 26.242609
        stop time: 26.274674
        stop time: 26.148827
        stop time: 26.309872
        stop time: 26.185416
        stop time: 25.737714
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [26.052232, 26.179015, 26.242609, 26.274674, 26.148827, 26.309872, 26.185416, 25.737714]
    [exp] Throughput: 1912.6826057808278
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '400.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '500.0', 'SLOWPOKE_DELAY_MICROS_RATE': '500.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '400.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '500.0', 'SLOWPOKE_DELAY_MICROS_USER': '2015.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-97chb:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:07:10.089770Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   396.14ms  155.41ms   1.14s    68.77%
        Req/Sec   124.98     57.50   292.00     67.24%
        Latency Distribution
        50%  389.60ms
        75%  486.14ms
        90%  594.89ms
        99%  822.18ms
        2911 requests in 3.03s, 221.74KB read
        Requests/sec:    961.65
        Transfer/sec:     73.25KB
        [run.sh] Speed is 961.65, duration is 77
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d77s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-779cd84457-rdpc7        1082m        53Mi
        profile-c788f9d4b-7cmc9          271m         305Mi
        rate-5f87b58cbd-9zkgd            129m         190Mi
        reservation-87ccb7774-l5wnc      140m         213Mi
        search-5d7fd95dfc-p9gzz          231m         80Mi
        ubuntu-client-76886f6bbd-97chb   554m         61Mi
        user-7898d4878b-kc7gb            47m          9Mi
        Running 1m test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   453.19ms  153.21ms   1.29s    68.33%
        Req/Sec   141.68     53.99   343.00     69.49%
        Latency Distribution
        50%  448.28ms
        75%  550.87ms
        90%  649.61ms
        99%  836.09ms
        50000 requests in 1.28m, 3.72MB read
        Requests/sec:    649.35
        Transfer/sec:     49.46KB
        ------------------------------
        stop time: 44.373906
        stop time: 44.366523
        stop time: 44.565006
        stop time: 44.400520
        stop time: 44.594029
        stop time: 44.659992
        stop time: 44.564257
        stop time: 44.341279
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [44.373906, 44.366523, 44.565006, 44.40052, 44.594029, 44.659992, 44.564257, 44.341279]
    [exp] Throughput: 1124.0201326393214
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '200.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '500.0', 'SLOWPOKE_DELAY_MICROS_RATE': '250.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '200.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '250.0', 'SLOWPOKE_DELAY_MICROS_USER': '1007.5'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-rbp76:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:09:30.353874Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   341.67ms  134.07ms 803.78ms   69.15%
        Req/Sec   166.50     68.45   340.00     71.55%
        Latency Distribution
        50%  342.08ms
        75%  429.57ms
        90%  506.48ms
        99%  646.44ms
        3870 requests in 3.03s, 294.79KB read
        Requests/sec:   1275.90
        Transfer/sec:     97.19KB
        [run.sh] Speed is 1275.90, duration is 58
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d58s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-695498bd4c-td6fx        472m         54Mi
        profile-c788f9d4b-j4gmj          119m         310Mi
        rate-7fcdc66796-894lx            135m         150Mi
        reservation-86d4f575d8-j2m9s     1m           172Mi
        search-699d7c5557-2ng9g          102m         80Mi
        ubuntu-client-76886f6bbd-rbp76   310m         58Mi
        user-6dc7c5567-vxx98             38m          10Mi
        Running 1m test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   362.85ms  134.87ms   1.06s    69.59%
        Req/Sec   176.75     58.45   390.00     69.14%
        Latency Distribution
        50%  366.16ms
        75%  447.17ms
        90%  531.31ms
        99%  694.77ms
        50000 requests in 0.97m, 3.72MB read
        Requests/sec:    862.07
        Transfer/sec:     65.67KB
        ------------------------------
        stop time: 35.623735
        stop time: 35.484020
        stop time: 35.698611
        stop time: 35.615764
        stop time: 35.697786
        stop time: 35.509610
        stop time: 35.757960
        stop time: 35.606267
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [35.623735, 35.48402, 35.698611, 35.615764, 35.697786, 35.50961, 35.75796, 35.606267]
    [exp] Throughput: 1403.5395365315255
[test.py] Baseline throughput:  1868.670526785603
[test.py] Groundtruth:  [1937.0425997749944, 1912.6826057808278]
[test.py] Slowdown:  [1124.0201326393214, 1403.5395365315255]
[test.py] Predicted:  [2042.21762124207, 1951.2789738524377]
[test.py] Error percentage:  [5.429670027870974, 2.017918077727982]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '500.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-rlz44:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:11:31.478580Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   253.05ms  116.19ms 548.86ms   65.31%
        Req/Sec   223.86     71.83   424.00     70.69%
        Latency Distribution
        50%  266.50ms
        75%  341.36ms
        90%  394.06ms
        99%  473.68ms
        5224 requests in 3.03s, 397.92KB read
        Requests/sec:   1726.19
        Transfer/sec:    131.49KB
        [run.sh] Speed is 1726.19, duration is 43
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d43s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-5bdf5f9485-svv8q        576m         48Mi
        profile-c788f9d4b-k76b2          129m         338Mi
        rate-5c87b596bf-krcdn            172m         162Mi
        reservation-d894fc7d6-d4c6j      9m           171Mi
        search-86dd46855b-bpz6f          122m         79Mi
        ubuntu-client-76886f6bbd-rlz44   392m         60Mi
        user-7fdf495754-k46p5            45m          8Mi
        Running 43s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   274.25ms  127.38ms   1.45s    73.69%
        Req/Sec   232.88     52.72   420.00     68.70%
        Latency Distribution
        50%  307.31ms
        75%  351.58ms
        90%  389.22ms
        99%  481.97ms
        50000 requests in 43.00s, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 8
        Requests/sec:   1162.79
        Transfer/sec:     88.57KB
        ------------------------------
        stop time: 26.991591
        stop time: 27.098993
        stop time: 27.044453
        stop time: 26.796547
        stop time: 27.164255
        stop time: 26.826282
        stop time: 26.752289
        stop time: 27.083323
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [26.991591, 27.098993, 27.044453, 26.796547, 27.164255, 26.826282, 26.752289, 27.083323]
    [exp] Throughput: 1853.9312331391616
[test.py] Baseline throughput: 1853.9312331391616
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '0.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-bkn2c:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:13:18.656086Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   250.01ms  104.31ms 688.43ms   69.49%
        Req/Sec   226.86     66.78   360.00     70.26%
        Latency Distribution
        50%  245.02ms
        75%  317.76ms
        90%  384.52ms
        99%  527.85ms
        5283 requests in 3.02s, 402.42KB read
        Requests/sec:   1748.88
        Transfer/sec:    133.22KB
        [run.sh] Speed is 1748.88, duration is 42
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d42s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        frontend-5bdf5f9485-xcnrb        1889m        50Mi
        profile-5b5b8849c5-q26z7         466m         316Mi
        rate-5c87b596bf-8rvxv            241m         201Mi
        reservation-d894fc7d6-6t554      297m         98Mi
        search-86dd46855b-882sd          431m         72Mi
        ubuntu-client-76886f6bbd-bkn2c   915m         60Mi
        user-7fdf495754-h7862            91m          8Mi
        Running 42s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   266.70ms  114.28ms   1.53s    75.59%
        Req/Sec   240.12     54.07   464.00     69.21%
        Latency Distribution
        50%  256.81ms
        75%  321.99ms
        90%  395.42ms
        99%  571.42ms
        50000 requests in 42.00s, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 19
        Requests/sec:   1190.47
        Transfer/sec:     90.68KB
        ------------------------------
        stop time: 25.979227
        stop time: 26.065258
        stop time: 26.149777
        stop time: 26.236441
        stop time: 26.250933
        stop time: 26.107479
        stop time: 26.250636
        stop time: 26.212789
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [25.979227, 26.065258, 26.149777, 26.236441, 26.250933, 26.107479, 26.250636, 26.212789]
    [exp] Throughput: 1911.5658046492529
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '250.0', 'SLOWPOKE_DELAY_MICROS_RATE': '0.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '0.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/frontend created
        deployment.apps/frontend created
        service/profile created
        deployment.apps/profile created
        service/rate created
        deployment.apps/rate created
        service/reservation created
        deployment.apps/reservation created
        service/search created
        deployment.apps/search created
        service/user created
        deployment.apps/user created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying hotel/analysis.txt to ubuntu-client-76886f6bbd-42nff:/analysis.txt
        [run.sh] Finished populating hotel
        [run.sh] Starting the rust proxy first for hotel
        [2m2025-03-25T15:15:03.802095Z[0m [32m INFO[0m [2mproxy::hotel[0m[2m:[0m Reading analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c512 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   242.50ms   95.59ms 603.47ms   67.66%
        Req/Sec   236.12     66.79   410.00     73.71%
        Latency Distribution
        50%  242.80ms
        75%  303.00ms
        90%  365.90ms
        99%  473.77ms
        5513 requests in 3.03s, 419.94KB read
        Requests/sec:   1817.11
        Transfer/sec:    138.41KB
        [run.sh] Speed is 1817.11, duration is 41
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk -t8 -c512 -d41s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        Running 41s test @ http://localhost:3000
        8 threads and 512 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   264.03ms  124.42ms   1.50s    77.09%
        Req/Sec   242.99     51.16   510.00     68.81%
        Latency Distribution
        50%  264.06ms
        75%  319.97ms
        90%  386.44ms
        99%  596.57ms
        50000 requests in 41.00s, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 23
        Requests/sec:   1219.51
        Transfer/sec:     92.89KB
        ------------------------------
        stop time: 25.752036
        stop time: 25.816141
        stop time: 25.794378
        stop time: 25.853314
        stop time: 25.801877
        stop time: 25.940135
        stop time: 26.086030
        stop time: 25.907375
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > error: metrics not available yet
    [exp] Times: [25.752036, 25.816141, 25.794378, 25.853314, 25.801877, 25.940135, 26.08603, 25.907375]
    [exp] Throughput: 1932.8220072041497
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload hotel/mix request with the following configuration: {'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '400.0', 'SLOWPOKE_DELAY_MICROS_PROFILE': '500.0', 'SLOWPOKE_DELAY_MICROS_RATE': '500.0', 'SLOWPOKE_DELAY_MICROS_RESERVATION': '400.0', 'SLOWPOKE_DELAY_MICROS_SEARCH': '500.0', 'SLOWPOKE_DELAY_MICROS_USER': '2015.0'}
    [exp] Executing cmd `bash run.sh hotel mix 8 512 50000`:
        [run.sh] Running benchmark hotel with request mix, thread 8, conn 512, duration 60
        [run.sh] Deleting all services
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "profile" deleted
        deployment.apps "profile" deleted
        service "rate" deleted
        deployment.apps "rate" deleted
        service "reservation" deleted
        deployment.apps "reservation" deleted
        service "search" deleted
        deployment.apps "search" deleted
        service "user" deleted
        deployment.apps "user" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
