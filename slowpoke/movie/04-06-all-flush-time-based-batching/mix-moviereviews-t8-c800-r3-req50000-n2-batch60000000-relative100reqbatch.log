benchmark                        : movie
num_threads                      : 8
num_conns                        : 800
target_service                   : moviereviews
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'castinfo': 0.9050900514, 'composereview': 0.1003336848, 'frontend': 0.1003336848, 'movieid': 0.1003336848, 'movieinfo': 0.9050900514, 'moviereviews': 0.9050900514, 'page': 0.9050900514, 'plot': 0.9050900514, 'reviewstorage': 1.005423736183, 'uniqueid': 0.1003336848, 'user': 0.2006673695, 'userreviews': 0.1003336848}
baseline_service_processing_time : {'castinfo': 0, 'composereview': 0, 'frontend': 0, 'movieid': 0, 'movieinfo': 0, 'moviereviews': 1000, 'page': 0, 'plot': 0, 'reviewstorage': 0, 'uniqueid': 0, 'user': 0, 'userreviews': 0}
cpu_quota                        : {'castinfo': 2, 'composereview': 2, 'frontend': 2, 'movieid': 2, 'movieinfo': 2, 'moviereviews': 2, 'page': 2, 'plot': 2, 'reviewstorage': 2, 'uniqueid': 2, 'user': 2, 'userreviews': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 60000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-248l2:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:29:01.870858Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   458.96ms  193.39ms   1.12s    75.45%
        Req/Sec   179.63     61.85   383.00     72.77%
        Latency Distribution
        50%  490.96ms
        75%  588.81ms
        90%  669.39ms
        99%  824.55ms
        4085 requests in 3.03s, 311.16KB read
        Requests/sec:   1348.67
        Transfer/sec:    102.73KB
        [run.sh] Speed is 1348.67, duration is 55
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d55s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-7znqq        51m          62Mi
        composereview-676886854c-n8whr   62m          9Mi
        frontend-67bcc5d87b-5vk9x        114m         9Mi
        movieid-6b7485b65-8qfgt          7m           187Mi
        movieinfo-969fd9977-pmhh9        46m          219Mi
        moviereviews-7d747bcb8-cwspb     1895m        21Mi
        page-6597cb4c54-fr6fh            537m         94Mi
        plot-5464fccfdd-tbfwt            31m          145Mi
        reviewstorage-86dd5ff9b9-4fwgd   24m          13Mi
        ubuntu-client-76886f6bbd-248l2   711m         105Mi
        uniqueid-5987bc8cf9-25lqv        9m           8Mi
        user-6776c48774-phljq            22m          8Mi
        userreviews-5d99989bf-9spf9      9m           8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     2.08s     3.44s   15.53s    86.43%
        Req/Sec   192.37     51.36   380.00     70.08%
        Latency Distribution
        50%  578.91ms
        75%  881.78ms
        90%    7.44s
        99%   14.42s
        50000 requests in 0.92m, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 1
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 49.643828
        stop time: 49.883907
        stop time: 50.218842
        stop time: 50.115997
        stop time: 50.040007
        stop time: 49.936602
        stop time: 50.070386
        stop time: 50.117641
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [49.643828, 49.883907, 50.218842, 50.115997, 50.040007, 49.936602, 50.070386, 50.117641]
    [exp] Throughput: 999.931979627086
[test.py] Baseline throughput: 999.931979627086
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] castinfo-56549f7689-jxq5c cannot connect to page
        [run.sh] castinfo-56549f7689-jxq5c cannot connect to page
        [run.sh] composereview-676886854c-jlmzg cannot connect to page
        [run.sh] composereview-676886854c-jlmzg cannot connect to page
        [run.sh] frontend-67bcc5d87b-ff28d cannot connect to page
        [run.sh] movieid-6b7485b65-crmf8 cannot connect to page
        [run.sh] movieinfo-969fd9977-c75hw cannot connect to page
        [run.sh] moviereviews-58674f8fbc-mnm6c cannot connect to page
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-62m4b:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:31:49.270573Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   419.30ms  221.48ms   1.17s    66.89%
        Req/Sec   177.13     77.89   454.00     67.24%
        Latency Distribution
        50%  445.00ms
        75%  579.39ms
        90%  689.10ms
        99%  880.38ms
        4119 requests in 3.02s, 313.75KB read
        Requests/sec:   1363.19
        Transfer/sec:    103.84KB
        [run.sh] Speed is 1363.19, duration is 55
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d55s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-jxq5c        348m         62Mi
        composereview-676886854c-jlmzg   358m         9Mi
        frontend-67bcc5d87b-ff28d        561m         9Mi
        movieid-6b7485b65-crmf8          38m          182Mi
        movieinfo-969fd9977-c75hw        207m         234Mi
        moviereviews-58674f8fbc-mnm6c    668m         16Mi
        page-6597cb4c54-8xt9h            1884m        83Mi
        plot-5464fccfdd-mhp29            289m         145Mi
        reviewstorage-86dd5ff9b9-lj6dd   275m         13Mi
        ubuntu-client-76886f6bbd-62m4b   780m         88Mi
        uniqueid-5987bc8cf9-kccvz        37m          8Mi
        user-6776c48774-rqbjv            69m          8Mi
        userreviews-5d99989bf-c2nnr      36m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   514.97ms  214.02ms   1.40s    77.05%
        Req/Sec   192.58     61.30   494.00     67.71%
        Latency Distribution
        50%  544.91ms
        75%  643.62ms
        90%  741.17ms
        99%  924.27ms
        50000 requests in 0.92m, 3.72MB read
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 32.216165
        stop time: 32.242271
        stop time: 32.617587
        stop time: 32.511284
        stop time: 32.639071
        stop time: 32.884220
        stop time: 33.014421
        stop time: 32.956957
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
    [exp] Times: [32.216165, 32.242271, 32.617587, 32.511284, 32.639071, 32.88422, 33.014421, 32.956957]
    [exp] Throughput: 1532.08584571154
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '45250481', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '45254492', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '45254492', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '45244058', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '45250481', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '45250481', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '45250481'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-9m626:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:34:04.583644Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   733.27ms  305.64ms   1.68s    66.98%
        Req/Sec   109.10     53.81   280.00     71.43%
        Latency Distribution
        50%  788.39ms
        75%  940.49ms
        90%    1.08s
        99%    1.32s
        2532 requests in 3.03s, 192.87KB read
        Requests/sec:    836.65
        Transfer/sec:     63.73KB
        [run.sh] Speed is 836.65, duration is 89
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d89s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-c54f4f8d-585d5          6m           65Mi
        composereview-5557b6ddf9-nbdjn   18m          10Mi
        frontend-74f8bcb4c6-8w7xp        36m          11Mi
        movieid-f797d5fbf-pnd2m          3m           177Mi
        movieinfo-5c7795b976-49sfz       12m          210Mi
        moviereviews-7d747bcb8-dm8ml     145m         20Mi
        page-6bbc85c7b7-kt2hr            270m         79Mi
        plot-746f96dcb9-dw5hv            9m           311Mi
        reviewstorage-747dcb858c-n9lns   6m           14Mi
        ubuntu-client-76886f6bbd-9m626   375m         84Mi
        uniqueid-5cbcc5d769-zrg72        4m           8Mi
        user-59b899ff44-fxrf2            15m          8Mi
        userreviews-7d8db99f55-fdxqf     6m           8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   862.85ms  320.15ms   2.91s    79.00%
        Req/Sec   115.18     44.68   363.00     64.89%
        Latency Distribution
        50%  898.39ms
        75%    1.03s
        90%    1.18s
        99%    1.60s
        50000 requests in 1.48m, 3.72MB read
        Requests/sec:    561.80
        Transfer/sec:     42.79KB
        ------------------------------
        stop time: 54.540555
        stop time: 54.315395
        stop time: 54.699644
        stop time: 54.373350
        stop time: 54.416455
        stop time: 54.687620
        stop time: 54.963841
        stop time: 54.801121
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [54.540555, 54.315395, 54.699644, 54.37335, 54.416455, 54.68762, 54.963841, 54.801121]
    [exp] Throughput: 915.7551486026672
[test.py] Finished running 0th optmization experiment: groundtruth->1532.08584571154, slowdown->915.7551486026672, predicted->1563.844107394462, err->2.072877428625591
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-6rltx:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:36:52.855068Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   734.23ms  375.69ms   1.96s    72.95%
        Req/Sec   104.81     66.93   323.00     65.55%
        Latency Distribution
        50%  745.29ms
        75%  953.80ms
        90%    1.18s
        99%    1.65s
        2244 requests in 3.03s, 170.93KB read
        Requests/sec:    740.58
        Transfer/sec:     56.41KB
        [run.sh] Speed is 740.58, duration is 101
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d101s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-ljsm9        225m         61Mi
        composereview-676886854c-cq568   266m         8Mi
        frontend-67bcc5d87b-f4xj6        364m         10Mi
        movieid-6b7485b65-fvjkc          23m          176Mi
        movieinfo-969fd9977-5vhz5        126m         226Mi
        moviereviews-77ddc5f47d-j4jvz    857m         17Mi
        page-6597cb4c54-gtffc            1007m        74Mi
        plot-5464fccfdd-sqsss            197m         146Mi
        reviewstorage-86dd5ff9b9-chsm9   165m         12Mi
        ubuntu-client-76886f6bbd-6rltx   479m         89Mi
        uniqueid-5987bc8cf9-6hpp2        23m          8Mi
        user-6776c48774-vkwb8            42m          8Mi
        userreviews-5d99989bf-vpf9h      28m          8Mi
        Running 2m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   835.78ms  398.55ms   2.99s    73.60%
        Req/Sec   119.19     50.40   320.00     67.75%
        Latency Distribution
        50%  853.50ms
        75%    1.08s
        90%    1.31s
        99%    1.76s
        50000 requests in 1.68m, 3.72MB read
        Socket errors: connect 0, read 1, write 0, timeout 0
        Requests/sec:    495.05
        Transfer/sec:     37.71KB
        ------------------------------
        stop time: 52.675233
        stop time: 52.648488
        stop time: 52.743274
        stop time: 52.516071
        stop time: 52.645399
        stop time: 53.238093
        stop time: 53.130566
        stop time: 53.071168
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [52.675233, 52.648488, 52.743274, 52.516071, 52.645399, 53.238093, 53.130566, 53.071168]
    [exp] Throughput: 946.3686005573372
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '22625235', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '22627241', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '22627241', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '22622024', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '22625235', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '22625235', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '22625235'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-kpknb:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:39:54.583757Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   506.13ms  229.76ms   1.54s    73.00%
        Req/Sec   140.35     65.17   292.00     66.39%
        Latency Distribution
        50%  521.39ms
        75%  649.38ms
        90%  773.41ms
        99%    1.06s
        3336 requests in 3.02s, 254.11KB read
        Requests/sec:   1102.94
        Transfer/sec:     84.01KB
        [run.sh] Speed is 1102.94, duration is 68
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d68s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6fd97df859-tftjc        283m         61Mi
        composereview-6b8d898765-wt5f4   256m         10Mi
        frontend-687c7cf5bb-gzhvv        330m         11Mi
        movieid-7759876b7f-5vsr5         32m          177Mi
        movieinfo-5696d6db75-lwbb2       175m         220Mi
        moviereviews-7d747bcb8-8nppx     1551m        19Mi
        page-78c7469f64-pm2tc            1416m        86Mi
        plot-77b86c46f8-pdrx9            220m         156Mi
        reviewstorage-55c948bfbf-ljhnz   186m         15Mi
        ubuntu-client-76886f6bbd-kpknb   544m         90Mi
        uniqueid-d546c484c-tjnrr         35m          8Mi
        user-796cb4f58-2zpqs             57m          8Mi
        userreviews-64db74458f-b8xtq     34m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   646.25ms  241.31ms   1.67s    79.00%
        Req/Sec   153.97     50.84   390.00     67.95%
        Latency Distribution
        50%  683.99ms
        75%  783.17ms
        90%  884.92ms
        99%    1.10s
        50000 requests in 1.13m, 3.72MB read
        Requests/sec:    735.29
        Transfer/sec:     56.01KB
        ------------------------------
        stop time: 40.852008
        stop time: 40.898689
        stop time: 40.385749
        stop time: 40.767496
        stop time: 40.783611
        stop time: 40.892118
        stop time: 40.838409
        stop time: 41.010360
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [40.852008, 40.898689, 40.385749, 40.767496, 40.783611, 40.892118, 40.838409, 41.01036]
    [exp] Throughput: 1225.383425537309
[test.py] Finished running 1th optmization experiment: groundtruth->946.3686005573372, slowdown->1225.383425537309, predicted->1695.4940581193282, err->79.1578944103613
[test.py] Baseline throughput:  999.931979627086
[test.py] Groundtruth:  [1532.08584571154, 946.3686005573372]
[test.py] Slowdown:  [915.7551486026672, 1225.383425537309]
[test.py] Predicted:  [1563.844107394462, 1695.4940581193282]
[test.py] Error percentage:  [2.072877428625591, 79.1578944103613]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-7sfkq:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:42:21.744706Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   476.55ms  195.66ms   1.09s    76.14%
        Req/Sec   178.24     66.31   390.00     69.60%
        Latency Distribution
        50%  506.86ms
        75%  600.41ms
        90%  681.00ms
        99%  868.35ms
        4086 requests in 3.03s, 311.24KB read
        Requests/sec:   1348.51
        Transfer/sec:    102.72KB
        [run.sh] Speed is 1348.51, duration is 55
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d55s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-ttpsg        0m           156Mi
        composereview-676886854c-p4wrl   0m           9Mi
        frontend-67bcc5d87b-whhfp        0m           10Mi
        movieid-6b7485b65-kmgsq          0m           172Mi
        movieinfo-969fd9977-9ctkw        0m           194Mi
        moviereviews-7d747bcb8-hp6dj     1m           19Mi
        page-6597cb4c54-4vpj5            578m         87Mi
        plot-5464fccfdd-4rr7v            1m           295Mi
        reviewstorage-86dd5ff9b9-fcdh7   1m           11Mi
        ubuntu-client-76886f6bbd-7sfkq   14m          54Mi
        uniqueid-5987bc8cf9-bqj2k        1m           8Mi
        user-6776c48774-7std2            12m          7Mi
        userreviews-5d99989bf-mx6r2      2m           7Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.40s     1.77s   14.60s    84.60%
        Req/Sec   187.36     57.75   444.00     76.21%
        Latency Distribution
        50%  585.12ms
        75%    1.51s
        90%    4.09s
        99%    8.11s
        50000 requests in 0.92m, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 1
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 52.856631
        stop time: 52.778371
        stop time: 52.642551
        stop time: 52.547944
        stop time: 52.927492
        stop time: 52.820809
        stop time: 53.001507
        stop time: 52.840846
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [52.856631, 52.778371, 52.642551, 52.547944, 52.927492, 52.820809, 53.001507, 52.840846]
    [exp] Throughput: 946.9334897661146
[test.py] Baseline throughput: 946.9334897661146
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-8q644:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:44:35.501285Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   460.12ms  195.31ms   1.09s    74.54%
        Req/Sec   192.68     74.42   373.00     72.44%
        Latency Distribution
        50%  487.65ms
        75%  589.77ms
        90%  670.64ms
        99%  830.21ms
        4367 requests in 3.03s, 332.64KB read
        Requests/sec:   1440.13
        Transfer/sec:    109.70KB
        [run.sh] Speed is 1440.13, duration is 52
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d52s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-wjwph        1m           104Mi
        composereview-676886854c-fkfdm   1m           3Mi
        frontend-67bcc5d87b-2z8fw        3m           3Mi
        movieid-6b7485b65-9jld6          7m           168Mi
        movieinfo-969fd9977-cx22s        7m           176Mi
        moviereviews-58674f8fbc-ct9sm    7m           3Mi
        plot-5464fccfdd-ww2rd            7m           252Mi
        reviewstorage-86dd5ff9b9-6fspj   7m           3Mi
        uniqueid-5987bc8cf9-bwd6p        2m           3Mi
        user-6776c48774-8v646            6m           4Mi
        userreviews-5d99989bf-xdkfj      1m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   467.76ms  193.47ms   1.17s    77.17%
        Req/Sec   210.61     67.28   666.00     68.59%
        Latency Distribution
        50%  498.11ms
        75%  585.62ms
        90%  668.86ms
        99%  831.33ms
        50000 requests in 0.87m, 3.72MB read
        Requests/sec:    961.54
        Transfer/sec:     73.24KB
        ------------------------------
        stop time: 29.579988
        stop time: 29.684548
        stop time: 29.671922
        stop time: 29.644543
        stop time: 29.774640
        stop time: 30.039726
        stop time: 30.177300
        stop time: 30.163781
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [29.579988, 29.684548, 29.671922, 29.644543, 29.77464, 30.039726, 30.1773, 30.163781]
    [exp] Throughput: 1675.4877747029227
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '45250481', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '45254492', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '45254492', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '45244058', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '45250481', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '45250481', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '45250481'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-g9cwz:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:46:46.457036Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   621.55ms  303.31ms   1.64s    65.04%
        Req/Sec   110.58     50.05   260.00     66.81%
        Latency Distribution
        50%  612.29ms
        75%  848.48ms
        90%    1.03s
        99%    1.32s
        2603 requests in 3.03s, 198.28KB read
        Requests/sec:    860.28
        Transfer/sec:     65.53KB
        [run.sh] Speed is 860.28, duration is 87
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d87s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-c54f4f8d-4n44w          226m         63Mi
        composereview-5557b6ddf9-78hxn   180m         10Mi
        frontend-74f8bcb4c6-82692        225m         11Mi
        movieid-f797d5fbf-w8tq4          24m          190Mi
        movieinfo-5c7795b976-5jb9h       124m         247Mi
        moviereviews-7d747bcb8-fcmwx     1325m        21Mi
        page-6bbc85c7b7-rq74j            1087m        88Mi
        plot-746f96dcb9-26bdp            183m         148Mi
        reviewstorage-747dcb858c-w488d   171m         16Mi
        ubuntu-client-76886f6bbd-g9cwz   550m         89Mi
        uniqueid-5cbcc5d769-pjxm8        26m          8Mi
        user-59b899ff44-tcwv9            44m          9Mi
        userreviews-7d8db99f55-gqz66     26m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   794.85ms  269.51ms   1.72s    79.21%
        Req/Sec   125.25     43.49   380.00     67.18%
        Latency Distribution
        50%  840.80ms
        75%  951.99ms
        90%    1.06s
        99%    1.27s
        50000 requests in 1.45m, 3.72MB read
        Requests/sec:    574.71
        Transfer/sec:     43.78KB
        ------------------------------
        stop time: 49.970643
        stop time: 49.848464
        stop time: 49.927862
        stop time: 50.188016
        stop time: 50.573827
        stop time: 50.288092
        stop time: 50.373603
        stop time: 50.157114
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [49.970643, 49.848464, 49.927862, 50.188016, 50.573827, 50.288092, 50.373603, 50.157114]
    [exp] Throughput: 996.6919271674053
[test.py] Finished running 0th optmization experiment: groundtruth->1675.4877747029227, slowdown->996.6919271674053, predicted->1815.6266478468592, err->8.364064200276498
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-gwsnr:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:49:32.283679Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   456.63ms  189.37ms   1.04s    76.62%
        Req/Sec   192.04     72.78   404.00     72.17%
        Latency Distribution
        50%  491.75ms
        75%  572.65ms
        90%  649.36ms
        99%  808.20ms
        4444 requests in 3.02s, 338.51KB read
        Requests/sec:   1470.26
        Transfer/sec:    111.99KB
        [run.sh] Speed is 1470.26, duration is 51
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d51s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-zwhd4        1m           104Mi
        composereview-676886854c-h4q6h   1m           3Mi
        frontend-67bcc5d87b-n5j42        1m           3Mi
        movieid-6b7485b65-q7jp4          1m           169Mi
        movieinfo-969fd9977-9nqxr        1m           188Mi
        moviereviews-77ddc5f47d-nfrqz    3m           3Mi
        page-6597cb4c54-pwnfs            7m           3Mi
        plot-5464fccfdd-mlflh            7m           277Mi
        reviewstorage-86dd5ff9b9-ctgd6   8m           3Mi
        ubuntu-client-76886f6bbd-gwsnr   9m           0Mi
        uniqueid-5987bc8cf9-2f8tw        7m           3Mi
        user-6776c48774-769xk            7m           4Mi
        userreviews-5d99989bf-t2sw7      6m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   471.71ms  188.01ms   1.16s    78.59%
        Req/Sec   210.58     63.99   525.00     70.32%
        Latency Distribution
        50%  499.28ms
        75%  581.46ms
        90%  663.28ms
        99%  833.53ms
        50000 requests in 0.85m, 3.72MB read
        Requests/sec:    980.39
        Transfer/sec:     74.68KB
        ------------------------------
        stop time: 29.679672
        stop time: 29.502811
        stop time: 29.917979
        stop time: 29.668607
        stop time: 29.846170
        stop time: 30.125451
        stop time: 29.976107
        stop time: 30.199979
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [29.679672, 29.502811, 29.917979, 29.668607, 29.84617, 30.125451, 29.976107, 30.199979]
    [exp] Throughput: 1674.223161290273
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '22625235', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '22627241', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '22627241', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '22622024', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '22625235', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '22625235', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '22625235'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] castinfo-6fd97df859-5w9d6 cannot connect to reviewstorage
        [run.sh] castinfo-6fd97df859-5w9d6 cannot connect to reviewstorage
        [run.sh] composereview-6b8d898765-spgsn cannot connect to reviewstorage
        [run.sh] frontend-687c7cf5bb-f6slx cannot connect to reviewstorage
        [run.sh] movieid-7759876b7f-pvsc2 cannot connect to reviewstorage
        [run.sh] movieinfo-5696d6db75-rz9tv cannot connect to reviewstorage
        [run.sh] moviereviews-7d747bcb8-4f9zh cannot connect to reviewstorage
        [run.sh] page-78c7469f64-zzggg cannot connect to reviewstorage
        [run.sh] plot-77b86c46f8-nxmkt cannot connect to reviewstorage
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-25f4b:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:52:33.922362Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   580.79ms  234.88ms   1.26s    74.47%
        Req/Sec   146.10     62.65   350.00     69.40%
        Latency Distribution
        50%  626.03ms
        75%  725.51ms
        90%  824.61ms
        99%    1.07s
        3396 requests in 3.04s, 258.68KB read
        Requests/sec:   1116.43
        Transfer/sec:     85.04KB
        [run.sh] Speed is 1116.43, duration is 67
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d67s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6fd97df859-5w9d6        1m           105Mi
        composereview-6b8d898765-spgsn   1m           3Mi
        frontend-687c7cf5bb-f6slx        1m           3Mi
        movieid-7759876b7f-pvsc2         1m           186Mi
        movieinfo-5696d6db75-rz9tv       1m           176Mi
        moviereviews-7d747bcb8-4f9zh     7m           3Mi
        page-78c7469f64-zzggg            7m           3Mi
        plot-77b86c46f8-nxmkt            7m           256Mi
        reviewstorage-55c948bfbf-gnhbw   7m           3Mi
        ubuntu-client-76886f6bbd-25f4b   0m           0Mi
        uniqueid-d546c484c-884wb         7m           3Mi
        user-796cb4f58-g2vhp             1m           4Mi
        userreviews-64db74458f-thl4g     6m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   631.19ms  230.21ms   1.60s    79.55%
        Req/Sec   157.34     51.25   343.00     68.87%
        Latency Distribution
        50%  669.89ms
        75%  762.67ms
        90%  854.77ms
        99%    1.04s
        50000 requests in 1.12m, 3.72MB read
        Requests/sec:    746.27
        Transfer/sec:     56.84KB
        ------------------------------
        stop time: 39.674316
        stop time: 39.617262
        stop time: 39.794074
        stop time: 40.057803
        stop time: 39.984728
        stop time: 40.144423
        stop time: 39.966005
        stop time: 40.407270
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
    [exp] Times: [39.674316, 39.617262, 39.794074, 40.057803, 39.984728, 40.144423, 39.966005, 40.40727]
    [exp] Throughput: 1251.3848098045726
[test.py] Finished running 1th optmization experiment: groundtruth->1674.223161290273, slowdown->1251.3848098045726, predicted->1745.6814774955537, err->4.268147631538551
[test.py] Baseline throughput:  946.9334897661146
[test.py] Groundtruth:  [1675.4877747029227, 1674.223161290273]
[test.py] Slowdown:  [996.6919271674053, 1251.3848098045726]
[test.py] Predicted:  [1815.6266478468592, 1745.6814774955537]
[test.py] Error percentage:  [8.364064200276498, 4.268147631538551]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 2...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] castinfo-56549f7689-kzrkk cannot connect to movieid
        [run.sh] castinfo-56549f7689-kzrkk cannot connect to movieid
        [run.sh] castinfo-56549f7689-kzrkk cannot connect to movieid
        [run.sh] composereview-676886854c-xrdjs cannot connect to movieid
        [run.sh] composereview-676886854c-xrdjs cannot connect to movieid
        [run.sh] frontend-67bcc5d87b-ms56z cannot connect to movieid
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-jdt58:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:55:13.552988Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   492.86ms  189.69ms 969.85ms   79.18%
        Req/Sec   180.21     72.46   373.00     71.36%
        Latency Distribution
        50%  528.87ms
        75%  600.61ms
        90%  671.52ms
        99%  846.02ms
        4073 requests in 3.02s, 310.25KB read
        Requests/sec:   1346.89
        Transfer/sec:    102.59KB
        [run.sh] Speed is 1346.89, duration is 55
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d55s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-kzrkk        84m          152Mi
        composereview-676886854c-xrdjs   48m          10Mi
        frontend-67bcc5d87b-ms56z        94m          10Mi
        movieid-6b7485b65-wm7hn          6m           171Mi
        movieinfo-969fd9977-t75qj        39m          193Mi
        moviereviews-7d747bcb8-cwj6k     451m         19Mi
        page-6597cb4c54-xf67s            609m         77Mi
        plot-5464fccfdd-j8c55            68m          297Mi
        reviewstorage-86dd5ff9b9-c65kc   42m          11Mi
        ubuntu-client-76886f6bbd-jdt58   259m         54Mi
        uniqueid-5987bc8cf9-cvn5c        7m           6Mi
        user-6776c48774-kmgb7            22m          7Mi
        userreviews-5d99989bf-zfwd7      8m           6Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.43s     1.91s   15.67s    86.07%
        Req/Sec   189.77     54.84   380.00     76.04%
        Latency Distribution
        50%  575.70ms
        75%    1.26s
        90%    4.20s
        99%    9.14s
        50000 requests in 0.92m, 3.72MB read
        Socket errors: connect 0, read 0, write 0, timeout 1
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 51.647264
        stop time: 51.891106
        stop time: 52.058078
        stop time: 51.881860
        stop time: 51.805600
        stop time: 51.919817
        stop time: 52.000737
        stop time: 52.178016
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
        > command terminated with exit code 1
    [exp] Times: [51.647264, 51.891106, 52.058078, 51.88186, 51.8056, 51.919817, 52.000737, 52.178016]
    [exp] Throughput: 962.967917967883
[test.py] Baseline throughput: 962.967917967883
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-mfm9n:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:57:27.481866Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   393.84ms  208.87ms   1.00s    67.52%
        Req/Sec   191.94     81.16   494.00     68.53%
        Latency Distribution
        50%  418.43ms
        75%  543.11ms
        90%  646.28ms
        99%  826.28ms
        4464 requests in 3.02s, 340.03KB read
        Requests/sec:   1476.95
        Transfer/sec:    112.50KB
        [run.sh] Speed is 1476.95, duration is 50
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d50s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-tqpbl        1m           104Mi
        composereview-676886854c-9t7wp   1m           3Mi
        frontend-67bcc5d87b-vmwch        1m           3Mi
        movieid-6b7485b65-4g8fv          2m           168Mi
        movieinfo-969fd9977-tgqv7        1m           176Mi
        moviereviews-58674f8fbc-68clg    1m           3Mi
        page-6597cb4c54-lbxjn            1m           3Mi
        plot-5464fccfdd-ksqrt            1m           258Mi
        reviewstorage-86dd5ff9b9-2zmqd   7m           3Mi
        ubuntu-client-76886f6bbd-mfm9n   14m          2Mi
        uniqueid-5987bc8cf9-wmvlk        7m           3Mi
        user-6776c48774-9kwgf            7m           4Mi
        userreviews-5d99989bf-nqw86      4m           3Mi
        Running 50s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   475.68ms  198.78ms   1.20s    77.03%
        Req/Sec   209.54     66.06   545.00     70.81%
        Latency Distribution
        50%  499.42ms
        75%  593.30ms
        90%  691.24ms
        99%  871.50ms
        50000 requests in 50.00s, 3.72MB read
        Requests/sec:   1000.00
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 29.867524
        stop time: 29.969621
        stop time: 29.830255
        stop time: 30.147209
        stop time: 29.660830
        stop time: 30.043915
        stop time: 30.242780
        stop time: 30.192667
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [29.867524, 29.969621, 29.830255, 30.147209, 29.66083, 30.043915, 30.24278, 30.192667]
    [exp] Throughput: 1666.980607735371
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '45250481', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '45250481', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '45254492', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '45254492', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '45254492', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '45244058', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '45250481', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '45250481', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '45250481'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-m5dsv:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T03:59:36.168035Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   549.18ms  240.95ms   1.27s    65.89%
        Req/Sec   111.60     49.91   252.00     65.38%
        Latency Distribution
        50%  551.83ms
        75%  732.34ms
        90%  864.96ms
        99%    1.07s
        2615 requests in 3.03s, 199.19KB read
        Requests/sec:    863.00
        Transfer/sec:     65.74KB
        [run.sh] Speed is 863.00, duration is 86
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d86s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        composereview-5557b6ddf9-8lx58   7m           3Mi
        frontend-74f8bcb4c6-ktj8d        6m           3Mi
        page-6bbc85c7b7-99t92            7m           3Mi
        ubuntu-client-76886f6bbd-m5dsv   0m           0Mi
        user-59b899ff44-6lsk6            1m           4Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   794.52ms  265.18ms   1.68s    79.60%
        Req/Sec   125.44     44.29   363.00     66.31%
        Latency Distribution
        50%  838.47ms
        75%  947.51ms
        90%    1.05s
        99%    1.27s
        50000 requests in 1.43m, 3.72MB read
        Requests/sec:    581.39
        Transfer/sec:     44.29KB
        ------------------------------
        stop time: 49.806008
        stop time: 49.531887
        stop time: 50.287683
        stop time: 49.979318
        stop time: 50.456883
        stop time: 50.363008
        stop time: 50.268509
        stop time: 50.724629
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [49.806008, 49.531887, 50.287683, 49.979318, 50.456883, 50.363008, 50.268509, 50.724629]
    [exp] Throughput: 996.467708809964
[test.py] Finished running 0th optmization experiment: groundtruth->1666.980607735371, slowdown->996.467708809964, predicted->1814.8827349056244, err->8.87245637315371
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-c7zpt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T04:02:22.087953Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   453.33ms  200.61ms   1.21s    74.29%
        Req/Sec   194.41     69.59   373.00     66.20%
        Latency Distribution
        50%  472.31ms
        75%  573.32ms
        90%  678.72ms
        99%  886.83ms
        4383 requests in 3.03s, 333.86KB read
        Requests/sec:   1446.45
        Transfer/sec:    110.18KB
        [run.sh] Speed is 1446.45, duration is 51
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d51s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-q2567        1m           156Mi
        composereview-676886854c-xt568   1m           9Mi
        frontend-67bcc5d87b-sl2g2        1m           9Mi
        movieid-6b7485b65-65xt6          1m           189Mi
        movieinfo-969fd9977-5nj2m        1m           193Mi
        moviereviews-77ddc5f47d-v9vlr    1m           16Mi
        page-6597cb4c54-scpdn            206m         68Mi
        plot-5464fccfdd-w97gb            1m           295Mi
        reviewstorage-86dd5ff9b9-gzl5v   1m           11Mi
        ubuntu-client-76886f6bbd-c7zpt   3m           56Mi
        uniqueid-5987bc8cf9-vbl8m        7m           8Mi
        user-6776c48774-fs5nz            7m           7Mi
        userreviews-5d99989bf-x4x7r      6m           8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   469.56ms  191.33ms   1.40s    78.08%
        Req/Sec   211.36     61.98   510.00     72.59%
        Latency Distribution
        50%  496.65ms
        75%  579.44ms
        90%  666.39ms
        99%  845.84ms
        50000 requests in 0.85m, 3.72MB read
        Requests/sec:    980.39
        Transfer/sec:     74.68KB
        ------------------------------
        stop time: 29.783603
        stop time: 29.139973
        stop time: 29.605489
        stop time: 29.828609
        stop time: 29.929719
        stop time: 29.530718
        stop time: 30.016451
        stop time: 29.929479
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [29.783603, 29.139973, 29.605489, 29.828609, 29.929719, 29.530718, 30.016451, 29.929479]
    [exp] Throughput: 1682.3401819621663
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '22625235', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '22625235', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '22627241', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '22627241', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '22627241', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '22622024', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '22625235', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '22625235', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '22625235'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-d9dph:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T04:04:31.940359Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   576.69ms  252.79ms   1.56s    73.94%
        Req/Sec   143.82     60.10   343.00     67.38%
        Latency Distribution
        50%  614.87ms
        75%  732.77ms
        90%  844.59ms
        99%    1.13s
        3352 requests in 3.02s, 255.33KB read
        Requests/sec:   1109.31
        Transfer/sec:     84.50KB
        [run.sh] Speed is 1109.31, duration is 67
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d67s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6fd97df859-4bc6k        1m           104Mi
        composereview-6b8d898765-kqdrg   1m           3Mi
        frontend-687c7cf5bb-sjshl        2m           3Mi
        movieid-7759876b7f-lslhc         7m           186Mi
        movieinfo-5696d6db75-5kh2g       7m           176Mi
        moviereviews-7d747bcb8-zbtl4     7m           3Mi
        page-78c7469f64-2b54t            1m           3Mi
        plot-77b86c46f8-24vwx            7m           256Mi
        reviewstorage-55c948bfbf-kqjzm   7m           3Mi
        ubuntu-client-76886f6bbd-d9dph   14m          0Mi
        uniqueid-d546c484c-crdhk         2m           3Mi
        user-796cb4f58-wp6zs             5m           4Mi
        userreviews-64db74458f-5wvnl     1m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   650.15ms  235.35ms   1.46s    79.76%
        Req/Sec   153.11     50.17   343.00     69.19%
        Latency Distribution
        50%  687.20ms
        75%  785.84ms
        90%  881.72ms
        99%    1.08s
        50000 requests in 1.12m, 3.72MB read
        Requests/sec:    746.27
        Transfer/sec:     56.84KB
        ------------------------------
        stop time: 41.043612
        stop time: 40.873814
        stop time: 41.111188
        stop time: 41.241838
        stop time: 40.900570
        stop time: 40.824150
        stop time: 41.292168
        stop time: 40.946666
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [41.043612, 40.873814, 41.111188, 41.241838, 40.90057, 40.82415, 41.292168, 40.946666]
    [exp] Throughput: 1218.6427752400525
[test.py] Finished running 1th optmization experiment: groundtruth->1682.3401819621663, slowdown->1218.6427752400525, predicted->1682.6164625216109, err->0.016422395565819713
[test.py] Baseline throughput:  962.967917967883
[test.py] Groundtruth:  [1666.980607735371, 1682.3401819621663]
[test.py] Slowdown:  [996.467708809964, 1218.6427752400525]
[test.py] Predicted:  [1814.8827349056244, 1682.6164625216109]
[test.py] Error percentage:  [8.87245637315371, 0.016422395565819713]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 999.931979627086
    Groundtruth: [1532.08584571154, 946.3686005573372]
    Slowdown:    [915.7551486026672, 1225.383425537309]
    Predicted:   [1563.844107394462, 1695.4940581193282]
    Error Perc:  [2.072877428625591, 79.1578944103613]
[test.py] Result for the experiment 1: 
    Baseline throughput: 946.9334897661146
    Groundtruth: [1675.4877747029227, 1674.223161290273]
    Slowdown:    [996.6919271674053, 1251.3848098045726]
    Predicted:   [1815.6266478468592, 1745.6814774955537]
    Error Perc:  [8.364064200276498, 4.268147631538551]
[test.py] Result for the experiment 2: 
    Baseline throughput: 962.967917967883
    Groundtruth: [1666.980607735371, 1682.3401819621663]
    Slowdown:    [996.467708809964, 1218.6427752400525]
    Predicted:   [1814.8827349056244, 1682.6164625216109]
    Error Perc:  [8.87245637315371, 0.016422395565819713]
