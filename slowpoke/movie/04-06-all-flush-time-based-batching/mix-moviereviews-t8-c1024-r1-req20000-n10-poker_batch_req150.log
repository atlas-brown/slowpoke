benchmark                        : movie
num_threads                      : 8
num_conns                        : 1024
target_service                   : moviereviews
request_type                     : mix
repetitions                      : 1
target_num_exp                   : 10
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
poker_batch_req                  : 150
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'castinfo': 0.9050900514, 'composereview': 0.1003336848, 'frontend': 0.1003336848, 'movieid': 0.1003336848, 'movieinfo': 0.9050900514, 'moviereviews': 0.9050900514, 'page': 0.9050900514, 'plot': 0.9050900514, 'reviewstorage': 1.005423736183, 'uniqueid': 0.1003336848, 'user': 0.2006673695, 'userreviews': 0.1003336848}
baseline_service_processing_time : {'castinfo': 0, 'composereview': 0, 'frontend': 0, 'movieid': 0, 'movieinfo': 0, 'moviereviews': 1000, 'page': 0, 'plot': 0, 'reviewstorage': 0, 'uniqueid': 0, 'user': 0, 'userreviews': 0}
cpu_quota                        : {'castinfo': 2, 'composereview': 2, 'frontend': 2, 'movieid': 2, 'movieinfo': 2, 'moviereviews': 2, 'page': 2, 'plot': 2, 'reviewstorage': 2, 'uniqueid': 2, 'user': 2, 'userreviews': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 100, 200, 300, 400, 500, 600, 700, 800, 900]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-sbhcd:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:04:22.145901Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   519.11ms  299.18ms   1.40s    64.71%
        Req/Sec   160.84     75.62   383.00     70.56%
        Latency Distribution
        50%  487.55ms
        75%  773.09ms
        90%  907.94ms
        99%    1.17s
        3729 requests in 3.02s, 284.04KB read
        Requests/sec:   1232.79
        Transfer/sec:     93.90KB
        [run.sh] Speed is 1232.79, duration is 24
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d24s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 24s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   703.70ms  257.93ms   1.58s    83.15%
        Req/Sec   178.25     59.98   525.00     71.36%
        Latency Distribution
        50%  763.23ms
        75%  838.37ms
        90%  913.44ms
        99%    1.10s
        20000 requests in 24.00s, 1.49MB read
        Requests/sec:    833.33
        Transfer/sec:     63.48KB
        ------------------------------
        stop time: 13.871859
        stop time: 14.044063
        stop time: 14.084195
        stop time: 14.286386
        stop time: 14.279781
        stop time: 14.194710
        stop time: 14.251565
        stop time: 14.384872
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-6njwn        4m           105Mi
        composereview-676886854c-wt45s   7m           4Mi
        frontend-67bcc5d87b-7xxj9        7m           4Mi
        movieid-6b7485b65-2pdhd          7m           169Mi
        movieinfo-969fd9977-24pbh        7m           177Mi
        moviereviews-7d747bcb8-gd6ln     7m           4Mi
        page-6597cb4c54-hsll8            8m           4Mi
        reviewstorage-86dd5ff9b9-f54w4   1m           4Mi
        uniqueid-5987bc8cf9-nfcgz        1m           4Mi
        user-6776c48774-wf6p2            1m           4Mi
        userreviews-5d99989bf-rshs8      1m           4Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.871859, 14.044063, 14.084195, 14.286386, 14.279781, 14.19471, 14.251565, 14.384872]
    [exp] Throughput: 1410.9667087608009
[test.py] Baseline throughput: 1410.9667087608009
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-bg27m:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:06:10.052997Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   540.06ms  267.84ms   1.27s    69.43%
        Req/Sec   174.02     66.90   360.00     70.87%
        Latency Distribution
        50%  568.58ms
        75%  736.80ms
        90%  859.40ms
        99%    1.04s
        4043 requests in 3.03s, 307.96KB read
        Requests/sec:   1333.50
        Transfer/sec:    101.57KB
        [run.sh] Speed is 1333.50, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   666.97ms  264.18ms   1.44s    79.63%
        Req/Sec   187.94     69.75   474.00     70.93%
        Latency Distribution
        50%  711.65ms
        75%  818.96ms
        90%  924.92ms
        99%    1.13s
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 13.157412
        stop time: 13.615837
        stop time: 13.622486
        stop time: 13.648739
        stop time: 13.562336
        stop time: 13.617458
        stop time: 13.577200
        stop time: 13.575867
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-chsc2        1m           105Mi
        composereview-676886854c-5zqtp   1m           3Mi
        frontend-67bcc5d87b-89sqr        1m           3Mi
        movieid-6b7485b65-hvmdz          1m           187Mi
        movieinfo-969fd9977-n5qfj        1m           190Mi
        moviereviews-58674f8fbc-6plwl    1m           3Mi
        page-6597cb4c54-99zmc            1m           3Mi
        plot-5464fccfdd-cfw8g            7m           255Mi
        reviewstorage-86dd5ff9b9-wsh5m   1m           3Mi
        ubuntu-client-76886f6bbd-bg27m   13m          2Mi
        uniqueid-5987bc8cf9-wd9gp        7m           3Mi
        user-6776c48774-qfbk8            7m           4Mi
        userreviews-5d99989bf-zl59d      6m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.157412, 13.615837, 13.622486, 13.648739, 13.562336, 13.617458, 13.5772, 13.575867]
    [exp] Throughput: 1476.3234397671802
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '67881743', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '67875727', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '67875727', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '67875727', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '67881743', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '67881743', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '67881743', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '67866092', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '67875727', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '67875727', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '67875727'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-wkqcx:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:07:57.776085Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   748.84ms  333.46ms   1.75s    63.93%
        Req/Sec   113.94     77.64   373.00     67.52%
        Latency Distribution
        50%  725.63ms
        75%    1.01s
        90%    1.17s
        99%    1.44s
        2678 requests in 3.03s, 203.99KB read
        Requests/sec:    883.01
        Transfer/sec:     67.26KB
        [run.sh] Speed is 883.01, duration is 33
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d33s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-78c859896c-4gmdp        84m          145Mi
        composereview-86cdf66dd7-h25ml   64m          10Mi
        frontend-59746cfcbd-4m576        71m          12Mi
        movieid-dc9dbc849-qj226          9m           186Mi
        movieinfo-75f4475cd7-pcxwn       47m          190Mi
        moviereviews-7d747bcb8-7hntj     494m         19Mi
        page-6699f5d48-ndjfb             439m         89Mi
        plot-6ffb5496b-4vdlx             37m          285Mi
        reviewstorage-ffb9cc7c9-fsrcd    59m          13Mi
        ubuntu-client-76886f6bbd-wkqcx   131m         62Mi
        uniqueid-699f877465-zvbmp        10m          8Mi
        user-748545cbbd-qw4vt            15m          8Mi
        userreviews-767fc95467-22khp     12m          7Mi
        Running 33s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.06s   374.46ms   1.82s    80.97%
        Req/Sec   116.06     64.71   380.00     63.23%
        Latency Distribution
        50%    1.19s
        75%    1.30s
        90%    1.38s
        99%    1.56s
        20000 requests in 33.00s, 1.49MB read
        Requests/sec:    606.06
        Transfer/sec:     46.16KB
        ------------------------------
        stop time: 20.929458
        stop time: 20.748038
        stop time: 21.310644
        stop time: 21.577545
        stop time: 22.021574
        stop time: 22.525083
        stop time: 22.428918
        stop time: 22.525064
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [20.929458, 20.748038, 21.310644, 21.577545, 22.021574, 22.525083, 22.428918, 22.525064]
    [exp] Throughput: 919.1898600673615
[test.py] Finished running 0th optmization experiment: groundtruth->1476.3234397671802, slowdown->919.1898600673615, predicted->1573.8873224190354, err->6.608570996288002
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '100', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-b75vc:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:09:49.193049Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   527.22ms  233.88ms   1.16s    74.21%
        Req/Sec   198.08     84.94   370.00     64.32%
        Latency Distribution
        50%  551.43ms
        75%  683.42ms
        90%  788.49ms
        99%  994.11ms
        4544 requests in 3.04s, 346.12KB read
        Requests/sec:   1496.44
        Transfer/sec:    113.99KB
        [run.sh] Speed is 1496.44, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   610.98ms  246.42ms   1.46s    78.46%
        Req/Sec   203.30     70.32   707.00     70.85%
        Latency Distribution
        50%  650.05ms
        75%  754.02ms
        90%  856.52ms
        99%    1.08s
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 12.103874
        stop time: 12.436095
        stop time: 12.403766
        stop time: 12.458895
        stop time: 12.376292
        stop time: 12.496714
        stop time: 12.328206
        stop time: 12.320272
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-7wggc        206m         61Mi
        composereview-676886854c-22cc8   122m         9Mi
        frontend-67bcc5d87b-24ps2        155m         10Mi
        movieid-6b7485b65-2tqzw          16m          174Mi
        movieinfo-969fd9977-hsjfz        95m          217Mi
        moviereviews-7c774d8d5d-2pk5x    326m         16Mi
        page-6597cb4c54-zm2kk            983m         95Mi
        plot-5464fccfdd-gdmn8            84m          319Mi
        reviewstorage-86dd5ff9b9-lk8h8   124m         11Mi
        ubuntu-client-76886f6bbd-b75vc   226m         103Mi
        uniqueid-5987bc8cf9-p6kbv        17m          7Mi
        user-6776c48774-b25rv            37m          8Mi
        userreviews-5d99989bf-rvtzx      16m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.103874, 12.436095, 12.403766, 12.458895, 12.376292, 12.496714, 12.328206, 12.320272]
    [exp] Throughput: 1617.401395174487
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '61093568', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '61088153', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '61088153', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '61088153', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '61093568', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '61093568', 'SLOWPOKE_DELAY_MICROS_PLOT': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '61093568', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '405.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '61079481', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '61088153', 'SLOWPOKE_DELAY_MICROS_USER': '2029.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '61088153', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '61088153'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-zdhz4:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:11:37.013016Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   831.75ms  363.26ms   1.86s    68.07%
        Req/Sec   112.67     55.27   252.00     63.79%
        Latency Distribution
        50%  875.87ms
        75%    1.08s
        90%    1.25s
        99%    1.60s
        2621 requests in 3.04s, 199.65KB read
        Requests/sec:    861.40
        Transfer/sec:     65.61KB
        [run.sh] Speed is 861.40, duration is 34
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d34s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5bcc7cc547-snl5v        191m         63Mi
        composereview-674469bfd8-8nhjb   163m         10Mi
        frontend-5dddbc5f55-4qt58        175m         12Mi
        movieid-6f65fd4bc4-kz45j         23m          176Mi
        movieinfo-7d6ff658f9-76glh       147m         216Mi
        moviereviews-7d747bcb8-8vrc4     1386m        22Mi
        page-59798486d-h9hhx             929m         91Mi
        plot-585594db6-pwm5l             188m         156Mi
        reviewstorage-5b859b6fc5-x58gp   157m         16Mi
        ubuntu-client-76886f6bbd-zdhz4   594m         108Mi
        uniqueid-84b6bcd86d-l5fj5        25m          8Mi
        user-76cf7c499f-5r5lt            41m          9Mi
        userreviews-644df486cd-zjvrh     28m          8Mi
        Running 34s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   987.16ms  335.38ms   2.14s    79.68%
        Req/Sec   126.81     62.03   535.00     65.01%
        Latency Distribution
        50%    1.06s
        75%    1.18s
        90%    1.30s
        99%    1.51s
        20000 requests in 34.00s, 1.49MB read
        Requests/sec:    588.23
        Transfer/sec:     44.81KB
        ------------------------------
        stop time: 19.548807
        stop time: 19.972881
        stop time: 19.820957
        stop time: 20.121232
        stop time: 19.894473
        stop time: 19.798423
        stop time: 20.225482
        stop time: 20.111513
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [19.548807, 19.972881, 19.820957, 20.121232, 19.894473, 19.798423, 20.225482, 20.111513]
    [exp] Throughput: 1003.1739923531056
[test.py] Finished running 1th optmization experiment: groundtruth->1617.401395174487, slowdown->1003.1739923531056, predicted->1696.221842796729, err->4.87327684132106
[test.py] Running 2th optmization experiment
[test.py] Running 2th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '200', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-vmzhw:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:13:29.768219Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   559.96ms  238.23ms   1.21s    76.96%
        Req/Sec   185.31     70.22   393.00     71.74%
        Latency Distribution
        50%  615.53ms
        75%  714.35ms
        90%  794.40ms
        99%  952.13ms
        4276 requests in 3.04s, 325.71KB read
        Requests/sec:   1404.93
        Transfer/sec:    107.02KB
        [run.sh] Speed is 1404.93, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   589.41ms  241.98ms   1.36s    78.18%
        Req/Sec   207.49     67.97   646.00     71.88%
        Latency Distribution
        50%  633.59ms
        75%  727.35ms
        90%  827.16ms
        99%    1.06s
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 11.626375
        stop time: 11.877095
        stop time: 12.128605
        stop time: 12.112751
        stop time: 12.324640
        stop time: 12.429762
        stop time: 12.603459
        stop time: 12.307856
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-npplm        268m         61Mi
        composereview-676886854c-tmfg4   254m         8Mi
        frontend-67bcc5d87b-fgtms        369m         9Mi
        movieid-6b7485b65-q2m4d          1m           177Mi
        movieinfo-969fd9977-447xf        1m           210Mi
        moviereviews-885dd8fb5-pjclt     1m           16Mi
        page-6597cb4c54-vxm9z            1265m        67Mi
        plot-5464fccfdd-lc5wl            129m         145Mi
        reviewstorage-86dd5ff9b9-8cwbt   238m         13Mi
        ubuntu-client-76886f6bbd-vmzhw   422m         71Mi
        uniqueid-5987bc8cf9-9hzwf        1m           8Mi
        user-6776c48774-wmhnw            47m          8Mi
        userreviews-5d99989bf-ggmns      1m           8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.626375, 11.877095, 12.128605, 12.112751, 12.32464, 12.429762, 12.603459, 12.307856]
    [exp] Throughput: 1642.5326773920149
[test.py] Running 2th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '54305393', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '54300580', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '54300580', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '54300580', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '54305393', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '54305393', 'SLOWPOKE_DELAY_MICROS_PLOT': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '54305393', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '360.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '54292871', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '54300580', 'SLOWPOKE_DELAY_MICROS_USER': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '54300580', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '54300580'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-mlx7m:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:15:18.615867Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   658.77ms  374.75ms   1.96s    73.64%
        Req/Sec   121.32     67.98   363.00     67.67%
        Latency Distribution
        50%  584.05ms
        75%  910.47ms
        90%    1.10s
        99%    1.90s
        2830 requests in 3.03s, 215.57KB read
        Requests/sec:    934.97
        Transfer/sec:     71.22KB
        [run.sh] Speed is 934.97, duration is 32
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d32s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-84d98b557d-rg7v6        6m           105Mi
        composereview-7f95b7ddc8-k4td9   7m           3Mi
        frontend-6497fbd9fc-pb95t        7m           3Mi
        movieinfo-6bf7444646-lzqnl       2m           187Mi
        plot-5d74f8fd9f-bkgtf            7m           253Mi
        ubuntu-client-76886f6bbd-mlx7m   0m           0Mi
        uniqueid-576b968498-zmvpc        7m           3Mi
        userreviews-7474967c4d-58nvw     2m           3Mi
        Running 32s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   947.83ms  348.41ms   2.00s    78.56%
        Req/Sec   129.24     60.97   400.00     68.76%
        Latency Distribution
        50%    1.05s
        75%    1.16s
        90%    1.25s
        99%    1.45s
        20000 requests in 32.00s, 1.49MB read
        Requests/sec:    625.00
        Transfer/sec:     47.61KB
        ------------------------------
        stop time: 18.295954
        stop time: 18.787217
        stop time: 19.257501
        stop time: 19.611889
        stop time: 19.848567
        stop time: 19.981431
        stop time: 20.098741
        stop time: 20.167306
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [18.295954, 18.787217, 19.257501, 19.611889, 19.848567, 19.981431, 20.098741, 20.167306]
    [exp] Throughput: 1025.3215591044755
[test.py] Finished running 2th optmization experiment: groundtruth->1642.5326773920149, slowdown->1025.3215591044755, predicted->1630.6090975393406, err->-0.7259264924705376
[test.py] Running 3th optmization experiment
[test.py] Running 3th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '300', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-bg87z:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:17:10.433267Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   476.99ms  280.14ms   1.50s    68.26%
        Req/Sec   183.54     90.94   565.00     72.73%
        Latency Distribution
        50%  474.71ms
        75%  678.76ms
        90%  814.71ms
        99%    1.20s
        4256 requests in 3.03s, 324.19KB read
        Requests/sec:   1403.87
        Transfer/sec:    106.94KB
        [run.sh] Speed is 1403.87, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   588.60ms  238.81ms   1.54s    77.69%
        Req/Sec   206.72     70.12   595.00     71.49%
        Latency Distribution
        50%  634.32ms
        75%  727.94ms
        90%  822.92ms
        99%    1.02s
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 11.583596
        stop time: 11.871903
        stop time: 11.702569
        stop time: 12.428859
        stop time: 12.223266
        stop time: 12.532567
        stop time: 12.686858
        stop time: 12.609875
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-bg6gz        1m           104Mi
        composereview-676886854c-5jc9c   1m           3Mi
        frontend-67bcc5d87b-k24v5        1m           3Mi
        movieid-6b7485b65-hmfhw          1m           187Mi
        movieinfo-969fd9977-4sxv4        7m           177Mi
        moviereviews-984fc9976-lfvq9     8m           3Mi
        page-6597cb4c54-xgvsv            7m           3Mi
        plot-5464fccfdd-sws6g            6m           252Mi
        reviewstorage-86dd5ff9b9-p6ln5   7m           3Mi
        ubuntu-client-76886f6bbd-bg87z   14m          2Mi
        uniqueid-5987bc8cf9-wjdz9        7m           3Mi
        user-6776c48774-h7n68            7m           4Mi
        userreviews-5d99989bf-dsqs9      6m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.583596, 11.871903, 11.702569, 12.428859, 12.223266, 12.532567, 12.686858, 12.609875]
    [exp] Throughput: 1638.6811840573569
[test.py] Running 3th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '47517217', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '47513006', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '47513006', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '47513006', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '47517217', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '47517217', 'SLOWPOKE_DELAY_MICROS_PLOT': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '47517217', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '315.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '47506261', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '47513006', 'SLOWPOKE_DELAY_MICROS_USER': '1578.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '47513006', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '47513006'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-nphkc:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:18:58.184382Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   606.92ms  334.00ms   1.61s    65.77%
        Req/Sec   110.45     72.75   363.00     69.07%
        Latency Distribution
        50%  551.65ms
        75%  857.44ms
        90%    1.09s
        99%    1.36s
        2609 requests in 3.03s, 198.73KB read
        Requests/sec:    860.94
        Transfer/sec:     65.58KB
        [run.sh] Speed is 860.94, duration is 34
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d34s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-59f896ccdb-m2nqb        57m          145Mi
        composereview-786cd77666-5tk9k   64m          10Mi
        frontend-58fbcb7f97-msbrp        73m          11Mi
        movieid-645f96dc48-qtcqd         4m           172Mi
        movieinfo-7ffc597d54-5smrd       18m          190Mi
        moviereviews-7d747bcb8-gj5vq     165m         19Mi
        page-64c6cf459c-jl5tk            376m         87Mi
        plot-965df7d79-dcfdq             73m          293Mi
        reviewstorage-64c7d4968d-sjx4z   21m          12Mi
        ubuntu-client-76886f6bbd-nphkc   203m         57Mi
        uniqueid-79db9d48fd-lx4gp        2m           7Mi
        user-85b556bb49-54bvq            10m          7Mi
        userreviews-59d9dc8fd8-nvs58     2m           7Mi
        Running 34s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   955.06ms  345.91ms   1.82s    80.13%
        Req/Sec   128.64     56.93   404.00     65.78%
        Latency Distribution
        50%    1.04s
        75%    1.16s
        90%    1.26s
        99%    1.47s
        20000 requests in 34.00s, 1.49MB read
        Requests/sec:    588.23
        Transfer/sec:     44.81KB
        ------------------------------
        stop time: 18.854145
        stop time: 19.122908
        stop time: 19.425533
        stop time: 19.529382
        stop time: 19.699096
        stop time: 19.676627
        stop time: 20.025031
        stop time: 20.137040
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [18.854145, 19.122908, 19.425533, 19.529382, 19.699096, 19.676627, 20.025031, 20.13704]
    [exp] Throughput: 1022.5617905650039
[test.py] Finished running 3th optmization experiment: groundtruth->1638.6811840573569, slowdown->1022.5617905650039, predicted->1512.5057884407606, err->-7.6998135356742985
[test.py] Running 4th optmization experiment
[test.py] Running 4th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '400', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-vgbqv:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:20:50.593653Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   582.48ms  274.99ms   1.34s    72.31%
        Req/Sec   169.87     77.99   410.00     68.56%
        Latency Distribution
        50%  630.61ms
        75%  776.74ms
        90%  886.75ms
        99%    1.11s
        3925 requests in 3.04s, 298.97KB read
        Requests/sec:   1293.02
        Transfer/sec:     98.49KB
        [run.sh] Speed is 1293.02, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   647.62ms  273.19ms   2.14s    77.92%
        Req/Sec   189.35     67.19   500.00     69.54%
        Latency Distribution
        50%  703.44ms
        75%  805.34ms
        90%  908.60ms
        99%    1.17s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 12.747416
        stop time: 12.881164
        stop time: 13.141391
        stop time: 13.393308
        stop time: 13.705331
        stop time: 13.587497
        stop time: 13.742050
        stop time: 13.678757
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-vctkw        105m         63Mi
        composereview-676886854c-wxtxj   58m          9Mi
        frontend-67bcc5d87b-l82xw        115m         10Mi
        movieid-6b7485b65-49t8s          11m          174Mi
        movieinfo-969fd9977-sk778        71m          210Mi
        moviereviews-76756dc775-r7lbb    402m         16Mi
        page-6597cb4c54-gchvj            421m         94Mi
        plot-5464fccfdd-j95kv            3m           316Mi
        reviewstorage-86dd5ff9b9-qfbsn   89m          11Mi
        ubuntu-client-76886f6bbd-vgbqv   125m         99Mi
        uniqueid-5987bc8cf9-q4srw        12m          7Mi
        user-6776c48774-f54k7            21m          8Mi
        userreviews-5d99989bf-lfkcn      12m          7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.747416, 12.881164, 13.141391, 13.393308, 13.705331, 13.587497, 13.74205, 13.678757]
    [exp] Throughput: 1497.0492130788882
[test.py] Running 4th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '40729042', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '40725432', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '40725432', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '40725432', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '40729042', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '40729042', 'SLOWPOKE_DELAY_MICROS_PLOT': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '40729042', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '270.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '40719651', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '40725432', 'SLOWPOKE_DELAY_MICROS_USER': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '40725432', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '40725432'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-zchp5:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:22:39.318148Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   768.92ms  348.21ms   1.69s    67.06%
        Req/Sec   124.48     61.47   270.00     65.22%
        Latency Distribution
        50%  811.49ms
        75%    1.04s
        90%    1.18s
        99%    1.42s
        2878 requests in 3.03s, 219.22KB read
        Requests/sec:    948.78
        Transfer/sec:     72.27KB
        [run.sh] Speed is 948.78, duration is 31
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d31s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-8cd869c7-8pmdj          240m         61Mi
        composereview-74ff5cd7c8-8npgx   219m         9Mi
        frontend-6c975cdd9c-nzjqv        248m         10Mi
        movieid-8648b8d8d4-vgmxw         20m          176Mi
        movieinfo-6b5c5f5c7-b8cdc        142m         209Mi
        moviereviews-7d747bcb8-b6869     1173m        20Mi
        page-5c949979c8-vvbh5            1372m        105Mi
        plot-8dc6d4dd8-cg5zr             212m         148Mi
        reviewstorage-6bf7b89658-jhmcm   132m         15Mi
        ubuntu-client-76886f6bbd-zchp5   608m         108Mi
        uniqueid-878d6f49d-hpz5z         19m          9Mi
        user-5d7ccdd854-jk4cp            38m          8Mi
        userreviews-dcf55f88d-5hv2k      24m          8Mi
        Running 31s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   916.20ms  335.03ms   1.74s    80.28%
        Req/Sec   134.57     60.09   343.00     67.14%
        Latency Distribution
        50%    1.00s
        75%    1.11s
        90%    1.21s
        99%    1.43s
        20000 requests in 31.00s, 1.49MB read
        Requests/sec:    645.16
        Transfer/sec:     49.14KB
        ------------------------------
        stop time: 17.945749
        stop time: 18.021275
        stop time: 18.554121
        stop time: 18.671388
        stop time: 18.945115
        stop time: 19.151129
        stop time: 19.357758
        stop time: 19.351808
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [17.945749, 18.021275, 18.554121, 18.671388, 18.945115, 19.151129, 19.357758, 19.351808]
    [exp] Throughput: 1066.6784499079433
[test.py] Finished running 4th optmization experiment: groundtruth->1497.0492130788882, slowdown->1066.6784499079433, predicted->1501.5857609122124, err->0.3030326453994244
[test.py] Running 5th optmization experiment
[test.py] Running 5th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-znstw:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:24:29.226031Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   530.13ms  287.39ms   1.50s    71.29%
        Req/Sec   170.15     72.40   424.00     71.88%
        Latency Distribution
        50%  542.52ms
        75%  703.35ms
        90%  878.17ms
        99%    1.24s
        3890 requests in 3.03s, 296.31KB read
        Requests/sec:   1285.59
        Transfer/sec:     97.93KB
        [run.sh] Speed is 1285.59, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   656.24ms  259.84ms   1.65s    79.77%
        Req/Sec   189.81     70.34   590.00     74.45%
        Latency Distribution
        50%  704.24ms
        75%  802.13ms
        90%  903.79ms
        99%    1.13s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 13.102792
        stop time: 13.235036
        stop time: 13.321806
        stop time: 13.379541
        stop time: 13.253985
        stop time: 13.384184
        stop time: 13.334950
        stop time: 13.409546
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-gp52l        140m         62Mi
        composereview-676886854c-kmtdj   103m         9Mi
        frontend-67bcc5d87b-g9tvn        144m         9Mi
        movieid-6b7485b65-xqqpg          15m          177Mi
        movieinfo-969fd9977-54nm6        103m         211Mi
        moviereviews-77ddc5f47d-vx4p8    587m         18Mi
        page-6597cb4c54-4pv6d            513m         93Mi
        plot-5464fccfdd-8qtvx            27m          146Mi
        reviewstorage-86dd5ff9b9-mxqs9   131m         14Mi
        ubuntu-client-76886f6bbd-znstw   238m         69Mi
        uniqueid-5987bc8cf9-d9t6d        19m          7Mi
        user-6776c48774-d5cmc            28m          8Mi
        userreviews-5d99989bf-f2r8v      24m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.102792, 13.235036, 13.321806, 13.379541, 13.253985, 13.384184, 13.33495, 13.409546]
    [exp] Throughput: 1503.4507954382295
[test.py] Running 5th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '33940866', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '33937858', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '33937858', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '33937858', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '33940866', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '33940866', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '33940866', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '33933041', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '33937858', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '33937858', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '33937858'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-kjkq7:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:26:17.186429Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   634.83ms  287.08ms   1.38s    70.56%
        Req/Sec   127.30     67.48   330.00     68.40%
        Latency Distribution
        50%  686.39ms
        75%  833.80ms
        90%  960.30ms
        99%    1.21s
        2952 requests in 3.04s, 224.86KB read
        Requests/sec:    972.63
        Transfer/sec:     74.09KB
        [run.sh] Speed is 972.63, duration is 30
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d30s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-59748c5f46-vxkcm        1m           104Mi
        composereview-5845f78bd6-vq8bv   1m           3Mi
        frontend-85cd46976f-nf2m4        6m           3Mi
        movieid-6b6bf58bd-gbjzz          7m           169Mi
        movieinfo-69949784f8-gtx6g       7m           176Mi
        moviereviews-7d747bcb8-wt9cn     8m           3Mi
        page-6567c5855c-n9rgc            8m           3Mi
        plot-7dbbb8fc6c-kxrrs            7m           252Mi
        reviewstorage-5f7c496f87-tmrq5   7m           3Mi
        ubuntu-client-76886f6bbd-kjkq7   13m          0Mi
        uniqueid-6f456559c4-qflj4        1m           3Mi
        user-6496fb996c-nmfd7            1m           4Mi
        userreviews-5c44956468-rkxsh     1m           3Mi
        Running 30s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   889.43ms  320.11ms   1.86s    81.71%
        Req/Sec   140.90     55.65   430.00     69.30%
        Latency Distribution
        50%  961.22ms
        75%    1.06s
        90%    1.17s
        99%    1.37s
        20000 requests in 30.00s, 1.49MB read
        Requests/sec:    666.66
        Transfer/sec:     50.78KB
        ------------------------------
        stop time: 17.486612
        stop time: 17.897274
        stop time: 18.143141
        stop time: 17.857423
        stop time: 17.852101
        stop time: 17.694101
        stop time: 17.951417
        stop time: 18.066631
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [17.486612, 17.897274, 18.143141, 17.857423, 17.852101, 17.694101, 17.951417, 18.066631]
    [exp] Throughput: 1119.2826517484943
[test.py] Finished running 5th optmization experiment: groundtruth->1503.4507954382295, slowdown->1119.2826517484943, predicted->1498.8978705508168, err->-0.3028316524376578
[test.py] Running 6th optmization experiment
[test.py] Running 6th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '600', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-m6twn:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:28:05.797159Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   605.18ms  267.60ms   1.30s    73.67%
        Req/Sec   171.44     79.66   494.00     69.27%
        Latency Distribution
        50%  651.61ms
        75%  793.49ms
        90%  895.79ms
        99%    1.06s
        3809 requests in 3.04s, 290.14KB read
        Requests/sec:   1252.56
        Transfer/sec:     95.41KB
        [run.sh] Speed is 1252.56, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   667.40ms  271.85ms   1.81s    78.56%
        Req/Sec   187.02     65.00   610.00     70.01%
        Latency Distribution
        50%  715.40ms
        75%  818.50ms
        90%  930.33ms
        99%    1.18s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 13.183079
        stop time: 13.359357
        stop time: 13.114861
        stop time: 13.484876
        stop time: 13.795238
        stop time: 13.652002
        stop time: 13.603967
        stop time: 13.623319
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-v5t66        1m           137Mi
        composereview-676886854c-2w9d9   1m           9Mi
        frontend-67bcc5d87b-vl9jd        1m           10Mi
        movieid-6b7485b65-6x8pc          1m           171Mi
        movieinfo-969fd9977-btz9v        1m           188Mi
        moviereviews-85554db99c-94r4t    1m           17Mi
        page-6597cb4c54-p2rct            1m           85Mi
        plot-5464fccfdd-6r296            17m          278Mi
        reviewstorage-86dd5ff9b9-q6kzb   1m           10Mi
        ubuntu-client-76886f6bbd-m6twn   2m           89Mi
        uniqueid-5987bc8cf9-98srw        7m           6Mi
        user-6776c48774-wm62s            7m           7Mi
        userreviews-5d99989bf-6hrbv      6m           7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.183079, 13.359357, 13.114861, 13.484876, 13.795238, 13.652002, 13.603967, 13.623319]
    [exp] Throughput: 1484.0001732941205
[test.py] Running 6th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '27152691', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '27150285', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '27150285', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '27150285', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '27152691', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '27152691', 'SLOWPOKE_DELAY_MICROS_PLOT': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '27152691', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '180.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '27146430', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '27150285', 'SLOWPOKE_DELAY_MICROS_USER': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '27150285', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '27150285'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-dh4nh:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:29:53.913992Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   604.76ms  274.61ms   1.49s    72.55%
        Req/Sec   131.38     74.75   430.00     65.92%
        Latency Distribution
        50%  646.24ms
        75%  785.66ms
        90%  910.90ms
        99%    1.19s
        3006 requests in 3.03s, 228.97KB read
        Requests/sec:    992.22
        Transfer/sec:     75.58KB
        [run.sh] Speed is 992.22, duration is 30
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d30s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-9495d754f-txgb2         95m          155Mi
        composereview-778bc68fdc-kqmjc   56m          12Mi
        frontend-66c8f9dd-v5dz6          78m          17Mi
        movieid-6b6bd76bb5-l28fd         9m           172Mi
        movieinfo-c858cd8f7-svxlj        58m          190Mi
        moviereviews-7d747bcb8-vbbcb     533m         18Mi
        page-6f46498c98-gjqzw            297m         86Mi
        plot-6bdfd7d6bd-kjt98            12m          293Mi
        reviewstorage-7d9f95c646-nkfzx   65m          12Mi
        ubuntu-client-76886f6bbd-dh4nh   195m         87Mi
        uniqueid-58895f6557-qm9ds        10m          8Mi
        user-5864557d56-wmmch            18m          8Mi
        userreviews-765bc899dc-5qsjd     12m          7Mi
        Running 30s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   840.63ms  311.85ms   1.82s    80.81%
        Req/Sec   149.05     56.53   470.00     66.59%
        Latency Distribution
        50%  907.53ms
        75%    1.01s
        90%    1.12s
        99%    1.35s
        20000 requests in 30.00s, 1.49MB read
        Requests/sec:    666.66
        Transfer/sec:     50.78KB
        ------------------------------
        stop time: 16.494456
        stop time: 17.105313
        stop time: 17.103194
        stop time: 16.906507
        stop time: 16.749104
        stop time: 16.895781
        stop time: 17.153641
        stop time: 17.203898
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [16.494456, 17.105313, 17.103194, 16.906507, 16.749104, 16.895781, 17.153641, 17.203898]
    [exp] Throughput: 1179.8375148421715
[test.py] Finished running 6th optmization experiment: groundtruth->1484.0001732941205, slowdown->1179.8375148421715, predicted->1500.2483048517297, err->1.0948874434119709
[test.py] Running 7th optmization experiment
[test.py] Running 7th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '700', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-knzms:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:31:43.618065Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   542.18ms  290.41ms   1.66s    71.74%
        Req/Sec   171.54     79.00   440.00     67.41%
        Latency Distribution
        50%  532.90ms
        75%  731.81ms
        90%  893.79ms
        99%    1.27s
        3892 requests in 3.03s, 296.46KB read
        Requests/sec:   1282.62
        Transfer/sec:     97.70KB
        [run.sh] Speed is 1282.62, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   656.23ms  267.69ms   1.66s    78.12%
        Req/Sec   186.83     66.94   454.00     73.13%
        Latency Distribution
        50%  695.87ms
        75%  805.59ms
        90%  923.64ms
        99%    1.20s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 12.937802
        stop time: 13.098891
        stop time: 13.152018
        stop time: 13.390034
        stop time: 13.836219
        stop time: 13.939115
        stop time: 13.920548
        stop time: 13.961634
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-x96h2        276m         60Mi
        composereview-676886854c-wkbzd   353m         9Mi
        frontend-67bcc5d87b-qchqz        373m         9Mi
        movieid-6b7485b65-bhbfq          18m          188Mi
        movieinfo-969fd9977-k7z7n        140m         225Mi
        moviereviews-9ff484c88-t7jnl     1166m        17Mi
        page-6597cb4c54-8t5xm            1762m        95Mi
        plot-5464fccfdd-q2sqp            288m         145Mi
        reviewstorage-86dd5ff9b9-jcqnm   162m         12Mi
        ubuntu-client-76886f6bbd-knzms   598m         104Mi
        uniqueid-5987bc8cf9-kqhtk        18m          8Mi
        user-6776c48774-mgmpf            39m          8Mi
        userreviews-5d99989bf-5d48j      23m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.937802, 13.098891, 13.152018, 13.390034, 13.836219, 13.939115, 13.920548, 13.961634]
    [exp] Throughput: 1478.2476641538829
[test.py] Running 7th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '20364516', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '20362711', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '20362711', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '20362711', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '20364516', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '20364516', 'SLOWPOKE_DELAY_MICROS_PLOT': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '20364516', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '135.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '20359820', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '20362711', 'SLOWPOKE_DELAY_MICROS_USER': '676.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '20362711', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '20362711'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-h498s:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:33:31.642987Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   662.97ms  320.40ms   1.66s    70.18%
        Req/Sec   141.28     77.24   414.00     66.38%
        Latency Distribution
        50%  667.71ms
        75%  897.07ms
        90%    1.07s
        99%    1.31s
        3250 requests in 3.03s, 247.56KB read
        Requests/sec:   1073.00
        Transfer/sec:     81.73KB
        [run.sh] Speed is 1073.00, duration is 27
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d27s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 27s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   780.72ms  299.19ms   1.49s    79.40%
        Req/Sec   155.93     57.32   400.00     72.44%
        Latency Distribution
        50%  847.00ms
        75%  954.33ms
        90%    1.06s
        99%    1.26s
        20000 requests in 27.00s, 1.49MB read
        Requests/sec:    740.74
        Transfer/sec:     56.42KB
        ------------------------------
        stop time: 15.356971
        stop time: 15.695609
        stop time: 15.839560
        stop time: 16.052906
        stop time: 16.204546
        stop time: 16.485633
        stop time: 16.557287
        stop time: 16.719733
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-dd8765b85-wjvlz         186m         61Mi
        composereview-6cc7c4c75d-wcvh8   155m         9Mi
        frontend-7bf986cd5c-xvb8d        216m         10Mi
        movieid-9974d6db8-zz945          21m          188Mi
        movieinfo-7dd96b77bf-z7lt8       137m         219Mi
        moviereviews-7d747bcb8-5b4gg     1025m        20Mi
        page-6dcbd58d6b-vpcpw            708m         85Mi
        plot-6586668b8-m8lkp             252m         147Mi
        reviewstorage-64dc6b4b7b-5r4jg   150m         14Mi
        ubuntu-client-76886f6bbd-h498s   430m         100Mi
        uniqueid-654bcf7c78-z2bln        25m          8Mi
        user-5cb8f47b6c-8295f            42m          8Mi
        userreviews-787856d56-ds9hb      33m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [15.356971, 15.695609, 15.83956, 16.052906, 16.204546, 16.485633, 16.557287, 16.719733]
    [exp] Throughput: 1241.1543992581933
[test.py] Finished running 7th optmization experiment: groundtruth->1478.2476641538829, slowdown->1241.1543992581933, predicted->1492.6753891590288, err->0.9760018808082508
[test.py] Running 8th optmization experiment
[test.py] Running 8th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '800', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-9m227:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:35:20.875376Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   466.96ms  230.80ms   1.21s    68.98%
        Req/Sec   158.33     87.22   404.00     64.98%
        Latency Distribution
        50%  496.32ms
        75%  640.45ms
        90%  741.29ms
        99%  890.39ms
        3749 requests in 3.03s, 285.57KB read
        Requests/sec:   1235.63
        Transfer/sec:     94.12KB
        [run.sh] Speed is 1235.63, duration is 24
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d24s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 24s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   674.02ms  254.93ms   1.39s    81.08%
        Req/Sec   187.15     66.57   727.00     72.35%
        Latency Distribution
        50%  722.55ms
        75%  820.39ms
        90%  912.42ms
        99%    1.10s
        20000 requests in 24.00s, 1.49MB read
        Requests/sec:    833.33
        Transfer/sec:     63.48KB
        ------------------------------
        stop time: 13.401186
        stop time: 13.428120
        stop time: 13.366600
        stop time: 13.556525
        stop time: 13.614458
        stop time: 13.749879
        stop time: 13.662699
        stop time: 13.813883
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-8zkpn        1m           105Mi
        composereview-676886854c-sf5q2   1m           3Mi
        frontend-67bcc5d87b-qwwhr        7m           3Mi
        movieid-6b7485b65-89rzt          7m           168Mi
        movieinfo-969fd9977-8j84z        7m           176Mi
        moviereviews-796664ffff-lr2tc    8m           3Mi
        page-6597cb4c54-qxqz6            8m           3Mi
        reviewstorage-86dd5ff9b9-wfkrv   4m           3Mi
        ubuntu-client-76886f6bbd-9m227   0m           0Mi
        uniqueid-5987bc8cf9-bk767        1m           3Mi
        user-6776c48774-256nj            1m           4Mi
        userreviews-5d99989bf-9wp9c      1m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.401186, 13.42812, 13.3666, 13.556525, 13.614458, 13.749879, 13.662699, 13.813883]
    [exp] Throughput: 1473.3867221151202
[test.py] Running 8th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '13576340', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '13575137', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '13575137', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '13575137', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '13576340', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '13576340', 'SLOWPOKE_DELAY_MICROS_PLOT': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '13576340', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '90.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '13573210', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '13575137', 'SLOWPOKE_DELAY_MICROS_USER': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '13575137', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '13575137'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-g224w:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:37:08.683032Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   664.71ms  296.73ms   1.70s    74.51%
        Req/Sec   154.17     71.26   363.00     67.43%
        Latency Distribution
        50%  709.27ms
        75%  849.71ms
        90%  989.97ms
        99%    1.27s
        3460 requests in 3.03s, 263.55KB read
        Requests/sec:   1141.27
        Transfer/sec:     86.93KB
        [run.sh] Speed is 1141.27, duration is 26
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d26s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 26s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   762.68ms  285.22ms   1.63s    81.10%
        Req/Sec   164.21     59.47   720.00     72.72%
        Latency Distribution
        50%  823.01ms
        75%  921.20ms
        90%    1.02s
        99%    1.20s
        20000 requests in 26.00s, 1.49MB read
        Requests/sec:    769.23
        Transfer/sec:     58.59KB
        ------------------------------
        stop time: 14.958420
        stop time: 15.389182
        stop time: 15.362417
        stop time: 15.429841
        stop time: 15.338600
        stop time: 15.302905
        stop time: 15.549089
        stop time: 15.655472
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6646445b9d-g6298        1m           105Mi
        composereview-7b4d94b4bf-snm2j   1m           3Mi
        frontend-7cd7f9ddfd-blw4g        1m           3Mi
        movieid-55f478bfdc-sfdhd         1m           168Mi
        movieinfo-65df984878-848vq       1m           176Mi
        moviereviews-7d747bcb8-zlql7     1m           3Mi
        page-74bb6f4f49-vwt2s            8m           3Mi
        plot-5b6697969f-fmmms            7m           254Mi
        reviewstorage-6cbbddf975-5w8x9   1m           3Mi
        ubuntu-client-76886f6bbd-g224w   2m           2Mi
        uniqueid-859d578f-cqgnm          7m           3Mi
        user-67d89d7b55-vprk7            7m           4Mi
        userreviews-5f6bbc8d99-z6kpf     6m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [14.95842, 15.389182, 15.362417, 15.429841, 15.3386, 15.302905, 15.549089, 15.655472]
    [exp] Throughput: 1300.961867783148
[test.py] Finished running 8th optmization experiment: groundtruth->1473.3867221151202, slowdown->1300.961867783148, predicted->1474.593421074827, err->0.08189967654754286
[test.py] Running 9th optmization experiment
[test.py] Running 9th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '900', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '10', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '10', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '10', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '10', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '10', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '10', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '10', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '10', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '10'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-qjxv4:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:38:56.576932Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   522.11ms  285.12ms   1.52s    67.74%
        Req/Sec   150.88     77.37   434.00     68.16%
        Latency Distribution
        50%  502.80ms
        75%  734.19ms
        90%  897.24ms
        99%    1.16s
        3438 requests in 3.03s, 261.88KB read
        Requests/sec:   1135.07
        Transfer/sec:     86.46KB
        [run.sh] Speed is 1135.07, duration is 26
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d26s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 26s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   686.22ms  258.18ms   1.62s    81.22%
        Req/Sec   182.14     59.40   414.00     67.64%
        Latency Distribution
        50%  734.55ms
        75%  824.24ms
        90%  916.68ms
        99%    1.15s
        20000 requests in 26.00s, 1.49MB read
        Requests/sec:    769.23
        Transfer/sec:     58.59KB
        ------------------------------
        stop time: 13.684640
        stop time: 13.936549
        stop time: 13.745102
        stop time: 13.673362
        stop time: 13.853894
        stop time: 13.840057
        stop time: 13.901310
        stop time: 13.776178
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-56549f7689-tx4br        110m         153Mi
        composereview-676886854c-t9swz   58m          9Mi
        frontend-67bcc5d87b-kqbj6        98m          10Mi
        movieid-6b7485b65-lf55z          10m          186Mi
        movieinfo-969fd9977-mbwds        70m          192Mi
        moviereviews-859cf5b46b-vvvgw    425m         19Mi
        page-6597cb4c54-nv2q2            466m         84Mi
        plot-5464fccfdd-vvkf2            95m          289Mi
        reviewstorage-86dd5ff9b9-j7wrf   74m          11Mi
        ubuntu-client-76886f6bbd-qjxv4   238m         63Mi
        uniqueid-5987bc8cf9-cjcsd        11m          6Mi
        user-6776c48774-w6hs2            22m          7Mi
        userreviews-5d99989bf-n6pmw      12m          6Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.68464, 13.936549, 13.745102, 13.673362, 13.853894, 13.840057, 13.90131, 13.776178]
    [exp] Throughput: 1449.1297667810404
[test.py] Running 9th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '6788165', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '6787563', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '6787563', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '6787563', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '6788165', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '10', 'SLOWPOKE_DELAY_MICROS_PAGE': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '6788165', 'SLOWPOKE_DELAY_MICROS_PLOT': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '6788165', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '45.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '6786600', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '6787563', 'SLOWPOKE_DELAY_MICROS_USER': '225.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '6787563', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '6787563'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-fb488:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-07T18:40:45.502153Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   523.74ms  301.05ms   1.56s    67.27%
        Req/Sec   149.97     68.81   404.00     66.81%
        Latency Distribution
        50%  480.97ms
        75%  762.84ms
        90%  916.49ms
        99%    1.26s
        3456 requests in 3.03s, 263.25KB read
        Requests/sec:   1140.00
        Transfer/sec:     86.84KB
        [run.sh] Speed is 1140.00, duration is 26
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d26s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 26s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   727.18ms  272.13ms   1.48s    81.18%
        Req/Sec   170.34     56.94   373.00     68.63%
        Latency Distribution
        50%  787.60ms
        75%  881.18ms
        90%  969.09ms
        99%    1.15s
        20000 requests in 26.00s, 1.49MB read
        Requests/sec:    769.23
        Transfer/sec:     58.59KB
        ------------------------------
        stop time: 14.382303
        stop time: 14.392708
        stop time: 14.686495
        stop time: 14.900816
        stop time: 15.048653
        stop time: 15.070742
        stop time: 15.064360
        stop time: 15.121519
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-cb98f7fdd-ffb8n         303m         60Mi
        composereview-8594f66b7d-ct79v   3m           9Mi
        frontend-7d5684545c-jbwl8        434m         10Mi
        movieid-69f5748bfb-zfl8m         23m          188Mi
        movieinfo-7f7cdfc4d-n5c8h        171m         218Mi
        moviereviews-7d747bcb8-wt4lw     148m         19Mi
        page-54f586b7b7-brj29            215m         106Mi
        plot-86d467fc4f-rxnm8            45m          316Mi
        reviewstorage-7d98886b56-8rqzh   161m         12Mi
        ubuntu-client-76886f6bbd-fb488   562m         101Mi
        uniqueid-7ddc6bf4b-cc5mb         22m          7Mi
        user-88668f7d5-trh7z             51m          8Mi
        userreviews-b4b4f45cb-22ggk      27m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [14.382303, 14.392708, 14.686495, 14.900816, 15.048653, 15.070742, 15.06436, 15.121519]
    [exp] Throughput: 1348.3040475514479
[test.py] Finished running 9th optmization experiment: groundtruth->1449.1297667810404, slowdown->1348.3040475514479, predicted->1435.919289260609, err->-0.9116145305451748
[test.py] Baseline throughput:  1410.9667087608009
[test.py] Groundtruth:  [1476.3234397671802, 1617.401395174487, 1642.5326773920149, 1638.6811840573569, 1497.0492130788882, 1503.4507954382295, 1484.0001732941205, 1478.2476641538829, 1473.3867221151202, 1449.1297667810404]
[test.py] Slowdown:  [919.1898600673615, 1003.1739923531056, 1025.3215591044755, 1022.5617905650039, 1066.6784499079433, 1119.2826517484943, 1179.8375148421715, 1241.1543992581933, 1300.961867783148, 1348.3040475514479]
[test.py] Predicted:  [1573.8873224190354, 1696.221842796729, 1630.6090975393406, 1512.5057884407606, 1501.5857609122124, 1498.8978705508168, 1500.2483048517297, 1492.6753891590288, 1474.593421074827, 1435.919289260609]
[test.py] Error percentage:  [6.608570996288002, 4.87327684132106, -0.7259264924705376, -7.6998135356742985, 0.3030326453994244, -0.3028316524376578, 1.0948874434119709, 0.9760018808082508, 0.08189967654754286, -0.9116145305451748]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 1410.9667087608009
    Groundtruth: [1476.3234397671802, 1617.401395174487, 1642.5326773920149, 1638.6811840573569, 1497.0492130788882, 1503.4507954382295, 1484.0001732941205, 1478.2476641538829, 1473.3867221151202, 1449.1297667810404]
    Slowdown:    [919.1898600673615, 1003.1739923531056, 1025.3215591044755, 1022.5617905650039, 1066.6784499079433, 1119.2826517484943, 1179.8375148421715, 1241.1543992581933, 1300.961867783148, 1348.3040475514479]
    Predicted:   [1573.8873224190354, 1696.221842796729, 1630.6090975393406, 1512.5057884407606, 1501.5857609122124, 1498.8978705508168, 1500.2483048517297, 1492.6753891590288, 1474.593421074827, 1435.919289260609]
    Error Perc:  [6.608570996288002, 4.87327684132106, -0.7259264924705376, -7.6998135356742985, 0.3030326453994244, -0.3028316524376578, 1.0948874434119709, 0.9760018808082508, 0.08189967654754286, -0.9116145305451748]
