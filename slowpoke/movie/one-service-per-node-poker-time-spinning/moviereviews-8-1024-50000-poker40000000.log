benchmark                        : movie
num_threads                      : 8
num_conns                        : 1024
target_service                   : moviereviews
request_type                     : mix
repetitions                      : 3
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'castinfo': 0.9050900514, 'composereview': 0.1003336848, 'frontend': 0.1003336848, 'movieid': 0.1003336848, 'movieinfo': 0.9050900514, 'moviereviews': 0.9050900514, 'page': 0.9050900514, 'plot': 0.9050900514, 'reviewstorage': 1.005423736183, 'uniqueid': 0.1003336848, 'user': 0.2006673695, 'userreviews': 0.1003336848}
baseline_service_processing_time : {'castinfo': 0, 'composereview': 0, 'frontend': 0, 'movieid': 0, 'movieinfo': 0, 'moviereviews': 1000, 'page': 0, 'plot': 0, 'reviewstorage': 0, 'uniqueid': 0, 'user': 0, 'userreviews': 0}
cpu_quota                        : {'castinfo': 2, 'composereview': 2, 'frontend': 2, 'movieid': 2, 'movieinfo': 2, 'moviereviews': 2, 'page': 2, 'plot': 2, 'reviewstorage': 2, 'uniqueid': 2, 'user': 2, 'userreviews': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 40000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-77cqv:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T02:59:32.434069Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   502.12ms  315.68ms   1.83s    69.08%
        Req/Sec   174.50     73.79   484.00     73.78%
        Latency Distribution
        50%  474.73ms
        75%  716.37ms
        90%  898.79ms
        99%    1.33s
        4023 requests in 3.02s, 306.44KB read
        Requests/sec:   1330.04
        Transfer/sec:    101.31KB
        [run.sh] Speed is 1330.04, duration is 56
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d56s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-69f7f4bf5b-9x66j        1m           104Mi
        composereview-6fd8464d94-qkv8k   1m           2Mi
        frontend-7cfb978765-pcshf        1m           2Mi
        movieid-6b646ccc8d-7lq6z         1m           168Mi
        movieinfo-749bcccb6d-jk8gc       1m           188Mi
        moviereviews-75dc9558f7-ns7lv    1m           2Mi
        page-6bb9f49fbc-5vn9g            7m           3Mi
        plot-6954968f85-mwkxk            2m           278Mi
        reviewstorage-94f6bdffb-bsh5f    7m           2Mi
        ubuntu-client-76886f6bbd-77cqv   13m          0Mi
        uniqueid-7446bf4c96-sq79z        7m           2Mi
        user-744677c849-jzdgc            7m           3Mi
        userreviews-7c8c6957fd-mnhnp     6m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   662.95ms  239.48ms   1.41s    83.14%
        Req/Sec   191.91     60.61     0.87k    69.93%
        Latency Distribution
        50%  713.71ms
        75%  791.06ms
        90%  866.39ms
        99%    1.03s
        50000 requests in 0.93m, 3.72MB read
        Requests/sec:    892.85
        Transfer/sec:     68.01KB
        ------------------------------
        stop time: 32.434284
        stop time: 32.850329
        stop time: 32.840248
        stop time: 32.664251
        stop time: 32.825238
        stop time: 32.634430
        stop time: 32.991259
        stop time: 33.017509
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [32.434284, 32.850329, 32.840248, 32.664251, 32.825238, 32.63443, 32.991259, 33.017509]
    [exp] Throughput: 1525.2182560633105
[test.py] Baseline throughput: 1525.2182560633105
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-rt2tt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T03:01:47.927917Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   561.33ms  282.70ms   1.64s    71.70%
        Req/Sec   182.04     88.36   500.00     71.00%
        Latency Distribution
        50%  572.40ms
        75%  717.22ms
        90%  914.76ms
        99%    1.26s
        4218 requests in 3.04s, 321.29KB read
        Requests/sec:   1387.04
        Transfer/sec:    105.65KB
        [run.sh] Speed is 1387.04, duration is 54
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d54s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-69f7f4bf5b-m4gx2        424m         61Mi
        composereview-6fd8464d94-gpql9   113m         13Mi
        frontend-7cfb978765-hnsnr        215m         11Mi
        movieid-6b646ccc8d-hcnl5         27m          183Mi
        movieinfo-749bcccb6d-4zc25       222m         275Mi
        moviereviews-57d9c9dfc8-gsfb4    474m         18Mi
        page-6bb9f49fbc-46lkj            1884m        95Mi
        plot-6954968f85-tvt4f            314m         146Mi
        reviewstorage-94f6bdffb-ktpfq    240m         15Mi
        ubuntu-client-76886f6bbd-rt2tt   763m         109Mi
        uniqueid-7446bf4c96-mfmmg        34m          7Mi
        user-744677c849-5kdj4            50m          8Mi
        userreviews-7c8c6957fd-sf88t     31m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   625.54ms  253.65ms   1.60s    78.63%
        Req/Sec   201.30     65.51   540.00     70.13%
        Latency Distribution
        50%  669.65ms
        75%  773.53ms
        90%  874.49ms
        99%    1.09s
        50000 requests in 0.90m, 3.72MB read
        Requests/sec:    925.92
        Transfer/sec:     70.53KB
        ------------------------------
        stop time: 30.720191
        stop time: 30.506038
        stop time: 31.042789
        stop time: 31.080177
        stop time: 31.461013
        stop time: 31.612112
        stop time: 31.735763
        stop time: 31.792818
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [30.720191, 30.506038, 31.042789, 31.080177, 31.461013, 31.612112, 31.735763, 31.792818]
    [exp] Throughput: 1600.3142953263448
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-bssg8:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T03:04:02.382855Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   533.39ms  233.35ms   1.17s    75.58%
        Req/Sec   191.91     83.55   490.00     72.52%
        Latency Distribution
        50%  579.71ms
        75%  687.14ms
        90%  771.99ms
        99%  934.55ms
        4389 requests in 3.04s, 334.32KB read
        Requests/sec:   1446.00
        Transfer/sec:    110.14KB
        [run.sh] Speed is 1446.00, duration is 51
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d51s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-69f7f4bf5b-w2wls        137m         60Mi
        composereview-6fd8464d94-vr7fn   112m         12Mi
        frontend-7cfb978765-qdpg2        32m          12Mi
        movieid-6b646ccc8d-2zjbd         27m          177Mi
        movieinfo-749bcccb6d-4gjlr       218m         240Mi
        moviereviews-58fb9f4979-bg68r    182m         20Mi
        page-6bb9f49fbc-b488z            1004m        99Mi
        plot-6954968f85-6j5hb            35m          145Mi
        reviewstorage-94f6bdffb-7q422    245m         12Mi
        ubuntu-client-76886f6bbd-bssg8   340m         104Mi
        uniqueid-7446bf4c96-kg4z6        32m          7Mi
        user-744677c849-k6x6v            45m          8Mi
        userreviews-7c8c6957fd-7tpp8     29m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   630.51ms  252.37ms   1.46s    79.04%
        Req/Sec   200.97     63.37   470.00     72.60%
        Latency Distribution
        50%  670.54ms
        75%  775.89ms
        90%  883.62ms
        99%    1.09s
        50000 requests in 0.85m, 3.72MB read
        Requests/sec:    980.39
        Transfer/sec:     74.68KB
        ------------------------------
        stop time: 31.005087
        stop time: 30.951937
        stop time: 31.284877
        stop time: 31.705853
        stop time: 31.330143
        stop time: 31.414221
        stop time: 31.741444
        stop time: 31.123193
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [31.005087, 30.951937, 31.284877, 31.705853, 31.330143, 31.414221, 31.741444, 31.123193]
    [exp] Throughput: 1596.4446857559278
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-h9rlq:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T03:06:12.892661Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   947.92ms  376.17ms   1.93s    71.27%
        Req/Sec   103.21     61.91   340.00     66.98%
        Latency Distribution
        50%  981.41ms
        75%    1.21s
        90%    1.38s
        99%    1.70s
        2202 requests in 3.04s, 167.73KB read
        Socket errors: connect 0, read 0, write 0, timeout 2
        Requests/sec:    725.04
        Transfer/sec:     55.23KB
        [run.sh] Speed is 725.04, duration is 103
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d103s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5fdc77b649-mgmlv        82m          59Mi
        composereview-5c79dc954-brj25    31m          17Mi
        frontend-9b658f8b9-scgtp         50m          16Mi
        movieid-6959f4fc6d-qkrrf         7m           171Mi
        movieinfo-5f7ccfb99c-lqnvq       2m           190Mi
        moviereviews-75dc9558f7-4ld7v    400m         20Mi
        page-6fcb4cd6c4-6d2kz            372m         84Mi
        plot-77dd4b7fc6-5wflc            64m          318Mi
        reviewstorage-7f6446b9b7-zfxzq   46m          12Mi
        ubuntu-client-76886f6bbd-h9rlq   171m         83Mi
        uniqueid-5b76746bb6-v6x7q        2m           7Mi
        user-9b6566c9-2thfk              3m           9Mi
        userreviews-75dbf568d4-dsvfl     1m           7Mi
        Running 2m test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.02s   334.49ms   2.42s    80.60%
        Req/Sec   124.73     52.75   444.00     66.67%
        Latency Distribution
        50%    1.08s
        75%    1.21s
        90%    1.34s
        99%    1.64s
        50000 requests in 1.72m, 3.72MB read
        Requests/sec:    485.44
        Transfer/sec:     36.98KB
        ------------------------------
        stop time: 50.056838
        stop time: 50.726339
        stop time: 51.003489
        stop time: 50.322007
        stop time: 50.577942
        stop time: 50.464667
        stop time: 50.914691
        stop time: 50.522115
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [50.056838, 50.726339, 51.003489, 50.322007, 50.577942, 50.464667, 50.914691, 50.522115]
    [exp] Throughput: 988.6598539697985
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-2r6vv:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T03:09:15.267620Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   648.83ms  375.66ms   1.90s    66.62%
        Req/Sec   128.12     62.22   333.00     71.88%
        Latency Distribution
        50%  561.30ms
        75%  922.28ms
        90%    1.15s
        99%    1.57s
        2873 requests in 3.02s, 218.84KB read
        Requests/sec:    949.98
        Transfer/sec:     72.36KB
        [run.sh] Speed is 949.98, duration is 78
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d78s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-74678545c-cpmvl         103m         179Mi
        composereview-fd95b9c58-kgzqz    32m          11Mi
        frontend-6c46b984cc-2vlbv        55m          12Mi
        movieid-bc6bcb6b4-d6v6m          7m           172Mi
        movieinfo-8b698989-n4lgm         25m          190Mi
        moviereviews-75dc9558f7-v2r7l    479m         20Mi
        page-5d64c65d98-jhlwr            471m         91Mi
        plot-79466cd9b4-b8ptw            72m          157Mi
        reviewstorage-586f6b77d9-n4vp7   44m          13Mi
        ubuntu-client-76886f6bbd-2r6vv   203m         63Mi
        uniqueid-77867577d6-r4c4f        8m           6Mi
        user-5769fc8d75-gqvhf            10m          7Mi
        userreviews-78c78944b8-6tjpl     5m           6Mi
        Running 1m test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   845.32ms  284.39ms   1.79s    80.94%
        Req/Sec   149.44     56.64   515.00     66.45%
        Latency Distribution
        50%  901.82ms
        75%    1.00s
        90%    1.10s
        99%    1.33s
        50000 requests in 1.30m, 3.72MB read
        Requests/sec:    641.02
        Transfer/sec:     48.83KB
        ------------------------------
        stop time: 41.527812
        stop time: 41.643257
        stop time: 41.705636
        stop time: 42.045058
        stop time: 42.132051
        stop time: 42.468846
        stop time: 42.579768
        stop time: 42.582890
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [41.527812, 41.643257, 41.705636, 42.045058, 42.132051, 42.468846, 42.579768, 42.58289]
    [exp] Throughput: 1188.0529937453346
[test.py] Baseline throughput:  1525.2182560633105
[test.py] Groundtruth:  [1600.3142953263448, 1596.4446857559278]
[test.py] Slowdown:  [988.6598539697985, 1188.0529937453346]
[test.py] Predicted:  [1789.148190488002, 1624.8516981708115]
[test.py] Error percentage:  [11.79980055874894, 1.7793922124794896]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '40000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-2l4mz:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-03-26T03:11:53.911047Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   599.01ms  249.89ms   1.36s    75.49%
        Req/Sec   173.37     78.71   370.00     72.40%
        Latency Distribution
        50%  638.46ms
        75%  756.52ms
        90%  869.24ms
        99%    1.08s
        3876 requests in 3.03s, 295.24KB read
        Requests/sec:   1277.93
        Transfer/sec:     97.34KB
        [run.sh] Speed is 1277.93, duration is 58
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 10s -t8 -c1024 -d58s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-69f7f4bf5b-kw4mg        438m         54Mi
        composereview-6fd8464d94-z7xwt   109m         12Mi
        frontend-7cfb978765-g88ln        197m         11Mi
        movieid-6b646ccc8d-94n6d         28m          179Mi
        movieinfo-749bcccb6d-5sl94       249m         243Mi
        moviereviews-75dc9558f7-tp4dx    1873m        22Mi
        page-6bb9f49fbc-rtfqg            1879m        107Mi
        plot-6954968f85-fjshr            326m         149Mi
        reviewstorage-94f6bdffb-76rzh    235m         15Mi
        ubuntu-client-76886f6bbd-2l4mz   746m         106Mi
        uniqueid-7446bf4c96-drh7k        31m          7Mi
        user-744677c849-cfvmh            46m          8Mi
        userreviews-7c8c6957fd-8ht6b     29m          7Mi
