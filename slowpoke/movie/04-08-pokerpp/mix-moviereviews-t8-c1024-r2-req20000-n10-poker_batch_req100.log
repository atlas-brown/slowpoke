benchmark                        : movie
num_threads                      : 8
num_conns                        : 1024
target_service                   : moviereviews
request_type                     : mix
repetitions                      : 2
target_num_exp                   : 10
pre_run                          : False
num_req                          : 20000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
poker_batch_req                  : 100
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'castinfo': 0.9050900514, 'composereview': 0.1003336848, 'frontend': 0.1003336848, 'movieid': 0.1003336848, 'movieinfo': 0.9050900514, 'moviereviews': 0.9050900514, 'page': 0.9050900514, 'plot': 0.9050900514, 'reviewstorage': 1.005423736183, 'uniqueid': 0.1003336848, 'user': 0.2006673695, 'userreviews': 0.1003336848}
baseline_service_processing_time : {'castinfo': 0, 'composereview': 0, 'frontend': 0, 'movieid': 0, 'movieinfo': 0, 'moviereviews': 1000, 'page': 0, 'plot': 0, 'reviewstorage': 0, 'uniqueid': 0, 'user': 0, 'userreviews': 0}
cpu_quota                        : {'castinfo': 2, 'composereview': 2, 'frontend': 2, 'movieid': 2, 'movieinfo': 2, 'moviereviews': 2, 'page': 2, 'plot': 2, 'reviewstorage': 2, 'uniqueid': 2, 'user': 2, 'userreviews': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 20000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 100, 200, 300, 400, 500, 600, 700, 800, 900]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-j2dmd:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:10:49.319298Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   454.95ms  248.35ms   1.32s    68.65%
        Req/Sec   178.53     90.21   430.00     64.50%
        Latency Distribution
        50%  467.23ms
        75%  654.41ms
        90%  761.18ms
        99%  997.50ms
        4141 requests in 3.03s, 315.43KB read
        Requests/sec:   1367.51
        Transfer/sec:    104.17KB
        [run.sh] Speed is 1367.51, duration is 21
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 21s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   608.62ms  210.37ms   1.15s    85.44%
        Req/Sec   204.15     69.84   575.00     73.59%
        Latency Distribution
        50%  666.95ms
        75%  709.09ms
        90%  756.07ms
        99%  865.30ms
        20000 requests in 21.00s, 1.49MB read
        Requests/sec:    952.37
        Transfer/sec:     72.54KB
        ------------------------------
        stop time: 12.009641
        stop time: 12.185378
        stop time: 12.218897
        stop time: 12.226830
        stop time: 12.241569
        stop time: 12.480922
        stop time: 12.810778
        stop time: 12.932722
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-bnqxm        149m         59Mi
        composereview-77946fb6bc-djbc7   45m          13Mi
        frontend-69b9fdb4c6-l8sn2        196m         13Mi
        movieid-5bb8fb5475-frwbt         10m          188Mi
        movieinfo-6c5f868dc9-jxgzh       66m          212Mi
        moviereviews-7c945848cf-pjv7j    790m         24Mi
        page-c8c664d8-jz8xl              748m         91Mi
        plot-7954886fb-ppmdz             139m         143Mi
        reviewstorage-864bd74b5-rb6vb    105m         16Mi
        ubuntu-client-76886f6bbd-j2dmd   501m         96Mi
        uniqueid-d47d645ff-7gf8d         22m          7Mi
        user-7cbdb6d567-qfwds            44m          8Mi
        userreviews-54c668998f-pvmpx     26m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.009641, 12.185378, 12.218897, 12.22683, 12.241569, 12.480922, 12.810778, 12.932722]
    [exp] Throughput: 1614.4210256866797
[test.py] Baseline throughput: 1614.4210256866797
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-9zbpn:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:12:37.402490Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   367.59ms  204.75ms   1.04s    68.00%
        Req/Sec   197.75    110.71   510.00     69.40%
        Latency Distribution
        50%  357.74ms
        75%  499.31ms
        90%  641.98ms
        99%  863.86ms
        4590 requests in 3.03s, 349.63KB read
        Requests/sec:   1515.46
        Transfer/sec:    115.44KB
        [run.sh] Speed is 1515.46, duration is 19
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d19s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 19s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   555.87ms  221.13ms   1.19s    79.08%
        Req/Sec   219.26     75.14   470.00     70.19%
        Latency Distribution
        50%  602.21ms
        75%  685.96ms
        90%  765.86ms
        99%  928.21ms
        20000 requests in 19.00s, 1.49MB read
        Requests/sec:   1052.62
        Transfer/sec:     80.18KB
        ------------------------------
        stop time: 10.893362
        stop time: 10.931776
        stop time: 11.381022
        stop time: 11.547912
        stop time: 11.839937
        stop time: 11.800923
        stop time: 11.887653
        stop time: 11.734019
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-stjb8        4m           105Mi
        composereview-77946fb6bc-xhwmn   7m           3Mi
        movieid-5bb8fb5475-lg7rv         7m           186Mi
        movieinfo-6c5f868dc9-6fh8n       7m           176Mi
        moviereviews-576c9f7998-qmk2n    7m           3Mi
        page-c8c664d8-kpdrj              7m           3Mi
        plot-7954886fb-9hpgn             5m           261Mi
        reviewstorage-864bd74b5-hcjn4    3m           3Mi
        ubuntu-client-76886f6bbd-9zbpn   0m           0Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.893362, 10.931776, 11.381022, 11.547912, 11.839937, 11.800923, 11.887653, 11.734019]
    [exp] Throughput: 1738.8166161837487
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-klkwn:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:14:26.603252Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   668.77ms  358.10ms   1.66s    64.69%
        Req/Sec   104.81     72.16   310.00     61.14%
        Latency Distribution
        50%  669.00ms
        75%  935.20ms
        90%    1.13s
        99%    1.46s
        2274 requests in 3.03s, 173.21KB read
        Requests/sec:    751.14
        Transfer/sec:     57.22KB
        [run.sh] Speed is 751.14, duration is 39
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d39s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-77dcb4fbbb-5vvml        1m           105Mi
        composereview-59d898df89-h59gp   1m           3Mi
        frontend-7fc5c8db46-tppjv        1m           3Mi
        movieid-6b645b64f7-52psz         7m           186Mi
        movieinfo-75cd7b4cd4-7szhj       1m           187Mi
        moviereviews-7c945848cf-rf4md    1m           3Mi
        page-94db5f979-c8kjs             1m           3Mi
        plot-cf58b89dc-xkbw6             1m           259Mi
        reviewstorage-7864fcfcb8-p4brc   1m           3Mi
        ubuntu-client-76886f6bbd-klkwn   15m          2Mi
        uniqueid-5d89464895-b7p9c        7m           3Mi
        user-84cb5b9fff-gp49n            7m           4Mi
        userreviews-7d6cfc64c7-x76st     7m           3Mi
        Running 39s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.01s   369.27ms   2.08s    81.92%
        Req/Sec   123.95     61.91   363.00     65.36%
        Latency Distribution
        50%    1.09s
        75%    1.22s
        90%    1.34s
        99%    1.59s
        20000 requests in 39.00s, 1.49MB read
        Requests/sec:    512.82
        Transfer/sec:     39.06KB
        ------------------------------
        stop time: 20.352794
        stop time: 20.198163
        stop time: 20.331352
        stop time: 20.399777
        stop time: 20.964093
        stop time: 20.967574
        stop time: 21.147756
        stop time: 21.112645
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [20.352794, 20.198163, 20.331352, 20.399777, 20.964093, 20.967574, 21.147756, 21.112645]
    [exp] Throughput: 966.9183744550221
[test.py] Finished running 0th optmization experiment: groundtruth->1738.8166161837487, slowdown->966.9183744550221, predicted->1719.1924758740834, err->-1.1285917173218203
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '100', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-fcm4x:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:16:25.342286Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   406.13ms  217.60ms   1.18s    68.40%
        Req/Sec   209.19     97.85   545.00     67.97%
        Latency Distribution
        50%  431.07ms
        75%  565.39ms
        90%  659.56ms
        99%  885.38ms
        4842 requests in 3.03s, 368.82KB read
        Requests/sec:   1600.63
        Transfer/sec:    121.92KB
        [run.sh] Speed is 1600.63, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   539.00ms  221.08ms   1.29s    78.06%
        Req/Sec   228.01     76.96   580.00     70.09%
        Latency Distribution
        50%  580.93ms
        75%  670.72ms
        90%  756.85ms
        99%  924.76ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 10.642381
        stop time: 10.760539
        stop time: 10.916250
        stop time: 11.168785
        stop time: 11.031726
        stop time: 11.270870
        stop time: 11.333396
        stop time: 11.412995
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-2q49k        1m           104Mi
        composereview-77946fb6bc-pllwr   1m           3Mi
        frontend-69b9fdb4c6-s7d92        1m           3Mi
        movieid-5bb8fb5475-5x95d         1m           185Mi
        movieinfo-6c5f868dc9-pv72k       7m           188Mi
        moviereviews-79f4fbf6c-9xsvs     7m           3Mi
        page-c8c664d8-bv9lx              7m           3Mi
        plot-7954886fb-vnvhb             1m           253Mi
        reviewstorage-864bd74b5-5lvvm    1m           3Mi
        ubuntu-client-76886f6bbd-fcm4x   12m          2Mi
        uniqueid-d47d645ff-j562l         7m           3Mi
        user-7cbdb6d567-s4wsj            7m           4Mi
        userreviews-54c668998f-d6glw     6m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.642381, 10.760539, 10.91625, 11.168785, 11.031726, 11.27087, 11.333396, 11.412995]
    [exp] Throughput: 1807.1552550346728
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '405.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '2029.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-x7zb7:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:18:13.434323Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   925.10ms  395.94ms   1.79s    71.24%
        Req/Sec   111.93     63.32   313.00     68.88%
        Latency Distribution
        50%    1.00s
        75%    1.15s
        90%    1.36s
        99%    1.56s
        2326 requests in 3.03s, 177.18KB read
        Requests/sec:    767.43
        Transfer/sec:     58.46KB
        [run.sh] Speed is 767.43, duration is 39
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d39s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5b9c9fd788-r8kw7        1m           141Mi
        composereview-5c75d8bd89-hfcf2   0m           13Mi
        frontend-568568858-xnqn9         36m          14Mi
        movieid-7b9bbdbf7c-f5nbg         4m           173Mi
        movieinfo-5b6d77cdd6-t7jjm       11m          190Mi
        moviereviews-7c945848cf-fqxb5    32m          21Mi
        page-7585b788cc-vfbj6            0m           89Mi
        plot-6899667989-tcpd6            57m          284Mi
        reviewstorage-6754b5bbd6-f6qtr   1m           13Mi
        ubuntu-client-76886f6bbd-x7zb7   187m         67Mi
        uniqueid-756c5ddb99-p244w        11m          8Mi
        user-fb956797-h8jtn              14m          7Mi
        userreviews-7cd4bc866f-4m554     8m           6Mi
        Running 39s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   977.34ms  348.57ms   1.94s    83.33%
        Req/Sec   129.43     63.01   494.00     68.83%
        Latency Distribution
        50%    1.06s
        75%    1.16s
        90%    1.27s
        99%    1.51s
        20000 requests in 39.00s, 1.49MB read
        Requests/sec:    512.82
        Transfer/sec:     39.06KB
        ------------------------------
        stop time: 19.342897
        stop time: 19.675176
        stop time: 19.592207
        stop time: 19.903273
        stop time: 20.021198
        stop time: 20.097130
        stop time: 19.816032
        stop time: 20.017813
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [19.342897, 19.675176, 19.592207, 19.903273, 20.021198, 20.09713, 19.816032, 20.017813]
    [exp] Throughput: 1009.6820557904111
[test.py] Finished running 1th optmization experiment: groundtruth->1807.1552550346728, slowdown->1009.6820557904111, predicted->1714.9121049332673, err->-5.104329019015894
[test.py] Running 2th optmization experiment
[test.py] Running 2th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '200', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-tm5q4:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:20:12.433677Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   449.79ms  217.29ms   1.18s    70.56%
        Req/Sec   201.62     93.39   500.00     72.12%
        Latency Distribution
        50%  485.19ms
        75%  597.29ms
        90%  692.93ms
        99%  898.64ms
        4681 requests in 3.02s, 356.56KB read
        Requests/sec:   1547.62
        Transfer/sec:    117.89KB
        [run.sh] Speed is 1547.62, duration is 19
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d19s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 19s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   577.13ms  229.50ms   1.17s    78.70%
        Req/Sec   218.09     77.15   600.00     72.65%
        Latency Distribution
        50%  617.08ms
        75%  712.39ms
        90%  806.18ms
        99%  966.79ms
        20000 requests in 19.00s, 1.49MB read
        Requests/sec:   1052.62
        Transfer/sec:     80.18KB
        ------------------------------
        stop time: 11.307148
        stop time: 11.567966
        stop time: 11.590388
        stop time: 11.599124
        stop time: 11.673635
        stop time: 11.574781
        stop time: 11.676064
        stop time: 11.777472
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-gn6d2        59m          155Mi
        composereview-77946fb6bc-hnlwz   27m          14Mi
        frontend-69b9fdb4c6-x7cpf        82m          13Mi
        movieid-5bb8fb5475-vjgcn         10m          172Mi
        movieinfo-6c5f868dc9-g5mz6       48m          195Mi
        moviereviews-6984997fc6-jmp6r    154m         19Mi
        page-c8c664d8-w7dqg              330m         83Mi
        plot-7954886fb-srmfj             7m           299Mi
        reviewstorage-864bd74b5-5zdnm    23m          11Mi
        ubuntu-client-76886f6bbd-tm5q4   296m         65Mi
        uniqueid-d47d645ff-c4vpv         13m          8Mi
        user-7cbdb6d567-5wgk7            19m          8Mi
        userreviews-54c668998f-qjb6f     12m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.307148, 11.567966, 11.590388, 11.599124, 11.673635, 11.574781, 11.676064, 11.777472]
    [exp] Throughput: 1724.7591045128343
[test.py] Running 2th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '360.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-rs6gt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:22:00.592635Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   564.84ms  276.37ms   1.28s    65.97%
        Req/Sec   113.25     77.92   520.00     73.58%
        Latency Distribution
        50%  582.73ms
        75%  759.88ms
        90%  907.91ms
        99%    1.18s
        2521 requests in 3.03s, 192.03KB read
        Requests/sec:    831.29
        Transfer/sec:     63.32KB
        [run.sh] Speed is 831.29, duration is 36
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d36s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-f44494697-9rgsn         17m          62Mi
        composereview-569976df86-4chb9   9m           14Mi
        frontend-779c8f89cc-s847w        33m          14Mi
        movieid-7b95656cc8-xwmh6         4m           174Mi
        movieinfo-78c5c84d59-vxmmb       15m          207Mi
        moviereviews-7c945848cf-fb44d    120m         22Mi
        page-857f965b44-7jvf9            93m          103Mi
        plot-856748f7dd-pjk4c            14m          314Mi
        reviewstorage-856754557d-cf5ch   7m           15Mi
        ubuntu-client-76886f6bbd-rs6gt   447m         101Mi
        uniqueid-5bc74dc9db-n25md        18m          8Mi
        user-5b5ddf4fc4-fjxj6            20m          8Mi
        userreviews-84cfdcddfb-nh8qt     15m          8Mi
        Running 36s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   937.76ms  343.59ms   1.96s    82.14%
        Req/Sec   135.29     60.84   424.00     68.62%
        Latency Distribution
        50%    1.01s
        75%    1.12s
        90%    1.24s
        99%    1.52s
        20000 requests in 36.00s, 1.49MB read
        Requests/sec:    555.55
        Transfer/sec:     42.32KB
        ------------------------------
        stop time: 18.664938
        stop time: 18.653017
        stop time: 19.074821
        stop time: 19.008045
        stop time: 19.036478
        stop time: 18.978691
        stop time: 18.899468
        stop time: 18.749464
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [18.664938, 18.653017, 19.074821, 19.008045, 19.036478, 18.978691, 18.899468, 18.749464]
    [exp] Throughput: 1059.1472717935144
[test.py] Finished running 2th optmization experiment: groundtruth->1724.7591045128343, slowdown->1059.1472717935144, predicted->1717.8596222614833, err->-0.400025849018477
[test.py] Running 3th optmization experiment
[test.py] Running 3th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '300', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-jqxnm:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:23:56.360705Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   372.74ms  188.43ms   1.01s    68.23%
        Req/Sec   207.25    110.55   580.00     69.16%
        Latency Distribution
        50%  392.54ms
        75%  509.60ms
        90%  598.23ms
        99%  726.34ms
        4800 requests in 3.03s, 365.62KB read
        Requests/sec:   1584.96
        Transfer/sec:    120.73KB
        [run.sh] Speed is 1584.96, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   554.27ms  226.76ms   1.31s    78.08%
        Req/Sec   220.38     80.13   660.00     73.29%
        Latency Distribution
        50%  589.97ms
        75%  687.91ms
        90%  784.07ms
        99%  983.41ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 10.995858
        stop time: 10.976714
        stop time: 11.172092
        stop time: 11.725244
        stop time: 11.742952
        stop time: 11.731451
        stop time: 11.848620
        stop time: 11.862466
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-f4zmr        221m         62Mi
        composereview-77946fb6bc-8qchw   66m          13Mi
        frontend-69b9fdb4c6-pjp9s        156m         13Mi
        movieid-5bb8fb5475-lfsk7         22m          188Mi
        movieinfo-6c5f868dc9-mbjft       145m         210Mi
        moviereviews-7987d4bb45-bnbxr    559m         21Mi
        page-c8c664d8-gzwhj              1099m        65Mi
        plot-7954886fb-vjsl6             124m         146Mi
        reviewstorage-864bd74b5-rr462    102m         15Mi
        ubuntu-client-76886f6bbd-jqxnm   853m         98Mi
        uniqueid-d47d645ff-ptg8q         31m          8Mi
        user-7cbdb6d567-nwch5            50m          8Mi
        userreviews-54c668998f-jlxhn     34m          9Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.995858, 10.976714, 11.172092, 11.725244, 11.742952, 11.731451, 11.84862, 11.862466]
    [exp] Throughput: 1738.0838626984576
[test.py] Running 3th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '315.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1578.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-xv72d:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:25:44.397547Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   689.37ms  447.08ms   2.05s    61.48%
        Req/Sec   117.45     76.05   343.00     61.61%
        Latency Distribution
        50%  602.78ms
        75%    1.05s
        90%    1.28s
        99%    1.73s
        2708 requests in 3.03s, 206.27KB read
        Requests/sec:    894.71
        Transfer/sec:     68.15KB
        [run.sh] Speed is 894.71, duration is 33
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d33s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6989c48fdf-jr4wp        259m         60Mi
        composereview-7dd85898f5-zjh58   82m          14Mi
        frontend-74bff5f744-ffz8x        117m         13Mi
        movieid-64d65fb6c-nkm78          23m          177Mi
        movieinfo-7498d9d9f9-ndpw6       147m         235Mi
        moviereviews-7c945848cf-qpxhj    1373m        22Mi
        page-84db6f6cc6-vjhwq            1177m        96Mi
        plot-68b8cd76f6-5k7p5            202m         147Mi
        reviewstorage-5456d6f67d-xs84f   132m         16Mi
        ubuntu-client-76886f6bbd-xv72d   218m         99Mi
        uniqueid-fd89696b5-7w6k4         26m          8Mi
        user-7747bd845f-rbv5j            19m          8Mi
        userreviews-64597bd76c-rdxt5     11m          8Mi
        Running 33s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   867.48ms  318.32ms   2.00s    82.69%
        Req/Sec   143.52     65.56   480.00     67.27%
        Latency Distribution
        50%  944.19ms
        75%    1.04s
        90%    1.14s
        99%    1.38s
        20000 requests in 33.00s, 1.49MB read
        Requests/sec:    606.06
        Transfer/sec:     46.16KB
        ------------------------------
        stop time: 17.243589
        stop time: 17.267951
        stop time: 17.525411
        stop time: 17.652006
        stop time: 17.881450
        stop time: 17.991210
        stop time: 18.177242
        stop time: 18.167857
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [17.243589, 17.267951, 17.525411, 17.652006, 17.88145, 17.99121, 18.177242, 18.167857]
    [exp] Throughput: 1127.5012523015473
[test.py] Finished running 3th optmization experiment: groundtruth->1738.0838626984576, slowdown->1127.5012523015473, predicted->1753.969144884214, err->0.9139537237917778
[test.py] Running 4th optmization experiment
[test.py] Running 4th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '400', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-wk6sk:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:27:35.976530Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   492.00ms  213.25ms   1.18s    76.64%
        Req/Sec   214.68     96.78   515.00     76.11%
        Latency Distribution
        50%  526.65ms
        75%  625.37ms
        90%  715.29ms
        99%  908.95ms
        4872 requests in 3.03s, 371.11KB read
        Requests/sec:   1605.37
        Transfer/sec:    122.28KB
        [run.sh] Speed is 1605.37, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   549.99ms  216.85ms   1.36s    79.87%
        Req/Sec   230.01     70.86   630.00     72.98%
        Latency Distribution
        50%  587.01ms
        75%  669.00ms
        90%  760.39ms
        99%  941.82ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 10.998144
        stop time: 11.148752
        stop time: 11.080160
        stop time: 11.151226
        stop time: 11.216217
        stop time: 11.004452
        stop time: 11.120918
        stop time: 11.080698
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-vck4l        17m          105Mi
        frontend-69b9fdb4c6-g4xgf        7m           3Mi
        movieid-5bb8fb5475-d7wqn         21m          169Mi
        moviereviews-5b578584cd-fwd4d    7m           3Mi
        ubuntu-client-76886f6bbd-wk6sk   13m          0Mi
        user-7cbdb6d567-bjs5c            1m           4Mi
        userreviews-54c668998f-rgbn4     1m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.998144, 11.148752, 11.08016, 11.151226, 11.216217, 11.004452, 11.120918, 11.080698]
    [exp] Throughput: 1801.7902971272695
[test.py] Running 4th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '270.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-7kqmm:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:29:25.143416Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   645.23ms  425.19ms   1.97s    70.90%
        Req/Sec   127.75     75.93   393.00     61.47%
        Latency Distribution
        50%  579.31ms
        75%  910.15ms
        90%    1.24s
        99%    1.80s
        2893 requests in 3.03s, 220.37KB read
        Requests/sec:    954.90
        Transfer/sec:     72.74KB
        [run.sh] Speed is 954.90, duration is 31
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d31s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-584fb6cff6-zr79k        1m           105Mi
        composereview-7f569fb98-pfkhk    1m           3Mi
        frontend-849d7c857-58677         1m           3Mi
        movieid-77b899dd5d-sztkb         1m           169Mi
        movieinfo-5756b74d98-dkszc       1m           176Mi
        moviereviews-7c945848cf-tl25t    1m           3Mi
        page-5b5b9b9765-kgxvt            1m           3Mi
        plot-7fc6797d45-m9bx7            7m           252Mi
        reviewstorage-5974f5cf64-zt84z   7m           3Mi
        ubuntu-client-76886f6bbd-7kqmm   13m          2Mi
        uniqueid-6557f8486-b46qp         7m           3Mi
        user-65bdb79bbf-qpktt            7m           4Mi
        userreviews-6b454947cb-6zqrs     6m           3Mi
        Running 31s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   819.23ms  296.02ms   1.76s    82.94%
        Req/Sec   151.81     63.31   444.00     69.35%
        Latency Distribution
        50%  885.69ms
        75%  976.94ms
        90%    1.07s
        99%    1.27s
        20000 requests in 31.00s, 1.49MB read
        Requests/sec:    645.16
        Transfer/sec:     49.14KB
        ------------------------------
        stop time: 16.227424
        stop time: 16.358470
        stop time: 16.485666
        stop time: 16.513723
        stop time: 16.672631
        stop time: 16.957462
        stop time: 16.871013
        stop time: 17.043000
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [16.227424, 16.35847, 16.485666, 16.513723, 16.672631, 16.957462, 16.871013, 17.043]
    [exp] Throughput: 1201.8383108481028
[test.py] Finished running 4th optmization experiment: groundtruth->1801.7902971272695, slowdown->1201.8383108481028, predicted->1784.020530792427, err->-0.986228328744699
[test.py] Running 5th optmization experiment
[test.py] Running 5th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-d79f7:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:31:15.867474Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   503.15ms  228.61ms   1.20s    74.04%
        Req/Sec   210.92     93.46   444.00     71.81%
        Latency Distribution
        50%  550.08ms
        75%  665.22ms
        90%  747.15ms
        99%  886.26ms
        4826 requests in 3.04s, 367.61KB read
        Requests/sec:   1588.00
        Transfer/sec:    120.96KB
        [run.sh] Speed is 1588.00, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   559.84ms  228.58ms   1.46s    78.21%
        Req/Sec   224.39     73.68   830.00     71.35%
        Latency Distribution
        50%  595.11ms
        75%  690.11ms
        90%  788.29ms
        99%  982.53ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 11.077652
        stop time: 11.309163
        stop time: 11.055419
        stop time: 11.150218
        stop time: 11.392877
        stop time: 11.258128
        stop time: 11.464260
        stop time: 11.440500
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-xwgjl        63m          156Mi
        composereview-77946fb6bc-r5nx9   30m          14Mi
        frontend-69b9fdb4c6-rnxrw        83m          13Mi
        movieid-5bb8fb5475-9s2dh         10m          187Mi
        movieinfo-6c5f868dc9-5bhms       49m          195Mi
        moviereviews-7999658c67-b5tt5    299m         21Mi
        page-c8c664d8-ml2z9              432m         91Mi
        plot-7954886fb-hkdgc             12m          303Mi
        reviewstorage-864bd74b5-74l9n    25m          12Mi
        ubuntu-client-76886f6bbd-d79f7   2m           69Mi
        uniqueid-d47d645ff-kbhcm         1m           8Mi
        user-7cbdb6d567-lq4fh            19m          8Mi
        userreviews-54c668998f-mwts4     12m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.077652, 11.309163, 11.055419, 11.150218, 11.392877, 11.258128, 11.46426, 11.4405]
    [exp] Throughput: 1774.8548482106971
[test.py] Running 5th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-mnqwk:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:33:03.872834Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   689.95ms  312.78ms   1.62s    73.18%
        Req/Sec   146.51     73.37   363.00     65.45%
        Latency Distribution
        50%  730.21ms
        75%  885.12ms
        90%    1.05s
        99%    1.36s
        3270 requests in 3.03s, 249.08KB read
        Requests/sec:   1078.03
        Transfer/sec:     82.12KB
        [run.sh] Speed is 1078.03, duration is 27
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d27s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 27s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   766.24ms  293.65ms   1.72s    81.73%
        Req/Sec   161.28     62.31   424.00     71.46%
        Latency Distribution
        50%  835.02ms
        75%  926.86ms
        90%    1.02s
        99%    1.28s
        20000 requests in 27.00s, 1.49MB read
        Requests/sec:    740.74
        Transfer/sec:     56.42KB
        ------------------------------
        stop time: 15.114629
        stop time: 15.306807
        stop time: 15.430820
        stop time: 15.643864
        stop time: 15.774759
        stop time: 16.060269
        stop time: 16.171987
        stop time: 16.121276
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6cf8b4d4cd-6ccfb        28m          60Mi
        composereview-68df5c8b69-x2876   8m           14Mi
        frontend-799c846966-vn4zs        41m          13Mi
        movieid-8548d5974f-28tp7         5m           189Mi
        movieinfo-7d69884888-dxg6k       23m          212Mi
        moviereviews-7c945848cf-cmdx8    243m         23Mi
        page-695b455467-htv2n            221m         105Mi
        plot-d96fc88c-jxjs5              11m          324Mi
        reviewstorage-5f7f65d55d-2vgkq   3m           13Mi
        ubuntu-client-76886f6bbd-mnqwk   233m         98Mi
        uniqueid-695fb7f99f-n2k2p        7m           8Mi
        user-76f986b775-q2thq            15m          8Mi
        userreviews-758d866f69-9bshc     9m           8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [15.114629, 15.306807, 15.43082, 15.643864, 15.774759, 16.060269, 16.171987, 16.121276]
    [exp] Throughput: 1273.6378123197726
[test.py] Finished running 5th optmization experiment: groundtruth->1774.8548482106971, slowdown->1273.6378123197726, predicted->1789.2926924895116, err->0.8134661994117369
[test.py] Running 6th optmization experiment
[test.py] Running 6th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '600', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-vf5fd:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:34:52.843293Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   419.98ms  218.56ms   1.22s    71.13%
        Req/Sec   199.46     97.22   500.00     66.38%
        Latency Distribution
        50%  441.19ms
        75%  563.98ms
        90%  669.91ms
        99%    1.01s
        4628 requests in 3.02s, 352.52KB read
        Requests/sec:   1531.24
        Transfer/sec:    116.64KB
        [run.sh] Speed is 1531.24, duration is 19
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d19s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 19s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   544.36ms  221.94ms   1.42s    77.56%
        Req/Sec   223.56     74.64   525.00     71.27%
        Latency Distribution
        50%  590.70ms
        75%  679.85ms
        90%  763.77ms
        99%  929.38ms
        20000 requests in 19.00s, 1.49MB read
        Requests/sec:   1052.62
        Transfer/sec:     80.18KB
        ------------------------------
        stop time: 10.737873
        stop time: 10.771895
        stop time: 11.137635
        stop time: 11.316529
        stop time: 11.422224
        stop time: 11.533162
        stop time: 11.637129
        stop time: 11.662090
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-pwkmj        369m         62Mi
        composereview-77946fb6bc-bn7xb   105m         12Mi
        frontend-69b9fdb4c6-7sgc5        157m         12Mi
        movieid-5bb8fb5475-26kdb         27m          176Mi
        movieinfo-6c5f868dc9-488ns       190m         239Mi
        moviereviews-547d54f4b8-4sf8d    1196m        21Mi
        page-c8c664d8-w6hts              1569m        85Mi
        plot-7954886fb-4xpjn             311m         146Mi
        reviewstorage-864bd74b5-xs4rq    217m         15Mi
        ubuntu-client-76886f6bbd-vf5fd   717m         99Mi
        uniqueid-d47d645ff-zsss6         33m          7Mi
        user-7cbdb6d567-48pp9            37m          8Mi
        userreviews-54c668998f-2vqvx     24m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.737873, 10.771895, 11.137635, 11.316529, 11.422224, 11.533162, 11.637129, 11.66209]
    [exp] Throughput: 1773.471454098175
[test.py] Running 6th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '200.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '180.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-rlh4b:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:36:40.917317Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   568.88ms  364.07ms   1.96s    71.70%
        Req/Sec   142.05     80.39   610.00     69.13%
        Latency Distribution
        50%  514.06ms
        75%  821.45ms
        90%    1.00s
        99%    1.73s
        3290 requests in 3.03s, 250.61KB read
        Requests/sec:   1084.85
        Transfer/sec:     82.63KB
        [run.sh] Speed is 1084.85, duration is 27
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d27s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 27s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   743.14ms  267.73ms   1.61s    83.29%
        Req/Sec   170.33     66.36     0.92k    73.81%
        Latency Distribution
        50%  797.74ms
        75%  880.56ms
        90%  965.12ms
        99%    1.18s
        20000 requests in 27.00s, 1.49MB read
        Requests/sec:    740.74
        Transfer/sec:     56.42KB
        ------------------------------
        stop time: 14.657515
        stop time: 14.866661
        stop time: 14.959007
        stop time: 15.016328
        stop time: 15.020237
        stop time: 15.190148
        stop time: 15.044839
        stop time: 15.044531
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-79cd56f655-cd2xx        2m           58Mi
        composereview-856b94748b-9hw49   3m           13Mi
        frontend-9b9bd8bb9-stkmt         1m           13Mi
        movieid-6cbbcc5978-78nkc         1m           177Mi
        movieinfo-6c45df58b9-gqkj8       1m           219Mi
        moviereviews-7c945848cf-2rnh8    1m           22Mi
        page-66f8cc7bd6-pmcgh            1m           97Mi
        plot-9c577d4fd-hbmrt             32m          146Mi
        reviewstorage-77c45c4566-6m2rd   19m          15Mi
        ubuntu-client-76886f6bbd-rlh4b   347m         70Mi
        uniqueid-5ccb4f955d-7nf9c        10m          8Mi
        user-57786cf964-mr4fc            24m          8Mi
        userreviews-67bfb48488-xdbhp     14m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [14.657515, 14.866661, 14.959007, 15.016328, 15.020237, 15.190148, 15.044839, 15.044531]
    [exp] Throughput: 1335.5674483013945
[test.py] Finished running 6th optmization experiment: groundtruth->1773.471454098175, slowdown->1335.5674483013945, predicted->1761.4087255427037, err->-0.6801760765642132
[test.py] Running 7th optmization experiment
[test.py] Running 7th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '700', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-rzxxh:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:38:29.946470Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   468.69ms  280.09ms   1.73s    72.51%
        Req/Sec   191.07     91.17   555.00     71.12%
        Latency Distribution
        50%  459.03ms
        75%  642.22ms
        90%  781.67ms
        99%    1.45s
        4441 requests in 3.03s, 338.28KB read
        Requests/sec:   1464.17
        Transfer/sec:    111.53KB
        [run.sh] Speed is 1464.17, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   563.73ms  213.79ms   1.14s    81.15%
        Req/Sec   223.00     66.30   580.00     68.75%
        Latency Distribution
        50%  609.49ms
        75%  683.54ms
        90%  755.36ms
        99%  896.76ms
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 11.003288
        stop time: 11.237203
        stop time: 11.374910
        stop time: 11.284601
        stop time: 11.439845
        stop time: 11.375309
        stop time: 11.478827
        stop time: 11.495933
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-g4dg2        1m           104Mi
        composereview-77946fb6bc-x77v8   1m           3Mi
        frontend-69b9fdb4c6-swlvq        1m           3Mi
        movieid-5bb8fb5475-4zb56         1m           185Mi
        movieinfo-6c5f868dc9-vk754       1m           176Mi
        moviereviews-79c4f996cc-jglp6    1m           3Mi
        page-c8c664d8-mplwm              7m           3Mi
        plot-7954886fb-smxbg             7m           277Mi
        reviewstorage-864bd74b5-4fpqh    7m           3Mi
        ubuntu-client-76886f6bbd-rzxxh   2m           0Mi
        uniqueid-d47d645ff-fppfl         4m           3Mi
        user-7cbdb6d567-nlt8c            1m           4Mi
        userreviews-54c668998f-kv859     1m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.003288, 11.237203, 11.37491, 11.284601, 11.439845, 11.375309, 11.478827, 11.495933]
    [exp] Throughput: 1764.2534810595705
[test.py] Running 7th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '150.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '135.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '676.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-brmtk:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:40:17.982924Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   598.82ms  260.94ms   1.48s    75.35%
        Req/Sec   168.19     85.85   505.00     67.13%
        Latency Distribution
        50%  622.02ms
        75%  759.87ms
        90%  897.78ms
        99%    1.20s
        3688 requests in 3.04s, 280.92KB read
        Requests/sec:   1215.07
        Transfer/sec:     92.55KB
        [run.sh] Speed is 1215.07, duration is 24
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d24s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 24s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   687.49ms  256.11ms   1.65s    81.58%
        Req/Sec   178.64     62.18   430.00     72.02%
        Latency Distribution
        50%  741.66ms
        75%  828.52ms
        90%  915.39ms
        99%    1.11s
        20000 requests in 24.00s, 1.49MB read
        Requests/sec:    833.33
        Transfer/sec:     63.48KB
        ------------------------------
        stop time: 13.443197
        stop time: 13.942875
        stop time: 13.972280
        stop time: 14.217692
        stop time: 14.296789
        stop time: 14.418284
        stop time: 14.529001
        stop time: 14.288651
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-7cb64bc57f-vvq8l        75m          157Mi
        composereview-69787ffbdc-ck7j8   29m          13Mi
        frontend-59995dfbc6-t7qg6        62m          13Mi
        movieid-84fc46956c-pn4ws         10m          172Mi
        movieinfo-7494bd5fc-rhxq8        52m          192Mi
        moviereviews-7c945848cf-c84tl    573m         21Mi
        page-698599b4cd-bghgp            502m         93Mi
        plot-7996d4694b-n57bn            27m          289Mi
        reviewstorage-649875d4f4-mztmp   30m          13Mi
        ubuntu-client-76886f6bbd-brmtk   3m           64Mi
        uniqueid-66598b7d57-xd2ft        1m           7Mi
        user-5496c9c6c-mjgqr             7m           8Mi
        userreviews-5db86b8b7f-22lhj     7m           6Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [13.443197, 13.942875, 13.97228, 14.217692, 14.296789, 14.418284, 14.529001, 14.288651]
    [exp] Throughput: 1414.5676008550672
[test.py] Finished running 7th optmization experiment: groundtruth->1764.2534810595705, slowdown->1414.5676008550672, predicted->1750.8035795462256, err->-0.7623565240334517
[test.py] Running 8th optmization experiment
[test.py] Running 8th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '800', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-mtqcl:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:42:07.176613Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   458.72ms  259.91ms   1.30s    68.91%
        Req/Sec   194.10     81.84   505.00     70.13%
        Latency Distribution
        50%  468.74ms
        75%  642.86ms
        90%  780.08ms
        99%    1.09s
        4510 requests in 3.03s, 343.54KB read
        Requests/sec:   1487.76
        Transfer/sec:    113.33KB
        [run.sh] Speed is 1487.76, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   568.80ms  213.39ms   1.66s    82.74%
        Req/Sec   220.41     69.08   830.00     69.83%
        Latency Distribution
        50%  611.63ms
        75%  676.90ms
        90%  747.62ms
        99%  979.53ms
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 11.316515
        stop time: 11.520764
        stop time: 11.581510
        stop time: 11.530900
        stop time: 11.567174
        stop time: 11.374273
        stop time: 11.739440
        stop time: 11.618106
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-qjf85        22m          63Mi
        composereview-77946fb6bc-ckjcv   6m           14Mi
        frontend-69b9fdb4c6-zfpxj        45m          13Mi
        movieid-5bb8fb5475-g4rbn         5m           173Mi
        movieinfo-6c5f868dc9-4klcn       25m          207Mi
        moviereviews-8779d6c4b-9k65d     275m         22Mi
        page-c8c664d8-5xstd              302m         100Mi
        plot-7954886fb-s562j             23m          315Mi
        reviewstorage-864bd74b5-2r4k5    8m           14Mi
        ubuntu-client-76886f6bbd-mtqcl   286m         99Mi
        uniqueid-d47d645ff-qzhf9         9m           8Mi
        user-7cbdb6d567-rnwkh            18m          7Mi
        userreviews-54c668998f-lzmh5     11m          7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.316515, 11.520764, 11.58151, 11.5309, 11.567174, 11.374273, 11.73944, 11.618106]
    [exp] Throughput: 1734.4421246040133
[test.py] Running 8th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '100.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '90.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '902.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-rqm5q:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:43:55.186301Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   515.99ms  330.17ms   1.80s    72.25%
        Req/Sec   172.53     73.37   360.00     68.30%
        Latency Distribution
        50%  475.00ms
        75%  741.65ms
        90%  907.78ms
        99%    1.47s
        3942 requests in 3.03s, 300.27KB read
        Requests/sec:   1302.11
        Transfer/sec:     99.18KB
        [run.sh] Speed is 1302.11, duration is 23
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 23s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   655.79ms  244.09ms   1.29s    82.83%
        Req/Sec   187.53     67.49   606.00     74.13%
        Latency Distribution
        50%  720.15ms
        75%  792.86ms
        90%  861.49ms
        99%    1.01s
        20000 requests in 23.00s, 1.49MB read
        Requests/sec:    869.56
        Transfer/sec:     66.24KB
        ------------------------------
        stop time: 12.898744
        stop time: 13.110187
        stop time: 13.738304
        stop time: 13.476390
        stop time: 13.755590
        stop time: 13.672690
        stop time: 13.754415
        stop time: 14.271131
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-7f4849cb66-chbm4        344m         62Mi
        composereview-5677885566-7fp9w   108m         12Mi
        frontend-745dcd6f4f-b8jcw        88m          13Mi
        movieid-8dd4b5c4-pmgnc           30m          188Mi
        movieinfo-5bdfcd4c96-skzq2       203m         238Mi
        moviereviews-7c945848cf-6w8md    743m         23Mi
        page-67dff8d45f-hjp6g            700m         98Mi
        plot-758866c95f-tnpxs            268m         154Mi
        reviewstorage-5c4f9bd4b6-jxxg6   185m         16Mi
        ubuntu-client-76886f6bbd-rqm5q   567m         99Mi
        uniqueid-85d5c7cd48-vnngr        30m          8Mi
        user-74b49c6877-p4bjm            40m          9Mi
        userreviews-f5b8bc978-bvkn6      24m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.898744, 13.110187, 13.738304, 13.47639, 13.75559, 13.67269, 13.754415, 14.271131]
    [exp] Throughput: 1472.2465288590547
[test.py] Finished running 8th optmization experiment: groundtruth->1734.4421246040133, slowdown->1472.2465288590547, predicted->1698.5857436884128, err->-2.0673149254713143
[test.py] Running 9th optmization experiment
[test.py] Running 9th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '900', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-97fgx:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:45:44.569553Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   467.39ms  276.86ms   1.46s    67.48%
        Req/Sec   195.22     82.65   450.00     67.41%
        Latency Distribution
        50%  455.27ms
        75%  675.01ms
        90%  815.57ms
        99%    1.14s
        4459 requests in 3.04s, 339.65KB read
        Requests/sec:   1467.01
        Transfer/sec:    111.74KB
        [run.sh] Speed is 1467.01, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   569.96ms  207.78ms   1.05s    83.41%
        Req/Sec   213.56     75.70   820.00     73.90%
        Latency Distribution
        50%  628.23ms
        75%  685.27ms
        90%  741.83ms
        99%  854.98ms
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 11.173759
        stop time: 11.615265
        stop time: 11.410687
        stop time: 11.708681
        stop time: 12.008218
        stop time: 11.905278
        stop time: 12.289406
        stop time: 12.256567
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-bc5vv        1m           60Mi
        composereview-77946fb6bc-gbns2   1m           13Mi
        frontend-69b9fdb4c6-cn5rs        128m         13Mi
        movieid-5bb8fb5475-49fpb         22m          176Mi
        movieinfo-6c5f868dc9-6k9l7       1m           213Mi
        moviereviews-564874684c-kb4n8    1271m        24Mi
        page-c8c664d8-dgt2q              1225m        90Mi
        plot-7954886fb-gw9d4             1m           155Mi
        reviewstorage-864bd74b5-5l557    1m           16Mi
        ubuntu-client-76886f6bbd-97fgx   324m         72Mi
        uniqueid-d47d645ff-4lwnd         4m           8Mi
        user-7cbdb6d567-sfnlh            18m          8Mi
        userreviews-54c668998f-9slc5     10m          7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.173759, 11.615265, 11.410687, 11.708681, 12.008218, 11.905278, 12.289406, 12.256567]
    [exp] Throughput: 1695.4924939964465
[test.py] Running 9th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '50.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '45.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '225.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '451.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-lwrvr:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:47:33.763631Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   472.98ms  255.70ms   1.26s    68.35%
        Req/Sec   173.04     79.74   380.00     67.69%
        Latency Distribution
        50%  495.96ms
        75%  681.03ms
        90%  776.43ms
        99%  997.27ms
        3984 requests in 3.03s, 303.47KB read
        Requests/sec:   1314.28
        Transfer/sec:    100.11KB
        [run.sh] Speed is 1314.28, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   615.80ms  222.28ms   1.34s    83.71%
        Req/Sec   198.06     61.92   470.00     71.53%
        Latency Distribution
        50%  681.90ms
        75%  727.38ms
        90%  782.89ms
        99%  930.22ms
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.09
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 12.080402
        stop time: 12.236536
        stop time: 12.458399
        stop time: 12.741863
        stop time: 12.933537
        stop time: 12.995834
        stop time: 13.285009
        stop time: 13.170589
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5d6cbb775d-cpx2g        1m           105Mi
        composereview-6f9bcc87df-hl6l4   1m           3Mi
        frontend-66c96c8cc4-tr9q9        7m           3Mi
        plot-789df7547-5sk6v             7m           266Mi
        reviewstorage-6d495857fb-7qzh6   7m           3Mi
        ubuntu-client-76886f6bbd-lwrvr   0m           0Mi
        uniqueid-7f7ddd4585-qhj5t        1m           3Mi
        user-7675998b75-7g2pb            1m           4Mi
        userreviews-7cf49c487f-n2nkz     1m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.080402, 12.236536, 12.458399, 12.741863, 12.933537, 12.995834, 13.285009, 13.170589]
    [exp] Throughput: 1570.1334090346986
[test.py] Finished running 9th optmization experiment: groundtruth->1695.4924939964465, slowdown->1570.1334090346986, predicted->1690.234011683301, err->-0.31014482999866183
[test.py] Baseline throughput:  1614.4210256866797
[test.py] Groundtruth:  [1738.8166161837487, 1807.1552550346728, 1724.7591045128343, 1738.0838626984576, 1801.7902971272695, 1774.8548482106971, 1773.471454098175, 1764.2534810595705, 1734.4421246040133, 1695.4924939964465]
[test.py] Slowdown:  [966.9183744550221, 1009.6820557904111, 1059.1472717935144, 1127.5012523015473, 1201.8383108481028, 1273.6378123197726, 1335.5674483013945, 1414.5676008550672, 1472.2465288590547, 1570.1334090346986]
[test.py] Predicted:  [1719.1924758740834, 1714.9121049332673, 1717.8596222614833, 1753.969144884214, 1784.020530792427, 1789.2926924895116, 1761.4087255427037, 1750.8035795462256, 1698.5857436884128, 1690.234011683301]
[test.py] Error percentage:  [-1.1285917173218203, -5.104329019015894, -0.400025849018477, 0.9139537237917778, -0.986228328744699, 0.8134661994117369, -0.6801760765642132, -0.7623565240334517, -2.0673149254713143, -0.31014482999866183]
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 1...
[test.py] Actual processing time range: [0, 100, 200, 300, 400, 500, 600, 700, 800, 900]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-gtndz:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:49:22.009977Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   578.06ms  223.45ms   1.08s    79.48%
        Req/Sec   175.13     82.85   560.00     68.40%
        Latency Distribution
        50%  629.93ms
        75%  716.84ms
        90%  790.89ms
        99%  921.33ms
        4064 requests in 3.03s, 309.56KB read
        Requests/sec:   1339.40
        Transfer/sec:    102.02KB
        [run.sh] Speed is 1339.40, duration is 22
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 22s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   623.06ms  219.97ms   1.33s    84.19%
        Req/Sec   200.58     61.56   690.00     76.53%
        Latency Distribution
        50%  680.52ms
        75%  722.75ms
        90%  776.10ms
        99%  958.97ms
        20000 requests in 22.00s, 1.49MB read
        Requests/sec:    909.08
        Transfer/sec:     69.25KB
        ------------------------------
        stop time: 12.260143
        stop time: 12.353157
        stop time: 12.612564
        stop time: 12.586808
        stop time: 12.653810
        stop time: 12.668457
        stop time: 12.665868
        stop time: 12.530641
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-79v27        1m           120Mi
        composereview-77946fb6bc-6q757   1m           13Mi
        frontend-69b9fdb4c6-fq5qv        1m           16Mi
        movieid-5bb8fb5475-c6h7c         1m           188Mi
        movieinfo-6c5f868dc9-zrzds       1m           183Mi
        moviereviews-7c945848cf-jrm5t    1m           17Mi
        page-c8c664d8-c5pbb              1m           71Mi
        plot-7954886fb-jsmnk             0m           269Mi
        reviewstorage-864bd74b5-f4qln    7m           9Mi
        ubuntu-client-76886f6bbd-gtndz   12m          58Mi
        uniqueid-d47d645ff-6hk2r         1m           7Mi
        user-7cbdb6d567-d947k            7m           7Mi
        userreviews-54c668998f-s2klg     6m           5Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [12.260143, 12.353157, 12.612564, 12.586808, 12.65381, 12.668457, 12.665868, 12.530641]
    [exp] Throughput: 1594.7143511773097
[test.py] Baseline throughput: 1594.7143511773097
[test.py] Running 0th optmization experiment
[test.py] Running 0th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-fgncw:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:51:10.129548Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   446.17ms  231.18ms   1.12s    71.09%
        Req/Sec   208.99    113.69   680.00     67.24%
        Latency Distribution
        50%  471.17ms
        75%  615.72ms
        90%  714.35ms
        99%  921.80ms
        4856 requests in 3.03s, 369.89KB read
        Requests/sec:   1601.40
        Transfer/sec:    121.98KB
        [run.sh] Speed is 1601.40, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   550.81ms  227.85ms   1.25s    78.19%
        Req/Sec   226.08     71.01   650.00     70.22%
        Latency Distribution
        50%  588.70ms
        75%  679.09ms
        90%  775.31ms
        99%  983.63ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 10.737142
        stop time: 11.036799
        stop time: 11.218759
        stop time: 11.385276
        stop time: 11.278411
        stop time: 11.061245
        stop time: 11.221614
        stop time: 11.533136
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-tpr6s        130m         158Mi
        composereview-77946fb6bc-x8bsj   49m          13Mi
        frontend-69b9fdb4c6-59lrh        86m          13Mi
        movieid-5bb8fb5475-jzpdb         13m          187Mi
        movieinfo-6c5f868dc9-lph2d       74m          198Mi
        moviereviews-576c9f7998-vt6b9    164m         16Mi
        page-c8c664d8-ng85q              624m         89Mi
        plot-7954886fb-8fwvg             76m          307Mi
        reviewstorage-864bd74b5-c6scs    68m          10Mi
        ubuntu-client-76886f6bbd-fgncw   307m         60Mi
        uniqueid-d47d645ff-rhgtm         12m          8Mi
        user-7cbdb6d567-xd9ch            21m          8Mi
        userreviews-54c668998f-v7vl9     13m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.737142, 11.036799, 11.218759, 11.385276, 11.278411, 11.061245, 11.221614, 11.533136]
    [exp] Throughput: 1788.261320683292
[test.py] Running 0th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-8dhkl:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:52:58.281441Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   928.90ms  393.74ms   1.86s    71.26%
        Req/Sec   106.33     76.75   434.00     72.45%
        Latency Distribution
        50%  999.93ms
        75%    1.19s
        90%    1.35s
        99%    1.53s
        2244 requests in 3.04s, 170.93KB read
        Requests/sec:    737.85
        Transfer/sec:     56.20KB
        [run.sh] Speed is 737.85, duration is 40
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d40s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-77dcb4fbbb-lzdv6        60m          60Mi
        composereview-59d898df89-htk9z   18m          14Mi
        frontend-7fc5c8db46-wcrcj        50m          14Mi
        movieid-6b645b64f7-dcgts         7m           174Mi
        movieinfo-75cd7b4cd4-mmx8d       43m          213Mi
        moviereviews-7c945848cf-7srzc    481m         22Mi
        page-94db5f979-nx68f             438m         102Mi
        plot-cf58b89dc-6g4jm             23m          317Mi
        reviewstorage-7864fcfcb8-bgqrj   20m          15Mi
        ubuntu-client-76886f6bbd-8dhkl   326m         105Mi
        uniqueid-5d89464895-tc4pv        20m          8Mi
        user-84cb5b9fff-9b2cf            25m          8Mi
        userreviews-7d6cfc64c7-xmlhc     16m          9Mi
        Running 40s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.00s   378.79ms   2.64s    80.08%
        Req/Sec   123.28     57.35   343.00     67.83%
        Latency Distribution
        50%    1.09s
        75%    1.21s
        90%    1.34s
        99%    1.65s
        20000 requests in 40.00s, 1.49MB read
        Requests/sec:    500.00
        Transfer/sec:     38.09KB
        ------------------------------
        stop time: 19.850669
        stop time: 20.214785
        stop time: 20.216600
        stop time: 20.671421
        stop time: 20.775042
        stop time: 20.967109
        stop time: 20.993162
        stop time: 20.921784
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [19.850669, 20.214785, 20.2166, 20.671421, 20.775042, 20.967109, 20.993162, 20.921784]
    [exp] Throughput: 971.9910334799151
[test.py] Finished running 0th optmization experiment: groundtruth->1788.261320683292, slowdown->971.9910334799151, predicted->1735.29453061143, err->-2.961915546639657
[test.py] Running 1th optmization experiment
[test.py] Running 1th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '100', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-v9lzt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:54:58.077693Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   403.42ms  228.65ms   1.43s    66.75%
        Req/Sec   203.41    110.30   620.00     68.53%
        Latency Distribution
        50%  392.21ms
        75%  566.16ms
        90%  702.46ms
        99%  913.61ms
        4725 requests in 3.03s, 359.91KB read
        Requests/sec:   1561.32
        Transfer/sec:    118.93KB
        [run.sh] Speed is 1561.32, duration is 19
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d19s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 19s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   538.55ms  218.29ms   1.23s    78.65%
        Req/Sec   225.65     85.88   717.00     75.34%
        Latency Distribution
        50%  587.20ms
        75%  664.59ms
        90%  741.59ms
        99%  915.09ms
        20000 requests in 19.00s, 1.49MB read
        Requests/sec:   1052.62
        Transfer/sec:     80.18KB
        ------------------------------
        stop time: 10.732650
        stop time: 10.492158
        stop time: 10.930433
        stop time: 11.142529
        stop time: 11.331867
        stop time: 11.453204
        stop time: 11.579300
        stop time: 11.577070
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-r2kbj        151m         63Mi
        composereview-77946fb6bc-dxqjv   44m          12Mi
        frontend-69b9fdb4c6-cq6h4        123m         13Mi
        movieid-5bb8fb5475-79msn         15m          179Mi
        movieinfo-6c5f868dc9-cgtn7       113m         216Mi
        moviereviews-79f4fbf6c-7mp28     351m         21Mi
        page-c8c664d8-66w5c              988m         94Mi
        plot-7954886fb-jz9jc             74m          153Mi
        reviewstorage-864bd74b5-66n5h    66m          14Mi
        ubuntu-client-76886f6bbd-v9lzt   626m         99Mi
        uniqueid-d47d645ff-mflhf         35m          8Mi
        user-7cbdb6d567-kv7hv            48m          9Mi
        userreviews-54c668998f-tqksj     29m          8Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.73265, 10.492158, 10.930433, 11.142529, 11.331867, 11.453204, 11.5793, 11.57707]
    [exp] Throughput: 1792.933825916502
[test.py] Running 1th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '405.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '2029.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4059.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-gvw6w:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:56:46.049242Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   767.42ms  478.34ms   1.88s    66.67%
        Req/Sec   105.05     68.98   320.00     68.42%
        Latency Distribution
        50%  713.64ms
        75%    1.15s
        90%    1.47s
        99%    1.82s
        2310 requests in 3.02s, 175.96KB read
        Requests/sec:    763.87
        Transfer/sec:     58.19KB
        [run.sh] Speed is 763.87, duration is 39
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d39s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5b9c9fd788-dnghd        232m         61Mi
        composereview-5c75d8bd89-f2fph   76m          13Mi
        frontend-568568858-rrtr9         128m         13Mi
        movieid-7b9bbdbf7c-2c55z         22m          176Mi
        movieinfo-5b6d77cdd6-dq9rw       143m         218Mi
        moviereviews-7c945848cf-7ms6d    1280m        23Mi
        page-7585b788cc-k5snc            1107m        87Mi
        plot-6899667989-jjkv7            182m         153Mi
        reviewstorage-6754b5bbd6-zb2kw   114m         16Mi
        ubuntu-client-76886f6bbd-gvw6w   535m         99Mi
        uniqueid-756c5ddb99-xf2k4        17m          8Mi
        user-fb956797-2nkpz              31m          8Mi
        userreviews-7cd4bc866f-x8rsd     20m          9Mi
        Running 39s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   953.21ms  358.27ms   1.91s    80.71%
        Req/Sec   130.21     65.64   520.00     67.63%
        Latency Distribution
        50%    1.04s
        75%    1.16s
        90%    1.27s
        99%    1.51s
        20000 requests in 39.00s, 1.49MB read
        Requests/sec:    512.82
        Transfer/sec:     39.06KB
        ------------------------------
        stop time: 19.107308
        stop time: 19.009773
        stop time: 19.359110
        stop time: 19.573353
        stop time: 19.690900
        stop time: 19.939518
        stop time: 20.035152
        stop time: 20.067482
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [19.107308, 19.009773, 19.35911, 19.573353, 19.6909, 19.939518, 20.035152, 20.067482]
    [exp] Throughput: 1020.5214359379531
[test.py] Finished running 1th optmization experiment: groundtruth->1792.933825916502, slowdown->1020.5214359379531, predicted->1746.417698640953, err->-2.5944140605284844
[test.py] Running 2th optmization experiment
[test.py] Running 2th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '200', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-958km:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T18:58:43.926427Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   481.83ms  213.93ms   1.21s    75.89%
        Req/Sec   221.16     99.12   530.00     68.75%
        Latency Distribution
        50%  518.75ms
        75%  615.96ms
        90%  703.29ms
        99%  936.03ms
        4998 requests in 3.04s, 380.71KB read
        Requests/sec:   1645.70
        Transfer/sec:    125.36KB
        [run.sh] Speed is 1645.70, duration is 18
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d18s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 18s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   552.00ms  219.87ms   1.16s    79.20%
        Req/Sec   222.75     73.04   490.00     72.23%
        Latency Distribution
        50%  594.62ms
        75%  680.49ms
        90%  765.41ms
        99%  925.23ms
        20000 requests in 18.00s, 1.49MB read
        Requests/sec:   1111.10
        Transfer/sec:     84.63KB
        ------------------------------
        stop time: 11.206322
        stop time: 11.279623
        stop time: 11.397800
        stop time: 11.376025
        stop time: 11.390247
        stop time: 11.525483
        stop time: 11.340891
        stop time: 11.300787
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-xwnj6        111m         61Mi
        composereview-77946fb6bc-5sbkr   34m          13Mi
        frontend-69b9fdb4c6-mfcw4        22m          13Mi
        movieid-5bb8fb5475-r72dm         25m          189Mi
        movieinfo-6c5f868dc9-7z2wx       41m          213Mi
        moviereviews-6984997fc6-qq24p    70m          20Mi
        page-c8c664d8-bglwd              138m         79Mi
        plot-7954886fb-jbctk             116m         149Mi
        reviewstorage-864bd74b5-td7pv    71m          13Mi
        ubuntu-client-76886f6bbd-958km   12m          72Mi
        uniqueid-d47d645ff-m48sz         21m          8Mi
        user-7cbdb6d567-vgcv9            1m           8Mi
        userreviews-54c668998f-k565n     1m           9Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [11.206322, 11.279623, 11.3978, 11.376025, 11.390247, 11.525483, 11.340891, 11.300787]
    [exp] Throughput: 1761.7812348232183
[test.py] Running 2th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '400.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '360.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1804.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3608.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-nvqp7:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:00:32.078758Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   835.01ms  361.05ms   1.76s    74.42%
        Req/Sec   113.63     67.52   320.00     71.84%
        Latency Distribution
        50%  922.66ms
        75%    1.08s
        90%    1.20s
        99%    1.50s
        2482 requests in 3.03s, 189.06KB read
        Requests/sec:    819.73
        Transfer/sec:     62.44KB
        [run.sh] Speed is 819.73, duration is 36
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d36s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-f44494697-jln5n         1m           104Mi
        composereview-569976df86-66t2r   7m           3Mi
        frontend-779c8f89cc-96trl        6m           3Mi
        movieid-7b95656cc8-rjg85         7m           185Mi
        movieinfo-78c5c84d59-jfqm2       7m           188Mi
        moviereviews-7c945848cf-w29b6    7m           3Mi
        page-857f965b44-gnb6h            7m           3Mi
        plot-856748f7dd-9j6p6            7m           258Mi
        reviewstorage-856754557d-knktz   6m           3Mi
        ubuntu-client-76886f6bbd-nvqp7   14m          0Mi
        user-5b5ddf4fc4-f8rhv            8m           4Mi
        userreviews-84cfdcddfb-frhbb     4m           3Mi
        Running 36s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   929.83ms  342.12ms   2.20s    81.85%
        Req/Sec   135.97     62.09   550.00     64.73%
        Latency Distribution
        50%  995.20ms
        75%    1.11s
        90%    1.22s
        99%    1.55s
        20000 requests in 36.00s, 1.49MB read
        Requests/sec:    555.55
        Transfer/sec:     42.32KB
        ------------------------------
        stop time: 18.164883
        stop time: 18.895938
        stop time: 18.731904
        stop time: 18.684114
        stop time: 18.570547
        stop time: 18.637704
        stop time: 18.826618
        stop time: 18.894094
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [18.164883, 18.895938, 18.731904, 18.684114, 18.570547, 18.637704, 18.826618, 18.894094]
    [exp] Throughput: 1070.908879428926
[test.py] Finished running 2th optmization experiment: groundtruth->1761.7812348232183, slowdown->1070.908879428926, predicted->1749.0154382915691, err->-0.724596009954101
[test.py] Running 3th optmization experiment
[test.py] Running 3th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '300', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-h5rgw:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:02:26.895777Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   461.20ms  281.37ms   1.61s    70.88%
        Req/Sec   195.10    103.45   500.00     62.50%
        Latency Distribution
        50%  446.99ms
        75%  654.08ms
        90%  795.34ms
        99%    1.17s
        4533 requests in 3.03s, 345.29KB read
        Requests/sec:   1497.41
        Transfer/sec:    114.06KB
        [run.sh] Speed is 1497.41, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   537.01ms  228.88ms   1.26s    76.25%
        Req/Sec   226.85     80.57   810.00     75.00%
        Latency Distribution
        50%  575.48ms
        75%  676.86ms
        90%  775.40ms
        99%  966.19ms
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 10.609051
        stop time: 10.661154
        stop time: 10.832423
        stop time: 11.167534
        stop time: 11.358716
        stop time: 11.480095
        stop time: 11.563370
        stop time: 11.561759
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-rhmhd        1m           105Mi
        composereview-77946fb6bc-wrwwg   1m           3Mi
        frontend-69b9fdb4c6-fsr4s        1m           3Mi
        movieid-5bb8fb5475-p8bhv         1m           168Mi
        movieinfo-6c5f868dc9-5dc5f       1m           177Mi
        moviereviews-7987d4bb45-7hgwq    1m           3Mi
        page-c8c664d8-4lw82              1m           3Mi
        plot-7954886fb-fpwtm             7m           252Mi
        reviewstorage-864bd74b5-dtdn9    7m           3Mi
        ubuntu-client-76886f6bbd-h5rgw   15m          2Mi
        uniqueid-d47d645ff-kn9rb         6m           3Mi
        user-7cbdb6d567-nlgqf            7m           4Mi
        userreviews-54c668998f-ffxvg     6m           3Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.609051, 10.661154, 10.832423, 11.167534, 11.358716, 11.480095, 11.56337, 11.561759]
    [exp] Throughput: 1793.036478363395
[test.py] Running 3th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '350.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '315.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1578.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '3157.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-k5m6j:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:04:16.113248Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   713.17ms  444.34ms   1.98s    65.60%
        Req/Sec   120.54     74.36   380.00     66.34%
        Latency Distribution
        50%  689.37ms
        75%    1.01s
        90%    1.32s
        99%    1.80s
        2651 requests in 3.03s, 201.93KB read
        Requests/sec:    875.46
        Transfer/sec:     66.69KB
        [run.sh] Speed is 875.46, duration is 34
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d34s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-6989c48fdf-mtzwk        45m          145Mi
        composereview-7dd85898f5-c6jn6   17m          12Mi
        frontend-74bff5f744-c2ww6        50m          12Mi
        movieid-64d65fb6c-skhm2          7m           172Mi
        movieinfo-7498d9d9f9-lj4kw       53m          194Mi
        moviereviews-7c945848cf-s5x5m    451m         21Mi
        page-84db6f6cc6-9hwzc            398m         91Mi
        plot-68b8cd76f6-5wpwm            11m          286Mi
        reviewstorage-5456d6f67d-4ntvc   16m          14Mi
        ubuntu-client-76886f6bbd-k5m6j   198m         62Mi
        uniqueid-fd89696b5-sgmnz         1m           7Mi
        user-7747bd845f-lck54            14m          7Mi
        userreviews-64597bd76c-gxrwk     9m           6Mi
        Running 34s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   855.86ms  320.71ms   1.68s    80.83%
        Req/Sec   143.42     61.79   444.00     66.79%
        Latency Distribution
        50%  937.79ms
        75%    1.04s
        90%    1.13s
        99%    1.33s
        20000 requests in 34.00s, 1.49MB read
        Requests/sec:    588.23
        Transfer/sec:     44.81KB
        ------------------------------
        stop time: 16.894158
        stop time: 17.334331
        stop time: 17.453527
        stop time: 17.909112
        stop time: 17.894979
        stop time: 18.101213
        stop time: 18.092618
        stop time: 17.949104
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [16.894158, 17.334331, 17.453527, 17.909112, 17.894979, 18.101213, 18.092618, 17.949104]
    [exp] Throughput: 1129.711800211146
[test.py] Finished running 3th optmization experiment: groundtruth->1793.036478363395, slowdown->1129.711800211146, predicted->1759.324436415713, err->-1.8801648686173276
[test.py] Running 4th optmization experiment
[test.py] Running 4th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '400', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-kxxkp:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:06:09.097655Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   439.21ms  268.86ms   1.24s    65.56%
        Req/Sec   195.11     99.52   515.00     67.24%
        Latency Distribution
        50%  430.75ms
        75%  642.42ms
        90%  788.54ms
        99%    1.09s
        4527 requests in 3.03s, 344.83KB read
        Requests/sec:   1495.88
        Transfer/sec:    113.94KB
        [run.sh] Speed is 1495.88, duration is 20
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d20s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 20s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   552.97ms  226.71ms   1.24s    77.97%
        Req/Sec   220.92     83.81   690.00     71.70%
        Latency Distribution
        50%  592.99ms
        75%  685.32ms
        90%  779.26ms
        99%  959.82ms
        20000 requests in 20.00s, 1.49MB read
        Requests/sec:    999.99
        Transfer/sec:     76.17KB
        ------------------------------
        stop time: 10.944759
        stop time: 11.029584
        stop time: 11.318456
        stop time: 11.188496
        stop time: 11.668451
        stop time: 11.681399
        stop time: 11.778175
        stop time: 11.728309
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-7cjmz        130m         155Mi
        composereview-77946fb6bc-2b592   45m          11Mi
        frontend-69b9fdb4c6-psptf        59m          12Mi
        movieid-5bb8fb5475-qjc2d         11m          171Mi
        movieinfo-6c5f868dc9-9htk8       74m          191Mi
        moviereviews-5b578584cd-bqkdb    209m         21Mi
        page-c8c664d8-6wl26              310m         87Mi
        plot-7954886fb-25zkj             101m         295Mi
        reviewstorage-864bd74b5-hd2gt    71m          13Mi
        ubuntu-client-76886f6bbd-kxxkp   157m         81Mi
        uniqueid-d47d645ff-7mvvq         13m          8Mi
        user-7cbdb6d567-vl9f2            18m          8Mi
        userreviews-54c668998f-k6fps     12m          7Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.944759, 11.029584, 11.318456, 11.188496, 11.668451, 11.681399, 11.778175, 11.728309]
    [exp] Throughput: 1751.7424280851435
[test.py] Running 4th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '300.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '270.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1353.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2706.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-4bv5m:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:07:57.389803Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   765.09ms  337.78ms   1.58s    73.62%
        Req/Sec   134.02     79.57   350.00     62.80%
        Latency Distribution
        50%  810.41ms
        75%  996.39ms
        90%    1.15s
        99%    1.38s
        2892 requests in 3.04s, 220.29KB read
        Requests/sec:    952.40
        Transfer/sec:     72.55KB
        [run.sh] Speed is 952.40, duration is 31
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d31s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-584fb6cff6-9l7pv        241m         60Mi
        composereview-7f569fb98-ssbbx    75m          15Mi
        frontend-849d7c857-9svrk         171m         14Mi
        movieid-77b899dd5d-hz9j9         22m          187Mi
        movieinfo-5756b74d98-czsp2       152m         214Mi
        moviereviews-7c945848cf-vmft5    1476m        22Mi
        page-5b5b9b9765-bmsvv            1285m        99Mi
        plot-7fc6797d45-r9mmk            157m         148Mi
        reviewstorage-5974f5cf64-c7mpg   105m         14Mi
        ubuntu-client-76886f6bbd-4bv5m   659m         101Mi
        uniqueid-6557f8486-xxftv         15m          8Mi
        user-65bdb79bbf-p6jnz            11m          8Mi
        userreviews-6b454947cb-mr5v4     8m           9Mi
        Running 31s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   809.69ms  305.53ms   1.94s    81.53%
        Req/Sec   151.98     62.17   414.00     69.44%
        Latency Distribution
        50%  881.26ms
        75%  978.23ms
        90%    1.08s
        99%    1.28s
        20000 requests in 31.00s, 1.49MB read
        Requests/sec:    645.16
        Transfer/sec:     49.14KB
        ------------------------------
        stop time: 16.012349
        stop time: 16.221026
        stop time: 16.224735
        stop time: 16.552335
        stop time: 16.871358
        stop time: 16.971403
        stop time: 17.011100
        stop time: 17.062942
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [16.012349, 16.221026, 16.224735, 16.552335, 16.871358, 16.971403, 17.0111, 17.062942]
    [exp] Throughput: 1203.665933112525
[test.py] Finished running 4th optmization experiment: groundtruth->1751.7424280851435, slowdown->1203.665933112525, predicted->1788.0506146544344, err->2.072689796580422
[test.py] Running 5th optmization experiment
[test.py] Running 5th groundtruth exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-wshmt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-08T19:09:47.549511Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   504.84ms  220.83ms   1.21s    76.09%
        Req/Sec   206.22     97.48   464.00     67.54%
        Latency Distribution
        50%  554.44ms
        75%  649.20ms
        90%  735.93ms
        99%  917.05ms
        4730 requests in 3.03s, 360.29KB read
        Requests/sec:   1561.37
        Transfer/sec:    118.93KB
        [run.sh] Speed is 1561.37, duration is 19
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d19s -s /wrk/fix_req_n.lua -L http://localhost:3000
        Running 19s test @ http://localhost:3000
        8 threads and 1024 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   533.18ms  217.31ms   1.15s    78.50%
        Req/Sec   230.24     76.25   595.00     70.52%
        Latency Distribution
        50%  574.79ms
        75%  663.77ms
        90%  744.98ms
        99%  905.35ms
        20000 requests in 19.00s, 1.49MB read
        Requests/sec:   1052.62
        Transfer/sec:     80.18KB
        ------------------------------
        stop time: 10.481175
        stop time: 10.817113
        stop time: 10.852102
        stop time: 10.847038
        stop time: 11.055876
        stop time: 11.177150
        stop time: 11.397885
        stop time: 11.350873
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-547df5c749-dhc4w        101m         61Mi
        composereview-77946fb6bc-kpwn2   36m          13Mi
        frontend-69b9fdb4c6-cvp8w        21m          13Mi
        movieid-5bb8fb5475-7qfrc         7m           177Mi
        movieinfo-6c5f868dc9-fxwt7       41m          209Mi
        moviereviews-7999658c67-hns6l    23m          22Mi
        page-c8c664d8-884gm              9m           82Mi
        plot-7954886fb-lpb8k             111m         146Mi
        reviewstorage-864bd74b5-jtjhr    73m          14Mi
        ubuntu-client-76886f6bbd-wshmt   96m          70Mi
        uniqueid-d47d645ff-kgt5z         21m          8Mi
        user-7cbdb6d567-zcgps            42m          8Mi
        userreviews-54c668998f-n4sdf     28m          9Mi
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [10.481175, 10.817113, 10.852102, 10.847038, 11.055876, 11.17715, 11.397885, 11.350873]
    [exp] Throughput: 1818.611423798613
[test.py] Running 5th slowdown exp
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '20000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_CASTINFO': 'false', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '100', 'SLOWPOKE_IS_TARGET_SERVICE_COMPOSEREVIEW': 'false', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '100', 'SLOWPOKE_IS_TARGET_SERVICE_FRONTEND': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEID': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEINFO': 'false', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_MOVIEREVIEWS': 'true', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PAGE': 'false', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '100', 'SLOWPOKE_IS_TARGET_SERVICE_PLOT': 'false', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '100', 'SLOWPOKE_IS_TARGET_SERVICE_REVIEWSTORAGE': 'false', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '100', 'SLOWPOKE_IS_TARGET_SERVICE_UNIQUEID': 'false', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USER': 'false', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '100', 'SLOWPOKE_IS_TARGET_SERVICE_USERREVIEWS': 'false'}
    [exp] Executing cmd `bash run.sh movie mix 8 1024 20000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 1024, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
