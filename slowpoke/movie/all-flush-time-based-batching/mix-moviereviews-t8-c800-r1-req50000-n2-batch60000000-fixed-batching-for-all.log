benchmark                        : movie
num_threads                      : 8
num_conns                        : 800
target_service                   : moviereviews
request_type                     : mix
repetitions                      : 1
target_num_exp                   : 2
pre_run                          : False
num_req                          : 50000
groundtruths                     : []
slowdowns                        : []
predicteds                       : []
errs                             : []
client_cpu_quota                 : 4
random_seed                      : 1234
request_ratio                    : {'castinfo': 0.9050900514, 'composereview': 0.1003336848, 'frontend': 0.1003336848, 'movieid': 0.1003336848, 'movieinfo': 0.9050900514, 'moviereviews': 0.9050900514, 'page': 0.9050900514, 'plot': 0.9050900514, 'reviewstorage': 1.005423736183, 'uniqueid': 0.1003336848, 'user': 0.2006673695, 'userreviews': 0.1003336848}
baseline_service_processing_time : {'castinfo': 0, 'composereview': 0, 'frontend': 0, 'movieid': 0, 'movieinfo': 0, 'moviereviews': 1000, 'page': 0, 'plot': 0, 'reviewstorage': 0, 'uniqueid': 0, 'user': 0, 'userreviews': 0}
cpu_quota                        : {'castinfo': 2, 'composereview': 2, 'frontend': 2, 'movieid': 2, 'movieinfo': 2, 'moviereviews': 2, 'page': 2, 'plot': 2, 'reviewstorage': 2, 'uniqueid': 2, 'user': 2, 'userreviews': 2}
target_processing_time_range     : [0, 1000]
baseline_throughputs             : []
poker_batch                      : 60000000
[test.py] Starting experiment...
[test.py] >>>>>>>>>>>>>>>>>>>>>>>>>>>>> Running experiment 0...
[test.py] Actual processing time range: [0, 500]
[test.py] Running baseline experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '60000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '60000000', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '60000000', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '60000000', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '60000000', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '60000000'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-ldfqg:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-05T23:05:37.522332Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   506.92ms  213.99ms   1.17s    75.86%
        Req/Sec   173.04     57.70   350.00     74.07%
        Latency Distribution
        50%  534.91ms
        75%  634.54ms
        90%  735.76ms
        99%  939.62ms
        3861 requests in 3.02s, 294.10KB read
        Requests/sec:   1277.29
        Transfer/sec:     97.29KB
        [run.sh] Speed is 1277.29, duration is 78
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d78s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-684dff45f4-s4d98        389m         60Mi
        composereview-5bf4d6464d-jm6kz   380m         9Mi
        frontend-6984b9f7d7-nn4cm        544m         10Mi
        movieid-d4877748b-rnsmb          35m          181Mi
        movieinfo-7f4767f7d6-5wg2g       239m         275Mi
        moviereviews-c46db459f-f22pt     1863m        22Mi
        page-57748556bf-nt2jj            1894m        89Mi
        plot-6878c4db7-zstbq             312m         160Mi
        reviewstorage-848dc4d75d-6l9jv   239m         15Mi
        ubuntu-client-76886f6bbd-ldfqg   710m         85Mi
        uniqueid-6cddcbb98-wmmzh         40m          8Mi
        user-7c89cb48b7-cszkz            61m          8Mi
        userreviews-64949557b8-9bsmf     38m          7Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.16s     1.54s   14.93s    86.63%
        Req/Sec   180.55     57.33   400.00     70.80%
        Latency Distribution
        50%  603.45ms
        75%  739.52ms
        90%    3.51s
        99%    7.76s
        50000 requests in 1.30m, 3.72MB read
        Requests/sec:    641.02
        Transfer/sec:     48.83KB
        ------------------------------
        stop time: 49.569971
        stop time: 49.594439
        stop time: 53.493284
        stop time: 53.648149
        stop time: 53.463037
        stop time: 53.876616
        stop time: 53.848313
        stop time: 53.684096
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [49.569971, 49.594439, 53.493284, 53.648149, 53.463037, 53.876616, 53.848313, 53.684096]
    [exp] Throughput: 949.7174359134532
[test.py] Baseline throughput: 949.7174359134532
[test.py] Running groundtruth experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '0', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '60000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '60000000', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '60000000', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '60000000', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '60000000', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '60000000'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-csvk2:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-05T23:08:15.006375Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   386.06ms  188.21ms 969.62ms   71.13%
        Req/Sec   173.81     75.97   393.00     63.79%
        Latency Distribution
        50%  409.86ms
        75%  512.83ms
        90%  609.50ms
        99%  783.74ms
        4060 requests in 3.02s, 309.26KB read
        Requests/sec:   1343.66
        Transfer/sec:    102.35KB
        [run.sh] Speed is 1343.66, duration is 74
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d74s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-684dff45f4-8xq2s        0m           104Mi
        composereview-5bf4d6464d-7vbv6   1m           3Mi
        frontend-6984b9f7d7-8wlhf        1m           3Mi
        movieid-d4877748b-xbbvh          1m           169Mi
        movieinfo-7f4767f7d6-5768p       1m           176Mi
        moviereviews-844498c864-zngff    1m           3Mi
        page-57748556bf-58wjw            1m           3Mi
        plot-6878c4db7-5fnt7             7m           253Mi
        reviewstorage-848dc4d75d-qbp5f   3m           3Mi
        ubuntu-client-76886f6bbd-csvk2   13m          33Mi
        uniqueid-6cddcbb98-lgrms         1m           3Mi
        user-7c89cb48b7-k544x            7m           4Mi
        userreviews-64949557b8-86q5g     7m           3Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   518.93ms  213.67ms   1.57s    77.38%
        Req/Sec   192.34     60.60   585.00     68.51%
        Latency Distribution
        50%  548.06ms
        75%  647.23ms
        90%  744.51ms
        99%  934.39ms
        50000 requests in 1.23m, 3.72MB read
        Requests/sec:    675.67
        Transfer/sec:     51.47KB
        ------------------------------
        stop time: 32.331024
        stop time: 32.645302
        stop time: 32.725789
        stop time: 32.994280
        stop time: 32.882041
        stop time: 32.794384
        stop time: 32.850525
        stop time: 32.613069
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [32.331024, 32.645302, 32.725789, 32.99428, 32.882041, 32.794384, 32.850525, 32.613069]
    [exp] Throughput: 1527.6713956218478
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '500', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '60000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '60000000', 'SLOWPOKE_DELAY_MICROS_PAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_PLOT': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '60000000', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '60000000', 'SLOWPOKE_DELAY_MICROS_USER': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '60000000', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '60000000'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-vdhbj:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-05T23:10:48.441515Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   496.70ms  213.47ms   1.15s    75.88%
        Req/Sec   173.70     64.54   333.00     71.12%
        Latency Distribution
        50%  529.18ms
        75%  632.27ms
        90%  718.84ms
        99%  910.35ms
        4042 requests in 3.02s, 307.89KB read
        Requests/sec:   1336.65
        Transfer/sec:    101.81KB
        [run.sh] Speed is 1336.65, duration is 74
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d74s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-684dff45f4-qhp4g        130m         63Mi
        composereview-5bf4d6464d-9wq6g   230m         9Mi
        frontend-6984b9f7d7-s6mcv        557m         10Mi
        movieid-d4877748b-dc2pq          52m          188Mi
        movieinfo-7f4767f7d6-tjxjj       137m         236Mi
        moviereviews-c9cfc6dd9-czh2q     1225m        17Mi
        page-57748556bf-dnmfl            1897m        76Mi
        plot-6878c4db7-7hchj             144m         147Mi
        reviewstorage-848dc4d75d-fw7zc   223m         12Mi
        ubuntu-client-76886f6bbd-vdhbj   615m         85Mi
        uniqueid-6cddcbb98-rmkjd         42m          7Mi
        user-7c89cb48b7-dzk9l            31m          7Mi
        userreviews-64949557b8-t2r6j     26m          8Mi
        Running 1m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   511.29ms  211.45ms   1.33s    77.96%
        Req/Sec   193.68     61.27   650.00     68.83%
        Latency Distribution
        50%  538.14ms
        75%  634.42ms
        90%  731.50ms
        99%  941.96ms
        50000 requests in 1.23m, 3.72MB read
        Requests/sec:    675.67
        Transfer/sec:     51.47KB
        ------------------------------
        stop time: 32.063890
        stop time: 32.362356
        stop time: 32.431985
        stop time: 32.322939
        stop time: 32.226230
        stop time: 32.528035
        stop time: 32.768640
        stop time: 32.735856
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [32.06389, 32.362356, 32.431985, 32.322939, 32.22623, 32.528035, 32.76864, 32.735856]
    [exp] Throughput: 1541.7827103877853
[test.py] Running slowdown experiment
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '60000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '60000000', 'SLOWPOKE_DELAY_MICROS_PAGE': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_PLOT': '500.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '60000000', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '450.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '60000000', 'SLOWPOKE_DELAY_MICROS_USER': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '60000000', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '4510.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '60000000'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-mndpj:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-05T23:13:20.767594Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   720.95ms  286.63ms   1.70s    69.55%
        Req/Sec   110.01     56.59   272.00     63.72%
        Latency Distribution
        50%  748.39ms
        75%  886.28ms
        90%    1.04s
        99%    1.38s
        2516 requests in 3.03s, 191.65KB read
        Requests/sec:    831.71
        Transfer/sec:     63.35KB
        [run.sh] Speed is 831.71, duration is 120
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d120s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-67ddf7bb75-zsrhn        1m           105Mi
        composereview-657bbcdb64-wkbrg   1m           3Mi
        frontend-5987cbb7bc-5cgbl        1m           3Mi
        movieid-74c45f88c8-n6gdc         1m           187Mi
        movieinfo-5bc5747d59-wntnx       7m           187Mi
        moviereviews-c46db459f-rgvq4     1m           3Mi
        page-857f84fc76-8gs6h            7m           3Mi
        plot-c6dd987c8-clz7s             7m           265Mi
        reviewstorage-58dc6f4cf7-cgf9v   7m           3Mi
        ubuntu-client-76886f6bbd-mndpj   12m          0Mi
        uniqueid-5dff5d884d-vfhdh        7m           3Mi
        user-6c49c97fbf-r27zd            1m           4Mi
        userreviews-55746c5df4-ccsdv     1m           3Mi
        Running 2m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   852.15ms  289.97ms   1.85s    79.56%
        Req/Sec   117.06     52.57   565.00     63.54%
        Latency Distribution
        50%  900.43ms
        75%    1.02s
        90%    1.13s
        99%    1.37s
        50000 requests in 2.00m, 3.72MB read
        Requests/sec:    416.67
        Transfer/sec:     31.74KB
        ------------------------------
        stop time: 53.380400
        stop time: 53.485617
        stop time: 53.622387
        stop time: 53.478843
        stop time: 54.075771
        stop time: 53.975219
        stop time: 53.881413
        stop time: 54.179730
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [53.3804, 53.485617, 53.622387, 53.478843, 54.075771, 53.975219, 53.881413, 54.17973]
    [exp] Throughput: 930.0608645780694
    [exp] Running (pre_run: False) workload movie/mix request with the following configuration: {'CLIENT_CPU_QUOTA': '4', 'SLOWPOKE_POKER_BATCH_THRESHOLD': '60000000', 'SLOWPOKE_PROCESSING_MICROS_CASTINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_COMPOSEREVIEW': '0', 'SLOWPOKE_PROCESSING_MICROS_FRONTEND': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEID': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEINFO': '0', 'SLOWPOKE_PROCESSING_MICROS_MOVIEREVIEWS': '1000', 'SLOWPOKE_PROCESSING_MICROS_PAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_PLOT': '0', 'SLOWPOKE_PROCESSING_MICROS_REVIEWSTORAGE': '0', 'SLOWPOKE_PROCESSING_MICROS_UNIQUEID': '0', 'SLOWPOKE_PROCESSING_MICROS_USER': '0', 'SLOWPOKE_PROCESSING_MICROS_USERREVIEWS': '0', 'SLOWPOKE_DELAY_MICROS_CASTINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_CASTINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEREVIEW': '60000000', 'SLOWPOKE_DELAY_MICROS_FRONTEND': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEID': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEINFO': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEINFO': '60000000', 'SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS': '0.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_MOVIEREVIEWS': '60000000', 'SLOWPOKE_DELAY_MICROS_PAGE': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_PLOT': '250.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_PLOT': '60000000', 'SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE': '225.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_REVIEWSTORAGE': '60000000', 'SLOWPOKE_DELAY_MICROS_UNIQUEID': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_UNIQUEID': '60000000', 'SLOWPOKE_DELAY_MICROS_USER': '1127.5', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USER': '60000000', 'SLOWPOKE_DELAY_MICROS_USERREVIEWS': '2255.0', 'SLOWPOKE_POKER_BATCH_THRESHOLD_USERREVIEWS': '60000000'}
    [exp] Executing cmd `bash run.sh movie mix 8 800 50000`:
        [run.sh] Running benchmark movie with request mix, thread 8, conn 800, duration 60
        [run.sh] Deleting all services
        service "castinfo" deleted
        deployment.apps "castinfo" deleted
        service "composereview" deleted
        deployment.apps "composereview" deleted
        service "frontend" deleted
        deployment.apps "frontend" deleted
        service "movieid" deleted
        deployment.apps "movieid" deleted
        service "movieinfo" deleted
        deployment.apps "movieinfo" deleted
        service "moviereviews" deleted
        deployment.apps "moviereviews" deleted
        service "page" deleted
        deployment.apps "page" deleted
        service "plot" deleted
        deployment.apps "plot" deleted
        service "reviewstorage" deleted
        deployment.apps "reviewstorage" deleted
        service "uniqueid" deleted
        deployment.apps "uniqueid" deleted
        service "user" deleted
        deployment.apps "user" deleted
        service "userreviews" deleted
        deployment.apps "userreviews" deleted
        deployment.apps "ubuntu-client" deleted
        [run.sh] Waiting for all pods to be deleted
        [run.sh] Deploying all services
        service/castinfo created
        deployment.apps/castinfo created
        service/composereview created
        deployment.apps/composereview created
        service/frontend created
        deployment.apps/frontend created
        service/movieid created
        deployment.apps/movieid created
        service/movieinfo created
        deployment.apps/movieinfo created
        service/moviereviews created
        deployment.apps/moviereviews created
        service/page created
        deployment.apps/page created
        service/plot created
        deployment.apps/plot created
        service/reviewstorage created
        deployment.apps/reviewstorage created
        service/uniqueid created
        deployment.apps/uniqueid created
        service/user created
        deployment.apps/user created
        service/userreviews created
        deployment.apps/userreviews created
        [run.sh] Client pod not found, deploying client
        deployment.apps/ubuntu-client created
        [run.sh] Waiting for all pods to be running
        [run.sh] All pods are running
        [run.sh] Checking heartbeat for all services
        [run.sh] All pods can connect to all services
        [run.sh] Copying movie/analysis.txt to ubuntu-client-76886f6bbd-v6pxt:/analysis.txt
        [run.sh] Finished populating movie
        [run.sh] Starting the rust proxy first for movie
        [2m2025-04-05T23:16:40.189401Z[0m [32m INFO[0m [2mproxy::movie[0m[2m:[0m Reading movie analysis data from /analysis.txt
        [run.sh] Running warmup test
        [run.sh] /wrk/wrk -t8 -c800 -d3s -L http://localhost:3000
        Running 3s test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency   534.30ms  269.28ms   1.63s    71.02%
        Req/Sec   127.28     63.35   343.00     65.97%
        Latency Distribution
        50%  536.19ms
        75%  708.90ms
        90%  876.20ms
        99%    1.24s
        3023 requests in 3.03s, 230.27KB read
        Requests/sec:    997.53
        Transfer/sec:     75.98KB
        [run.sh] Speed is 997.53, duration is 100
        [run.sh] Fix the request number.
        [run.sh] Running the actual test
        [run.sh] /wrk/wrk --timeout 20s -t8 -c800 -d100s -s /wrk/fix_req_n.lua -L http://localhost:3000
        [run.sh] Checking the resource usage
        NAME                             CPU(cores)   MEMORY(bytes)
        castinfo-5cdccb6847-75lr7        287m         62Mi
        composereview-856c6c5f88-kf2wh   215m         10Mi
        frontend-74d87b9c8c-44fsv        312m         11Mi
        movieid-796688c46-d5b48          27m          178Mi
        movieinfo-558cb7f4d7-84475       195m         219Mi
        moviereviews-c46db459f-crqdg     1446m        22Mi
        page-7c5dcd65fb-t9sf9            1437m        89Mi
        plot-7f77f87f66-fk4tr            220m         146Mi
        reviewstorage-d7978f6bc-768vr    179m         17Mi
        ubuntu-client-76886f6bbd-v6pxt   543m         87Mi
        uniqueid-74d9f6b7f6-z5xtn        32m          8Mi
        user-9f6b654bf-vbbkj             49m          9Mi
        userreviews-84cb997fc4-cnqhl     27m          8Mi
        Running 2m test @ http://localhost:3000
        8 threads and 800 connections
        Thread Stats   Avg      Stdev     Max   +/- Stdev
        Latency     1.31s     1.73s   11.36s    89.14%
        Req/Sec   136.67     66.03   414.00     65.48%
        Latency Distribution
        50%  781.41ms
        75%  926.29ms
        90%    3.34s
        99%    9.68s
        50000 requests in 1.67m, 3.72MB read
        Requests/sec:    500.00
        Transfer/sec:     38.09KB
        ------------------------------
        stop time: 61.482106
        stop time: 62.128852
        stop time: 61.990775
        stop time: 61.964268
        stop time: 62.088782
        stop time: 62.206917
        stop time: 61.860049
        stop time: 61.807536
        [run.sh] Test finished with status 0
        > STDERR
        > No resources found in default namespace.
    [exp] Times: [61.482106, 62.128852, 61.990775, 61.964268, 62.088782, 62.206917, 61.860049, 61.807536]
    [exp] Throughput: 807.2176803839152
[test.py] Baseline throughput:  949.7174359134532
[test.py] Groundtruth:  [1527.6713956218478, 1541.7827103877853]
[test.py] Slowdown:  [930.0608645780694, 807.2176803839152]
[test.py] Predicted:  [1606.029873077822, 987.604867929736]
[test.py] Error percentage:  [5.129275685893036, -35.9439653022613]
[test.py] ++++++++++++++++++++++++++++++++ Summary: 
[test.py] Result for the experiment 0: 
    Baseline throughput: 949.7174359134532
    Groundtruth: [1527.6713956218478, 1541.7827103877853]
    Slowdown:    [930.0608645780694, 807.2176803839152]
    Predicted:   [1606.029873077822, 987.604867929736]
    Error Perc:  [5.129275685893036, -35.9439653022613]
