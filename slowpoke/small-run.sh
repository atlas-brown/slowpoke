#!/bin/bash

cd $(dirname $0)

# export SLOWPOKE_DELAY_MICROS_CART=0
# export SLOWPOKE_DELAY_MICROS_CHECKOUT=0
# export SLOWPOKE_DELAY_MICROS_CURRENCY=0
# export SLOWPOKE_DELAY_MICROS_EMAIL=0
# export SLOWPOKE_DELAY_MICROS_FRONTEND=0
# export SLOWPOKE_DELAY_MICROS_PAYMENT=0
# export SLOWPOKE_DELAY_MICROS_PRODUCT_CATALOG=0
# export SLOWPOKE_DELAY_MICROS_RECOMMENDATIONS=0
# export SLOWPOKE_DELAY_MICROS_SHIPPING=0
# export SLOWPOKE_PRERUN=false

# export SLOWPOKE_PRERUN=true
# export SLOWPOKE_DELAY_MICROS_COMPOSEPOST=0
# export SLOWPOKE_DELAY_MICROS_SOCIALGRAPH=0
# export SLOWPOKE_DELAY_MICROS_HOMETIMELINE=0
# export SLOWPOKE_DELAY_MICROS_USERTIMELINE=0
# export SLOWPOKE_DELAY_MICROS_POSTSTORAGE=0

# export SLOWPOKE_PRERUN=true
# export SLOWPOKE_DELAY_MICROS_CASTINFO=0
# export SLOWPOKE_DELAY_MICROS_COMPOSEREVIEW=0
# export SLOWPOKE_DELAY_MICROS_FRONTEND=0
# export SLOWPOKE_DELAY_MICROS_MOVIEID=0
# export SLOWPOKE_DELAY_MICROS_MOVIEINFO=0
# export SLOWPOKE_DELAY_MICROS_MOVIEREVIEWS=0
# export SLOWPOKE_DELAY_MICROS_PAGE=0
# export SLOWPOKE_DELAY_MICROS_PLOT=0
# export SLOWPOKE_DELAY_MICROS_REVIEWSTORAGE=0
# export SLOWPOKE_DELAY_MICROS_UNIQUEID=0
# export SLOWPOKE_DELAY_MICROS_USER=0
# export SLOWPOKE_DELAY_MICROS_USERREVIEWS=0

export SLOWPOKE_PRERUN=true
export SLOWPOKE_DELAY_MICROS_FRONTEND=0
export SLOWPOKE_DELAY_MICROS_PROFILE=0
export SLOWPOKE_DELAY_MICROS_RATE=0
export SLOWPOKE_DELAY_MICROS_RESERVATION=0
export SLOWPOKE_DELAY_MICROS_SEARCH=0
export SLOWPOKE_DELAY_MICROS_USER=0

benchmark=hotel
request=${2:-home}
thread=${3:-16}
conn=${4:-512}
duration=${5:-60}

bash run.sh $benchmark $request $thread $conn $duration
# bash run-wrk2.sh $request $thread $conn $duration $rate