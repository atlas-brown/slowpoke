[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
service "composepost" deleted
deployment.apps "composepost" deleted
service "hometimeline" deleted
deployment.apps "hometimeline" deleted
service "poststorage" deleted
deployment.apps "poststorage" deleted
service "socialgraph" deleted
deployment.apps "socialgraph" deleted
service "usertimeline" deleted
deployment.apps "usertimeline" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-2kx7s:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-15T20:28:45.915506Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   228.90ms  232.89ms   1.01s    76.18%
    Req/Sec   381.10    161.19     0.99k    68.33%
  Latency Distribution
     50%  151.10ms
     75%  454.40ms
     90%  563.76ms
     99%  767.60ms
  9113 requests in 3.03s, 694.15KB read
Requests/sec:   3005.75
Transfer/sec:    228.95KB
[run.sh] Speed is 3005.75, duration is 9
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d9s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 9s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   282.39ms  266.50ms   1.23s    48.84%
    Req/Sec   414.59    179.42     1.79k    72.69%
  Latency Distribution
     50%  248.93ms
     75%  521.64ms
     90%  599.82ms
     99%  853.05ms
  20000 requests in 9.00s, 1.49MB read
Requests/sec:   2222.19
Transfer/sec:    169.27KB
------------------------------
stop time: 5.560693
stop time: 5.770657
stop time: 5.882186
stop time: 5.924729
stop time: 6.016888
stop time: 6.366867
stop time: 6.417660
stop time: 6.327637
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-7b4b6d79dd-275z9     56m          14Mi            
hometimeline-79bbcdf9d-9bpxm     154m         86Mi            
poststorage-6f7cf87dc5-6kxdp     37m          37Mi            
socialgraph-7885949c4-4j8sd      15m          10Mi            
ubuntu-client-76886f6bbd-2kx7s   66m          66Mi            
usertimeline-647cdc4d75-hkjvd    16m          14Mi            
[run.sh] Test finished with status 0
