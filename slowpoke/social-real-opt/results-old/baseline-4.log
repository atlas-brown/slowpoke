[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
service "composepost" deleted
deployment.apps "composepost" deleted
service "hometimeline" deleted
deployment.apps "hometimeline" deleted
service "poststorage" deleted
deployment.apps "poststorage" deleted
service "socialgraph" deleted
deployment.apps "socialgraph" deleted
service "usertimeline" deleted
deployment.apps "usertimeline" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-w6zdb:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-15T18:25:28.953057Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   390.55ms  435.05ms   1.99s    82.95%
    Req/Sec   173.11    111.66   580.00     69.92%
  Latency Distribution
     50%  261.30ms
     75%  721.49ms
     90%    1.02s 
     99%    1.73s 
  4081 requests in 3.03s, 310.86KB read
Requests/sec:   1346.40
Transfer/sec:    102.56KB
[run.sh] Speed is 1346.40, duration is 22
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 22s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   651.24ms  610.87ms   2.45s    48.79%
    Req/Sec   190.23    113.81     0.90k    74.62%
  Latency Distribution
     50%  821.09ms
     75%    1.14s 
     90%    1.40s 
     99%    1.94s 
  20000 requests in 22.00s, 1.49MB read
Requests/sec:    909.08
Transfer/sec:     69.25KB
------------------------------
stop time: 12.741228
stop time: 13.107886
stop time: 13.362408
stop time: 13.254898
stop time: 13.282900
stop time: 13.443055
stop time: 13.565895
stop time: 13.338059
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-7b4b6d79dd-5jcxr     31m          13Mi            
hometimeline-5b75f5789f-jr6nw    134m         98Mi            
poststorage-6f7cf87dc5-qslhb     215m         26Mi            
socialgraph-7885949c4-lc5tc      11m          12Mi            
ubuntu-client-76886f6bbd-w6zdb   43m          105Mi           
usertimeline-647cdc4d75-zx47n    2m           16Mi            
[run.sh] Test finished with status 0
