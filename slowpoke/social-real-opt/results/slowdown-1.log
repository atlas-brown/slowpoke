SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH=100
SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE=false
SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE=100
SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE=false
SLOWPOKE_PROCESSING_MICROS_USERTIMELINE=0
SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH=false
SLOWPOKE_DELAY_MICROS_SOCIALGRAPH=3298.5685747438865
SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE=true
SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE=100
SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH=0
SLOWPOKE_DELAY_MICROS_COMPOSEPOST=3298.5685747438865
SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE=1000
SLOWPOKE_DELAY_MICROS_USERTIMELINE=818.4258018581993
SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST=false
SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE=0
SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST=100
SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST=0
SLOWPOKE_DELAY_MICROS_POSTSTORAGE=346.5780447204608
SLOWPOKE_OPT_TIME=939.7600279270855
SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE=100
[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-6b2vd:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-15T22:41:15.971077Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   494.82ms  497.05ms   1.93s    78.06%
    Req/Sec   165.78    120.00   690.00     66.67%
  Latency Distribution
     50%  345.19ms
     75%  891.85ms
     90%    1.25s 
     99%    1.69s 
  3920 requests in 3.03s, 298.59KB read
Requests/sec:   1294.46
Transfer/sec:     98.60KB
[run.sh] Speed is 1294.46, duration is 23
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 23s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   670.65ms  567.97ms   2.17s    50.97%
    Req/Sec   185.00     87.52   820.00     72.36%
  Latency Distribution
     50%  988.27ms
     75%    1.18s 
     90%    1.28s 
     99%    1.62s 
  20000 requests in 23.00s, 1.49MB read
Requests/sec:    869.56
Transfer/sec:     66.24KB
------------------------------
stop time: 13.328284
stop time: 13.858374
stop time: 13.398386
stop time: 13.481019
stop time: 13.899435
stop time: 13.920187
stop time: 13.693521
stop time: 13.674829
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-8669cdd4d8-8q45m     31m          10Mi            
hometimeline-7b9d96d685-wzfvd    104m         13Mi            
poststorage-6845dbfdd9-8qtv6     15m          13Mi            
ubuntu-client-76886f6bbd-6b2vd   6m           1Mi             
[run.sh] Test finished with status 0
