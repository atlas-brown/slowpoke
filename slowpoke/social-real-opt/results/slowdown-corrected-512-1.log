SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH=100
SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE=false
SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE=100
SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE=false
SLOWPOKE_PROCESSING_MICROS_USERTIMELINE=0
SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH=false
SLOWPOKE_DELAY_MICROS_SOCIALGRAPH=3432.590613093061
SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE=true
SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE=100
SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH=0
SLOWPOKE_DELAY_MICROS_COMPOSEPOST=3432.590613093061
SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE=1000
SLOWPOKE_DELAY_MICROS_USERTIMELINE=851.6787392209188
SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST=false
SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE=0
SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST=100
SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST=0
SLOWPOKE_DELAY_MICROS_POSTSTORAGE=360.65963646184645
SLOWPOKE_OPT_TIME=977.9428189311029
SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE=100
[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-drx66:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-16T02:54:32.923030Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   384.41ms  407.02ms   1.96s    83.12%
    Req/Sec   166.78    108.09   510.00     71.37%
  Latency Distribution
     50%  286.24ms
     75%  583.60ms
     90%  990.47ms
     99%    1.51s 
  3927 requests in 3.03s, 299.13KB read
Requests/sec:   1296.94
Transfer/sec:     98.79KB
[run.sh] Speed is 1296.94, duration is 23
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d23s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 23s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   651.46ms  560.68ms   1.81s    48.34%
    Req/Sec   185.20    100.79     0.98k    68.67%
  Latency Distribution
     50%  921.00ms
     75%    1.18s 
     90%    1.28s 
     99%    1.45s 
  20001 requests in 23.00s, 1.49MB read
Requests/sec:    869.60
Transfer/sec:     66.24KB
------------------------------
stop time: 12.981945
stop time: 13.600824
stop time: 13.472671
stop time: 13.451133
stop time: 13.696890
stop time: 13.782868
stop time: 13.821848
stop time: 13.939054
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-5795679c6c-6bsj5     13m          15Mi            
hometimeline-7b9d96d685-bfq7k    1346m        86Mi            
poststorage-769486ccb5-n747l     1m           35Mi            
socialgraph-7476c944d9-8ks2x     11m          13Mi            
ubuntu-client-76886f6bbd-drx66   492m         71Mi            
usertimeline-7654fc9797-hxhdf    42m          16Mi            
[run.sh] Test finished with status 0
