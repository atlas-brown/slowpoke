#!/bin/bash

cd $(dirname "$0")

export SLOWPOKE_PROCESSING_MICROS_CART=0
export SLOWPOKE_PROCESSING_MICROS_CHECKOUT=0
export SLOWPOKE_PROCESSING_MICROS_CURRENCY=0
export SLOWPOKE_PROCESSING_MICROS_EMAIL=0
export SLOWPOKE_PROCESSING_MICROS_FRONTEND=0
export SLOWPOKE_PROCESSING_MICROS_PAYMENT=0
export SLOWPOKE_PROCESSING_MICROS_PRODUCT_CATALOG=0
export SLOWPOKE_PROCESSING_MICROS_RECOMMENDATIONS=0
export SLOWPOKE_PROCESSING_MICROS_SHIPPING=0
export SLOWPOKE_DELAY_MICROS_CART=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_CART=100
export SLOWPOKE_IS_TARGET_SERVICE_CART=true
export SLOWPOKE_DELAY_MICROS_CHECKOUT=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_CHECKOUT=100
export SLOWPOKE_IS_TARGET_SERVICE_CHECKOUT=false
export SLOWPOKE_DELAY_MICROS_CURRENCY=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_CURRENCY=100
export SLOWPOKE_IS_TARGET_SERVICE_CURRENCY=false
export SLOWPOKE_DELAY_MICROS_EMAIL=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_EMAIL=100
export SLOWPOKE_IS_TARGET_SERVICE_EMAIL=false
export SLOWPOKE_DELAY_MICROS_FRONTEND=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_FRONTEND=100
export SLOWPOKE_IS_TARGET_SERVICE_FRONTEND=false
export SLOWPOKE_DELAY_MICROS_PAYMENT=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_PAYMENT=100
export SLOWPOKE_IS_TARGET_SERVICE_PAYMENT=false
export SLOWPOKE_DELAY_MICROS_PRODUCT_CATALOG=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_PRODUCT_CATALOG=100
export SLOWPOKE_IS_TARGET_SERVICE_PRODUCT_CATALOG=false
export SLOWPOKE_DELAY_MICROS_RECOMMENDATIONS=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_RECOMMENDATIONS=100
export SLOWPOKE_IS_TARGET_SERVICE_RECOMMENDATIONS=false
export SLOWPOKE_DELAY_MICROS_SHIPPING=0.0
export SLOWPOKE_POKER_BATCH_THRESHOLD_SHIPPING=100
export SLOWPOKE_IS_TARGET_SERVICE_SHIPPING=false

for file in yamls/*.yaml; do
    envsubst <"$file" | kubectl apply -f -
done