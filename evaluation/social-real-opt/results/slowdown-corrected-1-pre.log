SLOWPOKE_POKER_BATCH_THRESHOLD_SOCIALGRAPH=100
SLOWPOKE_IS_TARGET_SERVICE_POSTSTORAGE=false
SLOWPOKE_POKER_BATCH_THRESHOLD_HOMETIMELINE=100
SLOWPOKE_IS_TARGET_SERVICE_USERTIMELINE=false
SLOWPOKE_PROCESSING_MICROS_USERTIMELINE=0
SLOWPOKE_IS_TARGET_SERVICE_SOCIALGRAPH=false
SLOWPOKE_DELAY_MICROS_SOCIALGRAPH=3432.590613093061
SLOWPOKE_IS_TARGET_SERVICE_HOMETIMELINE=true
SLOWPOKE_POKER_BATCH_THRESHOLD_POSTSTORAGE=100
SLOWPOKE_PROCESSING_MICROS_SOCIALGRAPH=0
SLOWPOKE_DELAY_MICROS_COMPOSEPOST=3432.590613093061
SLOWPOKE_PROCESSING_MICROS_HOMETIMELINE=1000
SLOWPOKE_DELAY_MICROS_USERTIMELINE=851.6787392209188
SLOWPOKE_IS_TARGET_SERVICE_COMPOSEPOST=false
SLOWPOKE_PROCESSING_MICROS_POSTSTORAGE=0
SLOWPOKE_POKER_BATCH_THRESHOLD_COMPOSEPOST=100
SLOWPOKE_PROCESSING_MICROS_COMPOSEPOST=0
SLOWPOKE_DELAY_MICROS_POSTSTORAGE=360.65963646184645
SLOWPOKE_OPT_TIME=977.9428189311029
SLOWPOKE_POKER_BATCH_THRESHOLD_USERTIMELINE=100
[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-np6jt:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-15T22:50:38.372269Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   392.91ms  395.36ms   1.84s    79.43%
    Req/Sec   168.83    107.09   600.00     70.29%
  Latency Distribution
     50%  279.22ms
     75%  609.70ms
     90%  970.12ms
     99%    1.56s 
  4026 requests in 3.03s, 306.67KB read
Requests/sec:   1327.83
Transfer/sec:    101.14KB
[run.sh] Speed is 1327.83, duration is 22
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d22s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 22s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   651.84ms  569.16ms   1.98s    48.23%
    Req/Sec   186.66    103.10   626.00     66.51%
  Latency Distribution
     50%  952.94ms
     75%    1.19s 
     90%    1.30s 
     99%    1.51s 
  20000 requests in 22.00s, 1.49MB read
Requests/sec:    909.08
Transfer/sec:     69.25KB
------------------------------
stop time: 13.034739
stop time: 13.032583
stop time: 13.690514
stop time: 13.286717
stop time: 13.713174
stop time: 13.641354
stop time: 13.725551
stop time: 14.138769
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-5795679c6c-mrg8x     128m         15Mi            
hometimeline-7b9d96d685-gpgsl    1481m        69Mi            
poststorage-769486ccb5-4n79j     510m         28Mi            
socialgraph-7476c944d9-x5kng     27m          13Mi            
ubuntu-client-76886f6bbd-np6jt   706m         107Mi           
usertimeline-7654fc9797-h5dcc    259m         17Mi            
[run.sh] Test finished with status 0
