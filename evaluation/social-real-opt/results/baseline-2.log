[run.sh] Running benchmark social with request mix, thread 8, conn 1024, duration 60
[run.sh] Deleting all services
service "composepost" deleted
deployment.apps "composepost" deleted
service "hometimeline" deleted
deployment.apps "hometimeline" deleted
service "poststorage" deleted
deployment.apps "poststorage" deleted
service "socialgraph" deleted
deployment.apps "socialgraph" deleted
service "usertimeline" deleted
deployment.apps "usertimeline" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
service/composepost created
deployment.apps/composepost created
service/hometimeline created
deployment.apps/hometimeline created
service/poststorage created
deployment.apps/poststorage created
service/socialgraph created
deployment.apps/socialgraph created
service/usertimeline created
deployment.apps/usertimeline created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Checking heartbeat for all services
[run.sh] All pods can connect to all services
[run.sh] Populating social benchmark
Parsing social graph file: ./data/socfb-Reed98.mtx... DONE!
Analyzing social graph in: ./data/analysis.txt... DONE!
Populating social graph... 
DONE!
[run.sh] Copying social/analysis.txt to ubuntu-client-76886f6bbd-8wf2n:/analysis.txt
[run.sh] Finished populating social
[run.sh] Starting the rust proxy first for social
[2m2025-04-15T22:23:47.905053Z[0m [32m INFO[0m [2mproxy::social[0m[2m:[0m Reading social graph from /analysis.txt
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c1024 --timeout 3s -d3s -L http://localhost:3000
Running 3s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   518.01ms  512.83ms   2.27s    55.22%
    Req/Sec   178.81    108.67   660.00     66.81%
  Latency Distribution
     50%  371.16ms
     75%  957.93ms
     90%    1.19s 
     99%    1.84s 
  4245 requests in 3.04s, 323.35KB read
Requests/sec:   1396.21
Transfer/sec:    106.35KB
[run.sh] Speed is 1396.21, duration is 21
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c1024 -d21s -s /wrk/fix_req_n.lua -L http://localhost:3000
Running 21s test @ http://localhost:3000
  8 threads and 1024 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   655.04ms  607.99ms   2.53s    50.98%
    Req/Sec   188.59     98.80     0.98k    73.48%
  Latency Distribution
     50%  924.65ms
     75%    1.16s 
     90%    1.35s 
     99%    1.99s 
  20000 requests in 21.00s, 1.49MB read
Requests/sec:    952.37
Transfer/sec:     72.54KB
------------------------------
stop time: 13.109084
stop time: 13.225530
stop time: 13.116218
stop time: 13.166574
stop time: 13.549541
stop time: 13.529801
stop time: 13.390519
stop time: 13.651908
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
composepost-7b4b6d79dd-tc8sr     92m          15Mi            
hometimeline-5b75f5789f-s9z58    1235m        104Mi           
poststorage-6f7cf87dc5-hqgpp     283m         26Mi            
socialgraph-7885949c4-4lfpd      16m          12Mi            
ubuntu-client-76886f6bbd-8wf2n   648m         121Mi           
usertimeline-647cdc4d75-pblqh    177m         15Mi            
[run.sh] Test finished with status 0
