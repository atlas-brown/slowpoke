SLOWPOKE_DELAY_MICROS_SERVICE1=500
SLOWPOKE_DELAY_MICROS_SERVICE0=0.0
SLOWPOKE_POKER_BATCH_THRESHOLD=40000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0005
bash run.sh synthetic two-services 8 512 40000
[run.sh] Running benchmark synthetic with request two-services, thread 8, conn 512, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   373.83ms   78.12ms 719.01ms   78.56%
    Req/Sec   160.62     53.16   333.00     70.00%
  Latency Distribution
     50%  389.24ms
     75%  408.72ms
     90%  455.27ms
     99%  537.97ms
  3843 requests in 3.02s, 1.54MB read
Requests/sec:   1271.70
Transfer/sec:    520.36KB
[run.sh] Speed is 1271.70, duration is 47
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d47s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-5974d4ffb9-qmsbv        156m         44Mi            
service1-dbf665f44-xnz5v         266m         13Mi            
ubuntu-client-76886f6bbd-sbqv8   8m           11Mi            
Running 47s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   390.75ms   55.99ms 819.68ms   73.11%
    Req/Sec   163.59     60.20   590.00     69.95%
  Latency Distribution
     50%  391.85ms
     75%  413.57ms
     90%  458.33ms
     99%  529.44ms
  40000 requests in 47.00s, 15.98MB read
Requests/sec:    851.06
Transfer/sec:    348.24KB
------------------------------
stop time: 30.411679
stop time: 30.783647
stop time: 30.794324
stop time: 30.679370
stop time: 30.729439
stop time: 30.859191
stop time: 30.857833
stop time: 30.839828
[run.sh] Test finished with status 0

40000 / ( (30.411679 + 30.783647 + 30.794324 + 30.679370 + 30.729439 + 30.859191 + 30.857833 + 30.839828) / 8 ) = 1,301.04936014169

2000000 / 1,301.04936014169 = 1,537.22069375