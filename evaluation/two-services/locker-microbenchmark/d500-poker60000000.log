SLOWPOKE_DELAY_MICROS_SERVICE1=500
SLOWPOKE_DELAY_MICROS_SERVICE0=0.0
SLOWPOKE_POKER_BATCH_THRESHOLD=60000000
PROCESSING_TIME_SERVICE0=0.0
PROCESSING_TIME_SERVICE1=0.0005
bash run.sh synthetic two-services 8 512 40000
[run.sh] Running benchmark synthetic with request two-services, thread 8, conn 512, duration 60
[run.sh] Deleting all services
configmap "config-service0" deleted
deployment.apps "service0" deleted
service "service0" deleted
configmap "config-service1" deleted
deployment.apps "service1" deleted
service "service1" deleted
deployment.apps "ubuntu-client" deleted
[run.sh] Waiting for all pods to be deleted
[run.sh] Deploying all services
configmap/config-service0 created
deployment.apps/service0 created
service/service0 created
configmap/config-service1 created
deployment.apps/service1 created
service/service1 created
[run.sh] Client pod not found, deploying client
deployment.apps/ubuntu-client created
[run.sh] Waiting for all pods to be running
[run.sh] All pods are running
[run.sh] Running warmup test
[run.sh] /wrk/wrk -t8 -c512 -d3s -L http://service0:80/endpoint1
Running 3s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   378.49ms   94.19ms 655.60ms   76.85%
    Req/Sec   157.69     58.46   370.00     71.37%
  Latency Distribution
     50%  391.89ms
     75%  415.52ms
     90%  482.45ms
     99%  571.89ms
  3766 requests in 3.02s, 1.50MB read
Requests/sec:   1245.24
Transfer/sec:    509.53KB
[run.sh] Speed is 1245.24, duration is 48
[run.sh] Fix the request number.
[run.sh] Running the actual test
[run.sh] /wrk/wrk --timeout 20s -t8 -c512 -d48s -L -s /wrk/fix_req_n.lua http://service0:80/endpoint1
[run.sh] Checking the resource usage
NAME                             CPU(cores)   MEMORY(bytes)   
service0-64597cff5f-w7dfv        141m         34Mi            
service1-df9755b9d-ltt4f         260m         15Mi            
ubuntu-client-76886f6bbd-tbphc   19m          0Mi             
Running 48s test @ http://service0:80/endpoint1
  8 threads and 512 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   391.78ms   69.46ms 903.83ms   63.03%
    Req/Sec   162.96     54.30   430.00     71.90%
  Latency Distribution
     50%  390.30ms
     75%  415.22ms
     90%  481.12ms
     99%  583.32ms
  40000 requests in 48.00s, 15.98MB read
Requests/sec:    833.33
Transfer/sec:    340.98KB
------------------------------
stop time: 30.641215
stop time: 30.744319
stop time: 30.822618
stop time: 30.839291
stop time: 30.837918
stop time: 30.814226
stop time: 30.944834
stop time: 30.937592
[run.sh] Test finished with status 0


40000 / ( (30.641215 + 30.744319 + 30.822618 + 30.839291 + 30.837918 + 30.814226 + 30.944834 + 30.937592) / 8 ) = 1,297.7426703058

2000000 / 1,297.7426703058 = 1,541.13758125
